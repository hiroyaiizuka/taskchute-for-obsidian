/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => TaskChutePlusPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian4 = require("obsidian");

// src/managers/PathManager.ts
var import_obsidian = require("obsidian");
var _PathManager = class _PathManager {
  constructor(plugin) {
    this.plugin = plugin;
  }
  getTaskFolderPath() {
    const path = this.plugin.settings.taskFolderPath || _PathManager.DEFAULT_PATHS.taskFolder;
    return (0, import_obsidian.normalizePath)(path);
  }
  getProjectFolderPath() {
    const path = this.plugin.settings.projectFolderPath || _PathManager.DEFAULT_PATHS.projectFolder;
    return (0, import_obsidian.normalizePath)(path);
  }
  getLogDataPath() {
    const path = this.plugin.settings.logDataPath || _PathManager.DEFAULT_PATHS.logData;
    return (0, import_obsidian.normalizePath)(path);
  }
  getReviewDataPath() {
    const path = this.plugin.settings.reviewDataPath || _PathManager.DEFAULT_PATHS.reviewData;
    return (0, import_obsidian.normalizePath)(path);
  }
  getLogYearPath(year) {
    const logPath = this.getLogDataPath();
    return (0, import_obsidian.normalizePath)(`${logPath}/${year}`);
  }
  async ensureYearFolder(year) {
    const yearPath = this.getLogYearPath(year);
    await this.ensureFolderExists(yearPath);
    return yearPath;
  }
  validatePath(path) {
    if (path.startsWith("/") || path.match(/^[A-Za-z]:\\/)) {
      return { valid: false, error: "\u7D76\u5BFE\u30D1\u30B9\u306F\u4F7F\u7528\u3067\u304D\u307E\u305B\u3093" };
    }
    if (path.includes("..")) {
      return { valid: false, error: "\u30D1\u30B9\u306B'..'\u3092\u542B\u3081\u308B\u3053\u3068\u306F\u3067\u304D\u307E\u305B\u3093" };
    }
    if (path.match(/[<>"|?*]/)) {
      return { valid: false, error: "\u30D1\u30B9\u306B\u7279\u6B8A\u6587\u5B57\u3092\u542B\u3081\u308B\u3053\u3068\u306F\u3067\u304D\u307E\u305B\u3093" };
    }
    return { valid: true };
  }
  async ensureFolderExists(path) {
    const folder = this.plugin.app.vault.getAbstractFileByPath(path);
    if (!folder) {
      try {
        await this.plugin.app.vault.createFolder(path);
      } catch (error) {
        if (error.message && error.message.includes("Folder already exists")) {
          return;
        }
        throw error;
      }
    }
  }
};
_PathManager.DEFAULT_PATHS = {
  taskFolder: "TaskChute/Task",
  projectFolder: "TaskChute/Project",
  logData: "TaskChute/Log",
  reviewData: "TaskChute/Review"
};
var PathManager = _PathManager;

// src/settings.ts
var DEFAULT_SETTINGS = {
  taskFolderPath: PathManager.DEFAULT_PATHS.taskFolder,
  projectFolderPath: PathManager.DEFAULT_PATHS.projectFolder,
  logDataPath: PathManager.DEFAULT_PATHS.logData,
  reviewDataPath: PathManager.DEFAULT_PATHS.reviewData,
  enableSound: false,
  enableFireworks: false,
  enableConfetti: false
};

// src/managers/RoutineAliasManager.ts
var import_obsidian2 = require("obsidian");
var RoutineAliasManager = class {
  constructor(plugin) {
    this.aliasCache = null;
    this.plugin = plugin;
  }
  getAliasFilePath() {
    const taskFolderPath = this.plugin.pathManager.getTaskFolderPath();
    return (0, import_obsidian2.normalizePath)(`${taskFolderPath}/routine-aliases.json`);
  }
  async loadAliases() {
    if (this.aliasCache) return this.aliasCache;
    const path = this.getAliasFilePath();
    try {
      const file = this.plugin.app.vault.getAbstractFileByPath(path);
      if (file instanceof import_obsidian2.TFile) {
        const content = await this.plugin.app.vault.read(file);
        this.aliasCache = JSON.parse(content);
      } else {
        this.aliasCache = {};
      }
    } catch (error) {
      if (this.plugin._notify) {
        this.plugin._notify("\u30EB\u30FC\u30C1\u30F3\u30BF\u30B9\u30AF\u306E\u540D\u524D\u5909\u66F4\u5C65\u6B74\u306E\u8AAD\u307F\u8FBC\u307F\u306B\u5931\u6557\u3057\u307E\u3057\u305F");
      } else {
        new import_obsidian2.Notice("\u30EB\u30FC\u30C1\u30F3\u30BF\u30B9\u30AF\u306E\u540D\u524D\u5909\u66F4\u5C65\u6B74\u306E\u8AAD\u307F\u8FBC\u307F\u306B\u5931\u6557\u3057\u307E\u3057\u305F");
      }
      this.aliasCache = {};
    }
    return this.aliasCache;
  }
  async saveAliases(aliases) {
    try {
      const path = this.getAliasFilePath();
      const file = this.plugin.app.vault.getAbstractFileByPath(path);
      const content = JSON.stringify(aliases, null, 2);
      if (file instanceof import_obsidian2.TFile) {
        await this.plugin.app.vault.modify(file, content);
      } else {
        await this.plugin.app.vault.create(path, content);
      }
      this.aliasCache = aliases;
    } catch (error) {
      if (this.plugin._notify) {
        this.plugin._notify("\u30EB\u30FC\u30C1\u30F3\u30BF\u30B9\u30AF\u306E\u540D\u524D\u5909\u66F4\u5C65\u6B74\u306E\u4FDD\u5B58\u306B\u5931\u6557\u3057\u307E\u3057\u305F");
      } else {
        new import_obsidian2.Notice("\u30EB\u30FC\u30C1\u30F3\u30BF\u30B9\u30AF\u306E\u540D\u524D\u5909\u66F4\u5C65\u6B74\u306E\u4FDD\u5B58\u306B\u5931\u6557\u3057\u307E\u3057\u305F");
      }
    }
  }
  async addAlias(newName, oldName) {
    const aliases = await this.loadAliases();
    if (!aliases[newName]) {
      aliases[newName] = [];
    }
    if (aliases[oldName]) {
      aliases[newName] = [...aliases[oldName], oldName];
      delete aliases[oldName];
    } else {
      aliases[newName].push(oldName);
    }
    aliases[newName] = [...new Set(aliases[newName])];
    await this.saveAliases(aliases);
  }
  getAliases(taskName) {
    var _a;
    return ((_a = this.aliasCache) == null ? void 0 : _a[taskName]) || [];
  }
  getAllPossibleNames(taskName) {
    const names = /* @__PURE__ */ new Set([taskName]);
    const directAliases = this.getAliases(taskName);
    directAliases.forEach((alias) => names.add(alias));
    const currentName = this.findCurrentName(taskName);
    if (currentName) {
      names.add(currentName);
      const currentAliases = this.getAliases(currentName);
      currentAliases.forEach((alias) => names.add(alias));
    }
    return Array.from(names);
  }
  findCurrentName(oldName, visited = /* @__PURE__ */ new Set()) {
    if (!this.aliasCache) return null;
    if (visited.has(oldName)) return null;
    visited.add(oldName);
    for (const [current, aliases] of Object.entries(this.aliasCache)) {
      if (aliases.includes(oldName)) {
        return current;
      }
    }
    return null;
  }
};

// src/views/TaskChuteView.ts
var import_obsidian3 = require("obsidian");

// src/styles/full-css.ts
var TASKCHUTE_FULL_CSS = `
.taskchute-container {
    height: 100%;
    min-height: 0;
    display: flex;
    flex-direction: column;
}

/* Log Modal Styles */
.taskchute-log-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
}

.taskchute-log-modal-content {
    background: var(--background-primary);
    border-radius: 8px;
    width: 90%;
    max-width: 1200px;
    height: 80%;
    max-height: 800px;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    position: relative;
}

.log-modal-close {
    position: absolute;
    top: 10px;
    right: 10px;
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
    color: var(--text-muted);
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
}

.log-modal-close:hover {
    background: var(--background-modifier-hover);
    color: var(--text-normal);
}

.taskchute-log-header {
    padding: 20px;
    border-bottom: 1px solid var(--background-modifier-border);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.log-title {
    margin: 0;
    font-size: 24px;
}

.log-controls {
    display: flex;
    gap: 10px;
    align-items: center;
}

.year-selector {
    padding: 5px 10px;
    border-radius: 4px;
    border: 1px solid var(--background-modifier-border);
    background: var(--background-secondary);
    color: var(--text-normal);
    font-size: 14px;
}

.refresh-button {
    padding: 5px 12px;
    border-radius: 4px;
    border: 1px solid var(--background-modifier-border);
    background: var(--background-secondary);
    color: var(--text-normal);
    font-size: 14px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.refresh-button:hover {
    background: var(--background-modifier-hover);
    border-color: var(--text-accent);
}

.heatmap-container {
    flex: 1;
    padding: 20px;
    overflow: auto;
}

.heatmap-grid {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
}

.heatmap-placeholder {
    color: var(--text-muted);
    font-size: 16px;
}

/* Heatmap Grid Styles */
.heatmap-grid-container {
    padding: 20px;
}

.heatmap-months {
    position: relative;
    height: 20px;
    margin-bottom: 8px;
    margin-left: 43px;
}

.month-label {
    font-size: 10px;
    color: var(--text-muted);
    position: absolute;
    top: 0;
    text-align: left;
}

.heatmap-weekdays-container {
    display: flex;
    gap: 10px;
}

.heatmap-weekdays {
    display: grid;
    grid-template-rows: repeat(7, 1fr);
    gap: 2px;
    width: 20px;
}

.weekday-label {
    font-size: 10px;
    color: var(--text-muted);
    height: 11px;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    padding-right: 4px;
}

.heatmap-grid {
    display: grid;
    grid-template-rows: repeat(7, 11px);
    gap: 2px;
    grid-auto-flow: column;
    width: fit-content;
}

.heatmap-cell {
    width: 11px;
    height: 11px;
    background: var(--background-modifier-border);
    border-radius: 2px;
    cursor: pointer;
    position: relative;
}

.heatmap-cell.empty {
    background: transparent;
    cursor: default;
}

.heatmap-cell[data-level="0"] {
    background: #ebedf0;
}

.heatmap-cell[data-level="1"] {
    background: #DEF95D;
}

.heatmap-cell[data-level="2"] {
    background: #B5EE4F;
}

.heatmap-cell[data-level="3"] {
    background: #82D523;
}

.heatmap-cell[data-level="4"] {
    background: #54A923;
}

@keyframes pulse {
    0% {
        box-shadow: 0 0 0 0 rgba(118, 75, 162, 0.7);
    }
    70% {
        box-shadow: 0 0 0 10px rgba(118, 75, 162, 0);
    }
    100% {
        box-shadow: 0 0 0 0 rgba(118, 75, 162, 0);
    }
}

.heatmap-cell:hover {
    outline: 1px solid var(--text-normal);
    outline-offset: -1px;
}

.heatmap-cell.month-start {
    margin-left: 4px;
}

.heatmap-legend {
    display: flex;
    align-items: center;
    gap: 5px;
    margin-top: 10px;
    margin-left: 30px;
    font-size: 12px;
    color: var(--text-muted);
}

.legend-scale {
    display: flex;
    gap: 2px;
}

.legend-cell {
    width: 11px;
    height: 11px;
    border-radius: 2px;
}

/* Loading styles */
.heatmap-loading {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 60px 20px;
    color: var(--text-muted);
    font-size: 14px;
}

/* Error styles */
.heatmap-error {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    color: var(--text-error);
    font-size: 14px;
    background: var(--background-modifier-error);
    border-radius: 4px;
    margin-bottom: 20px;
}

.legend-cell[data-level="0"] {
    background: #ebedf0;
}

.legend-cell[data-level="1"] {
    background: #DEF95D;
}

.legend-cell[data-level="2"] {
    background: #B5EE4F;
}

.legend-cell[data-level="3"] {
    background: #82D523;
}

.legend-cell[data-level="4"] {
    background: #54A923;
}

/* Heatmap Tooltip */
.heatmap-tooltip {
    background: var(--background-secondary);
    border: 1px solid var(--background-modifier-border);
    border-radius: 4px;
    padding: 8px;
    font-size: 12px;
    white-space: pre-line;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    pointer-events: none;
}

/* TASK-012: \u30BF\u30B9\u30AF\u540D\u81EA\u52D5\u88DC\u5B8C\u306E\u30B9\u30BF\u30A4\u30EB */
.task-name-suggestions {
    position: absolute;
    z-index: 1000;
    background: var(--background-primary);
    border: 1px solid var(--background-modifier-border);
    border-radius: 4px;
    max-height: 200px;
    overflow-y: auto;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    margin-top: 2px;
}

.suggestion-item {
    padding: 8px 12px;
    cursor: pointer;
    transition: background-color 0.1s;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.suggestion-item:hover,
.suggestion-item-selected {
    background-color: var(--background-modifier-hover);
}

.suggestion-item-selected {
    background-color: var(--background-modifier-hover);
    font-weight: 500;
}

/* Main Container Layout */
.main-container {
    display: flex;
    position: relative;
    flex: 1;
    min-height: 0;
}

/* Top Bar Container */
.top-bar-container {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 10px;
    height: 30px; /* Fixed height matching date navigation */
}

/* Header Divider */
.header-divider {
    width: 1px;
    height: 20px;
    background-color: var(--background-modifier-border);
    margin: 5px 0;
}

/* Header Action Section */
.header-action-section {
    display: flex;
    align-items: center;
    gap: 8px;
}

/* Drawer Toggle Button */
.drawer-toggle {
    background: var(--background-primary);
    border: 1px solid var(--background-modifier-border);
    border-radius: 4px;
    padding: 0 10px;
    cursor: pointer;
    font-size: 16px;
    transition: background-color 0.2s ease;
    height: 100%;
    display: flex;
    align-items: center;
}

.drawer-toggle:hover {
    background: var(--background-modifier-hover);
}

/* Navigation Overlay */
.navigation-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.3);
    z-index: 999;
    transition: opacity 0.3s ease;
}

.navigation-overlay-hidden {
    opacity: 0;
    pointer-events: none;
}

.navigation-overlay-visible {
    opacity: 1;
    pointer-events: auto;
}

/* Navigation Panel */
.navigation-panel {
    position: fixed;
    left: 0;
    top: 0;
    height: 100%;
    width: 250px;
    background: var(--background-primary);
    border-right: 1px solid var(--background-modifier-border);
    box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
    z-index: 1000;
    transition: transform 0.3s ease;
    overflow-y: auto;
}

.navigation-panel-hidden {
    transform: translateX(-100%);
}

.navigation-panel-visible {
    transform: translateX(0);
}

/* Navigation Header - removed close button */
.navigation-header {
    display: none;
}

/* Navigation Items */
.navigation-nav {
    padding: 20px 0;
}

.navigation-nav-item {
    display: flex;
    align-items: center;
    padding: 10px 15px;
    cursor: pointer;
    transition: background-color 0.2s ease;
}

.navigation-nav-item:hover {
    background: var(--background-modifier-hover);
}

.navigation-nav-item.active {
    background: var(--background-modifier-active);
    font-weight: 500;
}

.navigation-nav-icon {
    margin-right: 10px;
    font-size: 16px;
}

.navigation-nav-label {
    font-size: 13px;
}
.task-list-container {
    flex: 1 1 auto;
    min-height: 0;
    overflow-y: auto;
}

.button-container {
    display: flex;
    gap: 10px;
    justify-content: center;
    margin: 15px 0;
}

.task-button {
    padding: 8px 16px;
    border: none;
    border-radius: 4px;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    min-width: 70px;
}

.task-button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.task-button.start {
    background: var(--interactive-accent);
    color: var(--text-on-accent);
}

.task-button.start:hover:not(:disabled) {
    background: var(--interactive-accent-hover);
}

.task-button.stop {
    background: #e74c3c;
    color: white;
}

.task-button.stop:hover {
    background: #c0392b;
}

.task-button.reset {
    background: var(--background-modifier-border);
    color: var(--text-normal);
}

.task-button.reset:hover {
    background: var(--background-modifier-border-hover);
}

.future-task-button {
    background-color: var(--background-modifier-border) !important;
    color: var(--text-muted) !important;
    cursor: not-allowed !important;
}


.task-list-container {
    margin-top: 10px;
    flex: 1;
    display: flex;
    flex-direction: column;
    min-height: 0;
}

.task-list-container h5 {
    margin: 0 0 10px 0;
    color: var(--text-muted);
}

.task-list {
    flex: 1 1 auto;
    height: 100%;
    min-height: 0;
    border: 1px solid var(--background-modifier-border);
    border-radius: 4px;
    background: var(--background-primary);
    padding-bottom: 50px;
    display: flex;
    flex-direction: column;
    overflow: auto;
}

.task-item {
    padding: 8px 12px;
    cursor: default;
    border-bottom: 1px solid var(--background-modifier-border);
    transition: background-color 0.2s ease;
}

.task-item:last-child {
    border-bottom: none;
}

.task-item:hover {
    background: var(--background-secondary);
}

.task-item.selected {
    background: var(--interactive-accent);
    color: var(--text-on-accent);
}

.task-item.keyboard-selected {
    background: var(--interactive-accent);
    color: var(--text-on-accent);
    box-shadow: 0 0 0 2px var(--interactive-accent-hover);
}

.task-item.completed {
    cursor: default;
}

/* \u5B8C\u4E86\u6E08\u307F\u30BF\u30B9\u30AF\u306E\u30C9\u30E9\u30C3\u30B0\u30CF\u30F3\u30C9\u30EB\u306F\u8868\u793A\u3059\u308B\u304C\u7121\u52B9\u5316 */
.drag-handle.disabled {
    cursor: default;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s ease;
}

.task-item:hover .drag-handle.disabled {
    opacity: 0.3;
}

.task-item {
    display: grid;
    grid-template-columns: 20px 40px 1fr 220px 110px 50px 30px 30px 30px;
    gap: 8px;
    align-items: center;
    padding: 2px 10px 2px 15px;
    margin: 2px 0;
}

/* \u30C9\u30E9\u30C3\u30B0\u30CF\u30F3\u30C9\u30EB\u306E\u30B9\u30BF\u30A4\u30EB */
.drag-handle {
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    color: var(--text-muted);
    opacity: 0;
    transition: opacity 0.2s ease, background-color 0.2s ease;
    border-radius: 4px;
}

.task-item:hover .drag-handle {
    opacity: 0.6;
}

.drag-handle:hover {
    opacity: 1 !important;
    color: var(--text-normal);
    background-color: var(--background-modifier-hover);
}

.drag-handle:active {
    cursor: grabbing;
}

.drag-handle svg {
    width: 10px;
    height: 16px;
}

.task-item.dragging {
    opacity: 0.5;
    background: var(--background-modifier-hover);
    transform: scale(0.98);
    transition: all 0.2s ease;
}

.task-item.dragover {
    border-top: 2px solid var(--interactive-accent);
    margin-top: -2px;
}

.task-item.dragover-invalid {
    border-top: 2px solid var(--text-error);
    margin-top: -2px;
    opacity: 0.7;
    cursor: not-allowed;
    background-color: rgba(255, 0, 0, 0.05);
    position: relative;
}

.task-item.dragover-invalid::after {
    content: "\u274C \u3053\u3053\u306B\u306F\u914D\u7F6E\u3067\u304D\u307E\u305B\u3093";
    position: absolute;
    top: -25px;
    left: 50%;
    transform: translateX(-50%);
    background-color: var(--text-error);
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    white-space: nowrap;
    z-index: 1000;
    pointer-events: none;
}

.task-name {
    cursor: pointer;
    font-weight: 500;
    font-size: 13px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-right: -4px; /* \u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u3068\u306E\u9593\u9694\u3092\u72ED\u3081\u308B */
}

.task-time-range {
    font-size: 12px;
    color: var(--text-muted);
    font-family: monospace;
    white-space: nowrap;
    text-align: center;
    display: flex;
    justify-content: center;
    align-items: center;
}
.task-duration,
.task-timer-display {
    font-size: 12px;
    color: var(--text-muted);
    text-align: center;
    font-family: monospace;
}

.task-timer-display {
    color: var(--interactive-accent);
    font-weight: bold;
}

.time-slot-header {
    background: var(--background-secondary);
    color: var(--text-muted);
    font-size: 12px;
    font-weight: 600;
    padding: 6px 12px;
    margin: 8px 0 4px 0;
    border-radius: 4px;
    border-left: 3px solid var(--interactive-accent);
}

.time-slot-header.other {
    border-left-color: var(--background-modifier-border);
}

.time-slot-header.dragover {
    background: var(--background-modifier-hover);
    border-left-width: 5px;
    transition: all 0.2s ease;
}

.routine-button {
    background: none;
    border: none;
    font-size: 14px;
    cursor: pointer;
    padding: 2px;
    border-radius: 4px;
    transition: all 0.2s ease;
    opacity: 0.4;
    width: 100%;
    text-align: center;
}

.routine-button:hover {
    opacity: 1;
    background: var(--background-modifier-border);
}

.routine-button.active {
    opacity: 1;
    color: var(--interactive-accent);
}

/* \u30B3\u30E1\u30F3\u30C8\u30DC\u30BF\u30F3\u30B9\u30BF\u30A4\u30EB */
.comment-button {
    font-size: 15px;
    border: none;
    background: none;
    cursor: pointer;
    color: var(--text-muted);
    padding: 2px;
    border-radius: 4px;
    transition: all 0.2s ease;
    opacity: 0;
    width: 100%;
    text-align: center;
    visibility: visible; /* \u30C7\u30D5\u30A9\u30EB\u30C8\u306F\u8868\u793A */
}

.task-item:hover .comment-button:not(.disabled) {
    opacity: 0.6;
}

.comment-button:not(.disabled):hover {
    opacity: 1 !important;
    background: var(--background-modifier-border);
    color: var(--text-normal);
}

/* \u30B3\u30E1\u30F3\u30C8\u30DC\u30BF\u30F3\u306E\u7121\u52B9\u5316\u30B9\u30BF\u30A4\u30EB - \u30B9\u30DA\u30FC\u30B9\u306F\u7DAD\u6301\u3057\u3066\u975E\u8868\u793A */
.comment-button.disabled {
    visibility: hidden;
}

/* \u65E2\u5B58\u30B3\u30E1\u30F3\u30C8\u304C\u3042\u308B\u5834\u5408\u306F\u8868\u793A\u3059\u308B\u304C\u3001\u30AF\u30EA\u30C3\u30AF\u4E0D\u53EF */
.comment-button.disabled.active {
    visibility: visible;
    opacity: 0.6;
    pointer-events: none;
    cursor: not-allowed;
}

.comment-button.active {
    opacity: 0.6;
    color: var(--interactive-accent);
}

.task-item:hover .comment-button.active {
    opacity: 1;
}

/* \u5B8C\u4E86\u6E08\u307F\u3067\u30B3\u30E1\u30F3\u30C8\u672A\u8A18\u5165\u306E\u30BF\u30B9\u30AF - \u901A\u5E38\u6642\u975E\u8868\u793A\u3001\u30DB\u30D0\u30FC\u6642\u8868\u793A\uFF08\u7A7A\u9593\u306F\u4FDD\u6301\uFF09 */
.comment-button.no-comment {
    opacity: 0;
    visibility: hidden;
}

.task-item:hover .comment-button.no-comment {
    opacity: 0.6;
    visibility: visible;
}

/* \u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u8868\u793A\u30B3\u30F3\u30DD\u30FC\u30CD\u30F3\u30C8\u5168\u4F53 */
.taskchute-project-display {
    display: flex;
    align-items: center;
    gap: 4px;
    justify-content: flex-start;
    margin-right: 32px; /* \u6642\u9593\u3068\u306E\u9593\u9694\u3092\u5E83\u3052\u308B */
}

/* \u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u30DC\u30BF\u30F3\uFF08\u30D5\u30A9\u30EB\u30C0\u30A2\u30A4\u30B3\u30F3 + \u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u540D\uFF09 */
.taskchute-project-button {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 2px 8px;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s ease;
    background: var(--background-secondary);
    border: 1px solid var(--background-modifier-border);
    color: var(--text-normal);
    font-size: 13px;
    max-width: 100%;
}

.taskchute-project-button:hover {
    background: var(--background-modifier-hover);
    border-color: var(--interactive-accent);
}

/* \u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u672A\u8A2D\u5B9A\u306E\u5834\u5408 */
.taskchute-project-button.empty {
    color: var(--text-muted);
    border-style: dashed;
}

/* \u30D5\u30A9\u30EB\u30C0\u30A2\u30A4\u30B3\u30F3 */
.taskchute-project-icon {
    font-size: 14px;
    flex-shrink: 0;
}

/* \u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u540D */
.taskchute-project-name {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

/* External Link\u30A2\u30A4\u30B3\u30F3 */
.taskchute-external-link {
    font-size: 14px;
    cursor: pointer;
    padding: 2px 4px;
    border-radius: 4px;
    transition: all 0.2s ease;
    color: var(--text-muted);
}

.taskchute-external-link:hover {
    background: var(--background-modifier-hover);
    color: var(--interactive-accent);
}

/* \u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u672A\u8A2D\u5B9A\u6642\u306E\u30D7\u30EC\u30FC\u30B9\u30DB\u30EB\u30C0\u30FC */
.taskchute-project-placeholder {
    display: inline-flex;
    align-items: center;
    padding: 2px 8px;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s ease;
    opacity: 0;
    border: 1px dashed var(--background-modifier-border);
    color: var(--text-muted);
    font-size: 13px;
    min-width: 100px;
}

.taskchute-project-placeholder::before {
    content: "\u{1F4C1} \u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u3092\u8A2D\u5B9A";
    font-size: 13px;
}

.task-item:hover .taskchute-project-placeholder {
    opacity: 0.6;
}

/* \u30DB\u30D0\u30FC\u6642\u306E\u660E\u308B\u304F\u306A\u308B\u52B9\u679C\u3092\u524A\u9664 */
.taskchute-project-placeholder:hover {
    /* opacity: 1 !important; \u524A\u9664 */
    /* background: var(--background-modifier-hover); \u524A\u9664 */
    /* border-color: var(--interactive-accent); \u524A\u9664 */
    /* color: var(--text-normal); \u524A\u9664 */
}

/* \u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u30DC\u30BF\u30F3\u30B9\u30BF\u30A4\u30EB */
.project-button,
.project-placeholder {
    margin-left: 15px;
    margin-right: 4px;
    font-size: 14px;
    border: none;
    background: none;
    padding: 2px 6px;
    border-radius: 4px;
    transition: all 0.2s ease;
    min-width: 26px; /* \u4E00\u5B9A\u306E\u5E45\u3092\u78BA\u4FDD */
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

.project-button {
    cursor: pointer;
    color: var(--text-muted);
    opacity: 0.7;
}

.project-button:hover {
    opacity: 1;
    background: var(--background-modifier-border);
    color: var(--text-normal);
}

.project-placeholder {
    /* \u900F\u660E\u3067\u30B9\u30DA\u30FC\u30B9\u306E\u307F\u78BA\u4FDD */
    opacity: 0;
    pointer-events: none;
}

.task-list-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    gap: 8px;
}

.header-left-section {
    display: flex;
    align-items: center;
    gap: 8px;
}

.header-left-section h5 {
    margin: 0;
    color: var(--text-muted);
}

.header-right-section {
    display: flex;
    align-items: center;
}

/* Grayed out effect for task list */
.task-list-container.grayed-out {
    opacity: 0.6;
    pointer-events: none;
}

.add-task-button {
    margin-left: 0;
    margin-right: 15px;
}

.add-task-button.repositioned {
    margin-left: 0;
    margin-right: 0;
}

.robot-terminal-button {
    background: var(--background-primary);
    border: 1px solid var(--background-modifier-border);
    border-radius: 4px;
    padding: 4px 8px;
    cursor: pointer;
    font-size: 16px;
    transition: background-color 0.2s ease;
    margin-right: 15px;
}

.robot-terminal-button:hover {
    background: var(--background-modifier-hover);
}

/* \u30E2\u30FC\u30C0\u30EB\u30B9\u30BF\u30A4\u30EB */
.task-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
}

.task-modal-content {
    background: var(--background-primary);
    border-radius: 8px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    width: 90%;
    max-width: 500px;
    max-height: 80vh;
    overflow-y: auto;
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 20px 0 20px;
    border-bottom: 1px solid var(--background-modifier-border);
}

.modal-header h3 {
    margin: 0;
    color: var(--text-normal);
}

.modal-close-button {
    background: none;
    border: none;
    font-size: 24px;
    color: var(--text-muted);
    cursor: pointer;
    padding: 0;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    transition: all 0.2s ease;
}

.modal-close-button:hover {
    background: var(--background-modifier-border);
    color: var(--text-normal);
}

.task-form {
    padding: 20px;
}

.form-group {
    margin-bottom: 15px;
}

.form-label {
    display: block;
    margin-bottom: 5px;
    font-weight: 500;
    color: var(--text-normal);
}

.form-input,
.form-textarea {
    width: 100%;
    padding: 8px 12px;
    border: 1px solid var(--background-modifier-border);
    border-radius: 4px;
    background: var(--background-primary);
    color: var(--text-normal);
    font-family: inherit;
    font-size: 14px;
    box-sizing: border-box;
}

/* \u30BB\u30EC\u30AF\u30C8\u30DC\u30C3\u30AF\u30B9\u306E\u9AD8\u3055\u8ABF\u6574 */
select.form-input {
    min-height: 36px;
    line-height: 1.5;
    padding: 8px 12px;
}

.form-input:focus,
.form-textarea:focus {
    outline: none;
    border-color: var(--interactive-accent);
    box-shadow: 0 0 0 2px rgba(var(--interactive-accent-rgb), 0.2);
}

.form-textarea {
    min-height: 80px;
    resize: vertical;
}

.form-button-group {
    display: flex;
    gap: 10px;
    justify-content: flex-end;
    margin-top: 20px;
}

.form-button {
    padding: 8px 16px;
    border: none;
    border-radius: 4px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    min-width: 80px;
}

.form-button.cancel {
    background: var(--background-modifier-border);
    color: var(--text-normal);
}

.form-button.cancel:hover {
    background: var(--background-modifier-border-hover);
}

.form-button.create {
    background: var(--interactive-accent);
    color: var(--text-on-accent);
}

.form-button.create:hover {
    background: var(--interactive-accent-hover);
}

.form-description {
    margin: 0;
    color: var(--text-muted);
    font-size: 13px;
    line-height: 1.4;
}

.task-name.wikilink {
    color: var(--link-color);
    text-decoration: none;
    cursor: pointer;
    font-weight: 500;
    border-radius: 3px;
    padding: 2px 4px;
    transition: background 0.15s;
}
.task-name.wikilink:hover {
    background: var(--background-modifier-hover);
    color: var(--link-color-hover);
}
.play-stop-button {
    font-size: 18px;
    border: none;
    background: none;
    cursor: pointer;
    transition: color 0.2s;
    color: #3498db;
    padding: 2px;
    border-radius: 4px;
    width: 100%;
    text-align: center;
}
.play-stop-button.stop {
    color: #e74c3c;
    font-weight: bold;
    background: var(--background-modifier-border);
}
.task-item.selected {
    background: var(--interactive-accent);
    color: var(--text-on-accent);
    font-weight: bold;
}
.delete-task-button {
    margin-left: 8px;
    font-size: 15px;
    border: none;
    background: none;
    cursor: pointer;
    color: #e74c3c;
    padding: 2px 6px;
    border-radius: 4px;
    transition: background 0.2s;
}
.delete-task-button:hover {
    background: var(--background-modifier-border);
}

/* \u8A2D\u5B9A\u30DC\u30BF\u30F3\u30B9\u30BF\u30A4\u30EB */
.settings-task-button {
    font-size: 15px;
    border: none;
    background: none;
    cursor: pointer;
    color: var(--text-muted);
    padding: 2px;
    margin-right: 10px;
    border-radius: 4px;
    transition: all 0.2s ease;
    opacity: 0.6;
    width: 100%;
    text-align: center;
}

.settings-task-button:hover {
    opacity: 1;
    background: var(--background-modifier-border);
    color: var(--text-normal);
}

/* \u30C4\u30FC\u30EB\u30C1\u30C3\u30D7\u30B9\u30BF\u30A4\u30EB */
.task-settings-tooltip {
    background: var(--background-primary);
    border: 1px solid var(--background-modifier-border);
    border-radius: 6px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    padding: 4px 0;
    min-width: 140px;
    font-size: 13px;
    z-index: 1000;
}

.tooltip-header {
    display: flex;
    justify-content: flex-end;
    padding: 4px 8px 0 8px;
    margin-bottom: 4px;
}

.tooltip-close-button {
    background: none;
    border: none;
    font-size: 16px;
    color: var(--text-muted);
    cursor: pointer;
    padding: 0;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 3px;
    transition: all 0.2s ease;
}

.tooltip-close-button:hover {
    background: var(--background-modifier-border);
    color: var(--text-normal);
}

.tooltip-item {
    padding: 8px 12px;
    cursor: pointer;
    transition: background-color 0.2s ease;
    display: flex;
    align-items: center;
    gap: 8px;
}

.tooltip-item:hover {
    background: var(--background-secondary);
}

.tooltip-item.delete-item:hover {
    background: rgba(231, 76, 60, 0.1);
}

.tooltip-item.project-item {
    color: var(--text-normal);
}

.tooltip-item.project-item:hover {
    background: var(--background-secondary);
}

.tooltip-item.disabled {
    opacity: 0.5;
    color: var(--text-muted);
    cursor: not-allowed;
}

.tooltip-item.disabled:hover {
    background: none;
}

.date-nav-container {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 8px;
    gap: 2px;
    height: 36px;
}

.date-nav-container.compact {
    flex: 1; /* Take remaining space in top-bar-container */
    margin-bottom: 0; /* Remove bottom margin */
    gap: 1px;
    height: 100%; /* Match parent height */
    display: flex;
    align-items: center;
    justify-content: center;
}

.date-nav-arrow {
    background: none;
    border: none;
    font-size: 28px;
    color: #888;
    cursor: pointer;
    padding: 0 8px;
    transition: color 0.2s;
}

.date-nav-container.compact .date-nav-arrow {
    font-size: 20px;
    padding: 0 4px;
}

.date-nav-arrow:hover {
    color: #1976d2;
}

.date-nav-label {
    font-size: 15px;
    font-weight: bold;
    color: #1976d2;
    min-width: 90px;
    text-align: center;
    letter-spacing: 0.5px;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 28px;
    margin-right: 3px;
}

.date-nav-container.compact .date-nav-label {
    font-size: 15px;
    min-width: 90px;
    letter-spacing: 0.5px;
    height: 24px;
}
.calendar-btn {
    background: none;
    border: none;
    font-size: 16px;
    padding: 2px 2px;
    margin: 0 1px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 24px;
    width: 24px;
    border-radius: 6px;
    transition: background 0.2s;
}
.calendar-btn:hover {
    background: var(--background-modifier-border);
}
.date-wikilink {
    color: #1976d2 !important;
    font-weight: bold;
    text-decoration: none;
    display: inline-block;
    text-align: center;
    min-width: 60px;
    padding: 0 1px;
}

/* \u5B8C\u4E86\u6F14\u51FA\u30B9\u30BF\u30A4\u30EB */


@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}



@keyframes bounceIn {
    0% {
        transform: scale(0.3);
        opacity: 0;
    }
    50% {
        transform: scale(1.05);
    }
    70% {
        transform: scale(0.9);
    }
    100% {
        transform: scale(1);
        opacity: 1;
    }
}



@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}



.fireworks-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
}

.firework {
    position: absolute;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    animation: fireworkExplosion 2s ease-out forwards;
}

@keyframes fireworkExplosion {
    0% {
        transform: scale(0);
        opacity: 1;
    }
    50% {
        transform: scale(1);
        opacity: 1;
    }
    100% {
        transform: scale(0);
        opacity: 0;
    }
}




/* \u82B1\u706B\u306E\u8FFD\u52A0\u30A8\u30D5\u30A7\u30AF\u30C8 */
.firework::before,
.firework::after {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: inherit;
    animation: fireworkSparkle 2s ease-out forwards;
}

.firework::before {
    animation-delay: 0.1s;
}

.firework::after {
    animation-delay: 0.2s;
}

@keyframes fireworkSparkle {
    0% {
        transform: scale(0) rotate(0deg);
        opacity: 1;
    }
    100% {
        transform: scale(2) rotate(360deg);
        opacity: 0;
    }
}

/* \u30D1\u30FC\u30C6\u30A3\u30AF\u30EB\u52B9\u679C */
.particle {
    position: absolute;
    width: 4px;
    height: 4px;
    border-radius: 50%;
    animation: particleExplosion 1.5s ease-out forwards;
}

@keyframes particleExplosion {
    0% {
        transform: scale(0) translateX(0);
        opacity: 1;
    }
    50% {
        transform: scale(1) translateX(50px);
        opacity: 1;
    }
    100% {
        transform: scale(0) translateX(100px);
        opacity: 0;
    }
}

/* \u8FFD\u52A0\u306E\u6F14\u51FA\u52B9\u679C */


@keyframes glowPulse {
    0%, 100% { opacity: 0.3; }
    50% { opacity: 0.8; }
}

/* \u7D71\u8A08\u8868\u793A\u30B9\u30BF\u30A4\u30EB */


.stat-item {
    text-align: center;
    background: rgba(255, 255, 255, 0.1);
    padding: 15px;
    border-radius: 10px;
    backdrop-filter: blur(10px);
}

.stat-number {
    display: block;
    font-size: 24px;
    font-weight: bold;
    color: white;
    margin-bottom: 5px;
}

.stat-label {
    display: block;
    font-size: 14px;
    color: rgba(255, 255, 255, 0.8);
}

/* \u7D19\u5439\u96EA\u30A8\u30D5\u30A7\u30AF\u30C8 */
.confetti-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    overflow: hidden;
}

.confetti {
    position: absolute;
    top: -10px;
    border-radius: 2px;
    animation: confettiFall 3s linear forwards;
}

@keyframes confettiFall {
    0% {
        transform: translateY(-10px) rotate(0deg);
        opacity: 1;
    }
    100% {
        transform: translateY(100vh) rotate(720deg);
        opacity: 0;
    }
}

/* \u8FFD\u52A0\u306E\u6F14\u51FA\u52B9\u679C */


@keyframes shimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

/* \u30C1\u30A7\u30C3\u30AF\u30DC\u30C3\u30AF\u30B9\u30B9\u30BF\u30A4\u30EB */
.form-checkbox {
    margin-left: 10px;
    width: 16px;
    height: 16px;
    accent-color: var(--interactive-accent);
}

.form-checkbox:checked {
    background-color: var(--interactive-accent);
    border-color: var(--interactive-accent);
}

/* \u30E9\u30B8\u30AA\u30DC\u30BF\u30F3\u30B0\u30EB\u30FC\u30D7\u30B9\u30BF\u30A4\u30EB */
.radio-group {
    display: flex;
    gap: 20px;
    margin-top: 8px;
}

.radio-group input[type="radio"] {
    margin-right: 8px;
    accent-color: var(--interactive-accent);
}

.radio-group label {
    display: flex;
    align-items: center;
    cursor: pointer;
    font-size: 14px;
    color: var(--text-normal);
}

/* \u30BB\u30EC\u30AF\u30C8\u30DC\u30C3\u30AF\u30B9\u30B9\u30BF\u30A4\u30EB */
.form-input[type="time"],
.form-input[type="select"] {
    width: 100%;
    padding: 8px 12px;
    border: 1px solid var(--background-modifier-border);
    border-radius: 4px;
    background: var(--background-primary);
    color: var(--text-normal);
    font-family: inherit;
    font-size: 14px;
    box-sizing: border-box;
}

.form-input[type="time"]:focus,
.form-input[type="select"]:focus {
    outline: none;
    border-color: var(--interactive-accent);
    box-shadow: 0 0 0 2px rgba(var(--interactive-accent-rgb), 0.2);
}

/* \u30BF\u30B9\u30AF\u5B8C\u4E86\u30B3\u30E1\u30F3\u30C8\u30E2\u30FC\u30C0\u30EB\u306E\u30B9\u30BF\u30A4\u30EB */
.completion-modal {
    max-width: 500px;
    max-height: 80vh;
    overflow-y: auto;
}

.completion-form {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.completion-time-info {
    background: var(--background-secondary);
    padding: 12px;
    border-radius: 6px;
    border: 1px solid var(--background-modifier-border);
}

.completion-time-info p {
    margin: 4px 0;
    font-size: 14px;
    color: var(--text-normal);
}

.completion-rating-section {
    background: var(--background-secondary);
    padding: 16px;
    border-radius: 6px;
    border: 1px solid var(--background-modifier-border);
}

.completion-rating-section h4 {
    margin: 0 0 16px 0;
    font-size: 16px;
    color: var(--text-normal);
}

.rating-group {
    margin-bottom: 16px;
}

.rating-label {
    display: block;
    margin-bottom: 8px;
    font-size: 14px;
    font-weight: 500;
    color: var(--text-normal);
}

.star-rating {
    display: flex;
    gap: 4px;
    margin-bottom: 8px;
}

.star-rating .star {
    font-size: 20px;
    cursor: pointer;
    transition: all 0.2s ease;
    user-select: none;
    opacity: 0.3;
}

.star-rating .star:hover {
    transform: scale(1.2);
}

.energy-select {
    width: 100%;
    padding: 8px 12px;
    border: 1px solid var(--background-modifier-border);
    border-radius: 4px;
    background: var(--background-primary);
    color: var(--text-normal);
    font-family: inherit;
    font-size: 14px;
    box-sizing: border-box;
}

.energy-select:focus {
    outline: none;
    border-color: var(--interactive-accent);
    box-shadow: 0 0 0 2px rgba(var(--interactive-accent-rgb), 0.2);
}

.completion-comment {
    width: 100%;
    min-height: 100px;
    padding: 12px;
    border: 1px solid var(--background-modifier-border);
    border-radius: 6px;
    background: var(--background-primary);
    color: var(--text-normal);
    font-family: inherit;
    font-size: 14px;
    resize: vertical;
    box-sizing: border-box;
}

/* \u5165\u529B\u6642\u306E\u30C6\u30AD\u30B9\u30C8\u8272\u3092\u660E\u308B\u304F\u3059\u308B */
.completion-comment:not(:placeholder-shown) {
    color: rgba(255, 255, 255, 0.9);
}

.completion-comment:focus {
    outline: none;
    border-color: var(--interactive-accent);
    box-shadow: 0 0 0 2px rgba(var(--interactive-accent-rgb), 0.2);
}

.completion-comment::placeholder {
    color: var(--text-faint);
    opacity: 0.6;
    font-style: italic;
}

.tag-selection {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 8px;
}

.tag-option {
    padding: 6px 12px;
    background: var(--background-modifier-border);
    color: var(--text-muted);
    border-radius: 16px;
    cursor: pointer;
    font-size: 12px;
    transition: all 0.2s ease;
    user-select: none;
}

.tag-option:hover {
    background: var(--background-modifier-border-hover);
    color: var(--text-normal);
}

.tag-option.selected {
    background: var(--interactive-accent);
    color: var(--text-on-accent);
}

.form-button-group {
    display: flex;
    gap: 12px;
    justify-content: flex-end;
    margin-top: 8px;
}

.form-button {
    padding: 10px 20px;
    border: none;
    border-radius: 6px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    min-width: 80px;
}

.form-button.primary {
    background: var(--interactive-accent);
    color: var(--text-on-accent);
}

.form-button.primary:hover {
    background: var(--interactive-accent-hover);
}

.form-button.secondary {
    background: var(--background-modifier-border);
    color: var(--text-normal);
}

.form-button.secondary:hover {
    background: var(--background-modifier-border-hover);
}

/* \u30EC\u30B9\u30DD\u30F3\u30B7\u30D6\u5BFE\u5FDC - \u30B3\u30F3\u30C6\u30CA\u30D9\u30FC\u30B9\u306E\u8ABF\u6574 */
/* \u4E2D\u9593\u306E\u5E45\uFF08800px\u4EE5\u4E0B\u76F8\u5F53\uFF09 */
.taskchute-narrow .task-item {
    /* \u30B0\u30EA\u30C3\u30C9\u30EC\u30A4\u30A2\u30A6\u30C8\u3092\u8ABF\u6574 - \u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u3068\u6642\u9593\u3092\u7E2E\u5C0F */
    grid-template-columns: 20px 40px minmax(150px, 1fr) 120px 80px 40px 30px 30px 30px;
    gap: 4px;
}

.taskchute-narrow .task-name {
    min-width: 150px;
}

.taskchute-narrow .taskchute-project-display {
    max-width: 120px;
    margin-right: 4px;
}

.taskchute-narrow .taskchute-project-name {
    max-width: 100px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.taskchute-narrow .task-time-range {
    font-size: 11px;
}

.taskchute-narrow .routine-button,
.taskchute-narrow .comment-button {
    font-size: 13px;
}

/* \u3055\u3089\u306B\u72ED\u3044\u5E45\uFF08600px\u4EE5\u4E0B\u76F8\u5F53\uFF09 */
.taskchute-very-narrow .task-item {
    /* \u30BF\u30B9\u30AF\u540D\u3092\u6700\u512A\u5148\u306B\u3057\u3001\u5FC5\u8981\u306A\u30DC\u30BF\u30F3\u306E\u307F\u8868\u793A */
    grid-template-columns: 20px 40px 1fr 30px 30px;
    gap: 2px;
}

/* \u8868\u793A\u3059\u308B\u8981\u7D20\u3092\u9650\u5B9A */
.taskchute-very-narrow .task-item > *:nth-child(n+6) {
    display: none;
}

/* \u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u3001\u6642\u9593\u8868\u793A\u3001\u5B9F\u884C\u6642\u9593\u3092\u975E\u8868\u793A */
.taskchute-very-narrow .taskchute-project-display,
.taskchute-very-narrow .task-time-range,
.taskchute-very-narrow .task-duration {
    display: none;
}

/* \u65E5\u8DE8\u304E\u30BF\u30B9\u30AF\u306E\u30B9\u30BF\u30A4\u30EB */
.task-duration.cross-day {
    color: var(--text-accent);
    font-weight: 500;
    position: relative;
}

.task-duration.cross-day::after {
    content: "\u{1F319}";
    font-size: 0.8em;
    margin-left: 4px;
    opacity: 0.7;
}

/* \u30BF\u30B9\u30AF\u540D\u3092\u6700\u5927\u9650\u8868\u793A */
.taskchute-very-narrow .task-name {
    min-width: 80px;
}

/* \u30EB\u30FC\u30C1\u30F3\u30DC\u30BF\u30F3\u3068\u8A2D\u5B9A\u30DC\u30BF\u30F3\u306E\u307F\u8868\u793A */
.taskchute-very-narrow .task-item > *:nth-child(7),  /* \u30EB\u30FC\u30C1\u30F3\u30DC\u30BF\u30F3 */
.taskchute-very-narrow .task-item > *:nth-child(9) {  /* \u8A2D\u5B9A\u30DC\u30BF\u30F3 */
    display: flex;
}

/* \u30EB\u30FC\u30C1\u30F3\u8A2D\u5B9A\u30E2\u30FC\u30C0\u30EB\u306E\u65B0\u3057\u3044\u30B9\u30BF\u30A4\u30EB */
.checkbox-group {
    display: flex;
    gap: 20px;
    margin-bottom: 10px;
}

.checkbox-label {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    user-select: none;
}

.checkbox-label input[type="checkbox"] {
    cursor: pointer;
    margin: 0;
}

.weekday-checkboxes {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
    padding: 10px 0;
}

.weekday-checkbox-label {
    display: flex;
    align-items: center;
    gap: 5px;
    cursor: pointer;
    user-select: none;
    padding: 5px 10px;
    border: 1px solid var(--background-modifier-border);
    border-radius: 4px;
    transition: all 0.2s ease;
}

.weekday-checkbox-label:hover {
    background-color: var(--background-modifier-hover);
}

.weekday-checkbox-label input[type="checkbox"] {
    cursor: pointer;
    margin: 0;
}

.weekday-checkbox-label input[type="checkbox"]:checked + span {
    font-weight: bold;
    color: var(--text-accent);
}

/* \u66DC\u65E5\u9078\u629E\u30B0\u30EB\u30FC\u30D7\u5168\u4F53\u306E\u30B9\u30BF\u30A4\u30EB */
#edit-weekday-group {
    transition: all 0.3s ease;
    overflow: hidden;
}

#edit-weekday-group[style*="display: none"] {
    max-height: 0;
    opacity: 0;
}

#edit-weekday-group[style*="display: block"] {
    max-height: 200px;
    opacity: 1;
}

/* \u30BF\u30B9\u30AF\u540D\u691C\u8A3C\u30B9\u30BF\u30A4\u30EB */
.form-input.error {
    border-color: #e74c3c;
    background-color: #fee;
}

.task-name-warning {
    color: #e74c3c;
    font-size: 12px;
    margin-top: 4px;
    padding: 4px 8px;
    background-color: #fee;
    border-radius: 4px;
}

.task-name-warning.hidden {
    display: none;
}

.task-name-warning.highlight {
    animation: flash 0.3s ease-in-out;
}

@keyframes flash {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

.form-button.disabled {
    background-color: #ccc;
    cursor: not-allowed;
    opacity: 0.6;
}

/* Phase 1: \u6700\u4E0B\u90E8\u3078\u306E\u30C9\u30ED\u30C3\u30D7\u30A4\u30F3\u30B8\u30B1\u30FC\u30BF\u30FC */
.task-item.dragover-bottom {
    border-bottom: 2px solid var(--interactive-accent);
    margin-bottom: -2px;
}

.task-list.dragover-bottom::after {
    content: '';
    display: block;
    height: 2px;
    background-color: var(--interactive-accent);
    margin-top: 4px;
}
`;

// src/views/TaskChuteView-refactored.ts
async function loadTasksRefactored() {
  var _a;
  this.tasks = [];
  this.taskInstances = [];
  try {
    const dateString = this.getCurrentDateString();
    const todayExecutions = await loadTodayExecutions.call(this, dateString);
    const taskFolderPath = this.plugin.pathManager.getTaskFolderPath();
    const taskFolder = this.app.vault.getAbstractFileByPath(taskFolderPath);
    if (!taskFolder) {
      this.renderTaskList();
      return;
    }
    const taskFiles = taskFolder.children.filter(
      (file) => file.extension === "md"
    );
    const processedTaskNames = /* @__PURE__ */ new Set();
    const processedFilePaths = /* @__PURE__ */ new Set();
    for (const exec of todayExecutions) {
      if (!processedTaskNames.has(exec.taskTitle)) {
        processedTaskNames.add(exec.taskTitle);
        const taskFile = taskFiles.find((f) => f.basename === exec.taskTitle);
        if (taskFile) {
          processedFilePaths.add(taskFile.path);
        }
        const taskExecutions = todayExecutions.filter(
          (e) => e.taskTitle === exec.taskTitle
        );
        await createTaskFromExecutions.call(this, taskExecutions, taskFile, dateString);
      }
    }
    for (const file of taskFiles) {
      if (processedFilePaths.has(file.path)) continue;
      const content = await this.app.vault.read(file);
      const metadata = (_a = this.app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if (!content.includes("#task") && !(metadata == null ? void 0 : metadata.estimatedMinutes)) {
        continue;
      }
      const isRoutine = (metadata == null ? void 0 : metadata.isRoutine) === true || content.includes("#routine");
      if (isRoutine) {
        if (shouldShowRoutineTask.call(this, metadata, this.currentDate)) {
          await createRoutineTask.call(this, file, content, metadata, dateString);
        }
      } else {
        const shouldShow = await shouldShowNonRoutineTask.call(this, file, metadata, dateString);
        if (shouldShow) {
          await createNonRoutineTask.call(this, file, content, metadata, dateString);
        }
      }
    }
    this.renderTaskList();
  } catch (error) {
    console.error("Failed to load tasks:", error);
    new this.app.constructor.Notice("\u30BF\u30B9\u30AF\u306E\u8AAD\u307F\u8FBC\u307F\u306B\u5931\u6557\u3057\u307E\u3057\u305F");
  }
}
async function loadTodayExecutions(dateString) {
  var _a;
  try {
    const logDataPath = this.plugin.pathManager.getLogDataPath();
    const [year, month] = dateString.split("-");
    const monthString = `${year}-${month}`;
    const logPath = `${logDataPath}/${monthString}-tasks.json`;
    const logFile = this.app.vault.getAbstractFileByPath(logPath);
    if (!logFile) {
      return [];
    }
    const content = await this.app.vault.read(logFile);
    const monthlyLog = JSON.parse(content);
    const dayExecutions = ((_a = monthlyLog.taskExecutions) == null ? void 0 : _a[dateString]) || [];
    return dayExecutions.map((exec) => ({
      taskTitle: exec.taskTitle || exec.taskName,
      taskPath: exec.taskPath || "",
      startTime: exec.startTime,
      stopTime: exec.stopTime,
      slotKey: exec.slotKey || calculateSlotKeyFromTime(exec.startTime),
      instanceId: exec.instanceId
    }));
  } catch (error) {
    console.error("Failed to load today executions:", error);
    return [];
  }
}
function calculateSlotKeyFromTime(timeStr) {
  if (!timeStr) return "none";
  const [hourStr] = timeStr.split(":");
  const hour = parseInt(hourStr, 10);
  if (hour >= 0 && hour < 8) return "0:00-8:00";
  if (hour >= 8 && hour < 12) return "8:00-12:00";
  if (hour >= 12 && hour < 16) return "12:00-16:00";
  if (hour >= 16 && hour < 24) return "16:00-0:00";
  return "none";
}
async function createTaskFromExecutions(executions, file, dateString) {
  var _a;
  const metadata = file ? (_a = this.app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter : null;
  let projectPath = null;
  let projectTitle = null;
  if (metadata == null ? void 0 : metadata.project_path) {
    projectPath = metadata.project_path;
    projectTitle = extractProjectTitle(metadata.project);
  } else if (metadata == null ? void 0 : metadata.project) {
    projectTitle = extractProjectTitle(metadata.project);
    console.log(`[TaskChute Debug] Extracted project title: "${projectTitle}" from "${metadata.project}"`);
    if (projectTitle) {
      const allFiles = this.app.vault.getMarkdownFiles();
      const projectFile = allFiles.find((f) => f.basename === projectTitle);
      if (projectFile) {
        projectPath = projectFile.path;
        console.log(`[TaskChute Debug] Found project file at: ${projectPath}`);
      } else {
        console.log(`[TaskChute Debug] Project file not found for: ${projectTitle}`);
      }
    }
  }
  const taskData = {
    file: file || null,
    frontmatter: metadata || {},
    path: (file == null ? void 0 : file.path) || `TaskChute/Task/${executions[0].taskTitle}.md`,
    name: executions[0].taskTitle,
    title: executions[0].taskTitle,
    project: metadata == null ? void 0 : metadata.project,
    projectPath,
    projectTitle,
    isRoutine: (metadata == null ? void 0 : metadata.isRoutine) === true || false,
    routineType: metadata == null ? void 0 : metadata.routine_type,
    scheduledTime: metadata == null ? void 0 : metadata.\u958B\u59CB\u6642\u523B,
    isVirtual: !file
  };
  this.tasks.push(taskData);
  for (const exec of executions) {
    const instance = {
      task: taskData,
      instanceId: exec.instanceId || this.generateInstanceId(taskData.path),
      state: "done",
      slotKey: exec.slotKey,
      date: dateString,
      startTime: parseTimeString(exec.startTime, dateString),
      stopTime: parseTimeString(exec.stopTime, dateString),
      executedTitle: exec.taskTitle
    };
    const isDeleted = isInstanceDeleted.call(this, instance.instanceId, taskData.path, dateString);
    const isHidden = isInstanceHidden.call(this, instance.instanceId, taskData.path, dateString);
    if (!isDeleted && !isHidden) {
      this.taskInstances.push(instance);
    }
  }
}
async function createNonRoutineTask(file, content, metadata, dateString) {
  let projectPath = null;
  let projectTitle = null;
  if (metadata == null ? void 0 : metadata.project_path) {
    projectPath = metadata.project_path;
    projectTitle = extractProjectTitle(metadata.project);
  } else if (metadata == null ? void 0 : metadata.project) {
    projectTitle = extractProjectTitle(metadata.project);
    console.log(`[TaskChute Debug] Extracted project title: "${projectTitle}" from "${metadata.project}"`);
    if (projectTitle) {
      const allFiles = this.app.vault.getMarkdownFiles();
      const projectFile = allFiles.find((f) => f.basename === projectTitle);
      if (projectFile) {
        projectPath = projectFile.path;
        console.log(`[TaskChute Debug] Found project file at: ${projectPath}`);
      } else {
        console.log(`[TaskChute Debug] Project file not found for: ${projectTitle}`);
      }
    }
  }
  const taskData = {
    file,
    frontmatter: metadata || {},
    path: file.path,
    name: file.basename,
    title: file.basename,
    project: metadata == null ? void 0 : metadata.project,
    projectPath,
    projectTitle,
    isRoutine: false,
    scheduledTime: metadata == null ? void 0 : metadata.\u958B\u59CB\u6642\u523B
  };
  this.tasks.push(taskData);
  const instance = {
    task: taskData,
    instanceId: this.generateInstanceId(taskData.path),
    state: "idle",
    slotKey: getScheduledSlotKey(metadata == null ? void 0 : metadata.\u958B\u59CB\u6642\u523B) || "none",
    date: dateString
  };
  const deletedKey = `taskchute-deleted-instances-${dateString}`;
  const deletedInstances = JSON.parse(localStorage.getItem(deletedKey) || "[]");
  const isDeleted = deletedInstances.some(
    (d) => d.path === file.path
  );
  if (!isDeleted) {
    this.taskInstances.push(instance);
  }
}
async function createRoutineTask(file, content, metadata, dateString) {
  let projectPath = null;
  let projectTitle = null;
  if (metadata == null ? void 0 : metadata.project_path) {
    projectPath = metadata.project_path;
    projectTitle = extractProjectTitle(metadata.project);
  } else if (metadata == null ? void 0 : metadata.project) {
    projectTitle = extractProjectTitle(metadata.project);
    console.log(`[TaskChute Debug] Extracted project title: "${projectTitle}" from "${metadata.project}"`);
    if (projectTitle) {
      const allFiles = this.app.vault.getMarkdownFiles();
      const projectFile = allFiles.find((f) => f.basename === projectTitle);
      if (projectFile) {
        projectPath = projectFile.path;
        console.log(`[TaskChute Debug] Found project file at: ${projectPath}`);
      } else {
        console.log(`[TaskChute Debug] Project file not found for: ${projectTitle}`);
      }
    }
  }
  const taskData = {
    file,
    frontmatter: metadata || {},
    path: file.path,
    name: file.basename,
    title: file.basename,
    project: metadata == null ? void 0 : metadata.project,
    projectPath,
    projectTitle,
    isRoutine: true,
    routineType: (metadata == null ? void 0 : metadata.routine_type) || "daily",
    scheduledTime: metadata == null ? void 0 : metadata.\u958B\u59CB\u6642\u523B,
    weekday: metadata == null ? void 0 : metadata.weekday,
    weekdays: metadata == null ? void 0 : metadata.weekdays,
    monthlyWeek: metadata == null ? void 0 : metadata.monthly_week,
    monthlyWeekday: metadata == null ? void 0 : metadata.monthly_weekday
  };
  this.tasks.push(taskData);
  const instance = {
    task: taskData,
    instanceId: this.generateInstanceId(taskData.path),
    state: "idle",
    slotKey: getScheduledSlotKey(metadata == null ? void 0 : metadata.\u958B\u59CB\u6642\u523B) || "none",
    date: dateString
  };
  const hiddenKey = `taskchute-hidden-routines-${dateString}`;
  const hiddenRoutines = JSON.parse(localStorage.getItem(hiddenKey) || "[]");
  const isHidden = hiddenRoutines.some(
    (h) => typeof h === "string" ? h === file.path : h.path === file.path
  );
  const deletedKey = `taskchute-deleted-instances-${dateString}`;
  const deletedInstances = JSON.parse(localStorage.getItem(deletedKey) || "[]");
  const isDeleted = deletedInstances.some(
    (d) => d.path === file.path && (!d.instanceId || d.instanceId === instance.instanceId)
  );
  if (!isHidden && !isDeleted) {
    this.taskInstances.push(instance);
  }
}
function shouldShowRoutineTask(metadata, date) {
  if (!metadata) return false;
  const routineType = metadata.routine_type || "daily";
  const dayOfWeek = date.getDay();
  switch (routineType) {
    case "daily":
      return true;
    case "weekdays":
      return dayOfWeek >= 1 && dayOfWeek <= 5;
    // Monday to Friday
    case "weekends":
      return dayOfWeek === 0 || dayOfWeek === 6;
    // Saturday and Sunday
    case "weekly":
    case "custom":
      if (metadata.weekday !== void 0) {
        return dayOfWeek === metadata.weekday;
      }
      if (metadata.weekdays && Array.isArray(metadata.weekdays)) {
        return metadata.weekdays.includes(dayOfWeek);
      }
      return false;
    case "monthly":
      if (metadata.monthly_week !== void 0 && metadata.monthly_weekday !== void 0) {
        const weekOfMonth = Math.floor((date.getDate() - 1) / 7);
        return weekOfMonth === metadata.monthly_week && dayOfWeek === metadata.monthly_weekday;
      }
      return false;
    default:
      return true;
  }
}
function extractProjectTitle(projectField) {
  if (!projectField) return void 0;
  const match = projectField.match(/\[\[([^\]]+)\]\]/);
  if (match) {
    return match[1];
  }
  return projectField;
}
function parseTimeString(timeStr, dateStr) {
  if (!timeStr) return void 0;
  const [hours, minutes, seconds] = timeStr.split(":").map(Number);
  const [year, month, day] = dateStr.split("-").map(Number);
  return new Date(year, month - 1, day, hours, minutes, seconds || 0);
}
function getScheduledSlotKey(scheduledTime) {
  if (!scheduledTime) return void 0;
  const [hourStr] = scheduledTime.split(":");
  const hour = parseInt(hourStr, 10);
  if (hour >= 0 && hour < 8) return "0:00-8:00";
  if (hour >= 8 && hour < 12) return "8:00-12:00";
  if (hour >= 12 && hour < 16) return "12:00-16:00";
  if (hour >= 16 && hour < 24) return "16:00-0:00";
  return void 0;
}
function isInstanceDeleted(instanceId, path, dateString) {
  const deletedKey = `taskchute-deleted-instances-${dateString}`;
  const deletedInstances = JSON.parse(localStorage.getItem(deletedKey) || "[]");
  return deletedInstances.some(
    (d) => d.instanceId === instanceId || d.path === path && !d.instanceId
  );
}
function isInstanceHidden(instanceId, path, dateString) {
  const hiddenKey = `taskchute-hidden-routines-${dateString}`;
  const hiddenRoutines = JSON.parse(localStorage.getItem(hiddenKey) || "[]");
  return hiddenRoutines.some(
    (h) => typeof h === "string" ? h === path : h.instanceId === instanceId || h.path === path
  );
}
async function shouldShowNonRoutineTask(file, metadata, dateString) {
  const deletedKey = `taskchute-deleted-instances-${dateString}`;
  const deletedInstances = JSON.parse(localStorage.getItem(deletedKey) || "[]");
  const isDeleted = deletedInstances.some(
    (d) => d.path === file.path
  );
  console.log(`[TaskChute Debug] shouldShowNonRoutineTask: file=${file.path}, dateString=${dateString}, isDeleted=${isDeleted}, deletedInstances=`, deletedInstances);
  if (isDeleted) {
    return false;
  }
  if ((metadata == null ? void 0 : metadata.target_date) && metadata.target_date === dateString) {
    return true;
  }
  try {
    const stats = await this.app.vault.adapter.stat(file.path);
    if (!stats) {
      return false;
    }
    const fileCreationDate = new Date(stats.ctime || stats.mtime);
    const year = fileCreationDate.getFullYear();
    const month = (fileCreationDate.getMonth() + 1).toString().padStart(2, "0");
    const day = fileCreationDate.getDate().toString().padStart(2, "0");
    const fileCreationDateString = `${year}-${month}-${day}`;
    console.log(`[TaskChute Debug] File creation date: ${fileCreationDateString}, today: ${dateString}`);
    if (dateString === fileCreationDateString) {
      return true;
    }
  } catch (error) {
    console.log(`[TaskChute Debug] Error checking file stats:`, error);
    return false;
  }
  return false;
}

// src/views/TaskChuteView.ts
var NavigationStateManager = class {
  constructor() {
    this.selectedSection = null;
    this.isOpen = false;
  }
};
var TaskChuteView = class extends import_obsidian3.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.tasks = [];
    this.taskInstances = [];
    this.currentInstance = null;
    this.globalTimerInterval = null;
    this.logView = null;
    this.selectedTaskInstance = null;
    this.autocompleteInstances = [];
    // Boundary Check (idle-task-auto-move feature)
    this.boundaryCheckTimeout = null;
    // Debounce Timer
    this.renderDebounceTimer = null;
    // Task Name Validator
    this.TaskNameValidator = {
      INVALID_CHARS_PATTERN: /[:|\/\\#^]/g,
      validate(taskName) {
        const invalidChars = taskName.match(this.INVALID_CHARS_PATTERN);
        return {
          isValid: !invalidChars,
          invalidChars: invalidChars ? [...new Set(invalidChars)] : []
        };
      },
      getErrorMessage(invalidChars) {
        return `\u4F7F\u7528\u3067\u304D\u306A\u3044\u6587\u5B57\u304C\u542B\u307E\u308C\u3066\u3044\u307E\u3059: ${invalidChars.join(", ")}`;
      }
    };
    this.plugin = plugin;
    const today = /* @__PURE__ */ new Date();
    this.currentDate = new Date(
      today.getFullYear(),
      today.getMonth(),
      today.getDate()
    );
    this.useOrderBasedSort = localStorage.getItem("taskchute-use-order-sort") !== "false";
    this.navigationState = new NavigationStateManager();
  }
  getViewType() {
    return "taskchute-view";
  }
  getDisplayText() {
    return "TaskChute";
  }
  getIcon() {
    return "checkmark";
  }
  // ===========================================
  // Core Lifecycle Methods
  // ===========================================
  async onOpen() {
    const container = this.containerEl.children[1];
    container.empty();
    this.scheduleBoundaryCheck();
    await this.setupUI(container);
    await this.loadTasks();
    this.applyStyles();
    this.setupResizeObserver();
    this.initializeNavigationEventListeners();
    this.setupEventListeners();
  }
  async onClose() {
    this.cleanupAutocompleteInstances();
    this.cleanupTimers();
  }
  // ===========================================
  // UI Setup Methods
  // ===========================================
  async setupUI(container) {
    const topBarContainer = container.createEl("div", {
      cls: "top-bar-container"
    });
    this.createDrawerToggle(topBarContainer);
    this.createDateNavigation(topBarContainer);
    this.createActionButtons(topBarContainer);
    const mainContainer = container.createEl("div", {
      cls: "taskchute-container"
    });
    const contentContainer = mainContainer.createEl("div", {
      cls: "main-container"
    });
    this.createNavigationUI(contentContainer);
    const taskListContainer = contentContainer.createEl("div", {
      cls: "task-list-container"
    });
    this.taskList = taskListContainer.createEl("div", { cls: "task-list" });
  }
  createDrawerToggle(topBarContainer) {
    const drawerToggle = topBarContainer.createEl("button", {
      cls: "drawer-toggle",
      attr: { title: "\u30CA\u30D3\u30B2\u30FC\u30B7\u30E7\u30F3\u3092\u958B\u304F" }
    });
    drawerToggle.createEl("span", {
      cls: "drawer-toggle-icon",
      text: "\u2630"
    });
  }
  createDateNavigation(topBarContainer) {
    const navContainer = topBarContainer.createEl("div", {
      cls: "date-nav-container compact"
    });
    const leftBtn = navContainer.createEl("button", {
      cls: "date-nav-arrow",
      text: "<"
    });
    const calendarBtn = navContainer.createEl("button", {
      cls: "calendar-btn",
      text: "\u{1F5D3}\uFE0F",
      attr: { title: "\u30AB\u30EC\u30F3\u30C0\u30FC\u3092\u958B\u304F" },
      style: "font-size:18px;padding:0 6px;background:none;border:none;cursor:pointer;"
    });
    const dateLabel = navContainer.createEl("span", { cls: "date-nav-label" });
    const rightBtn = navContainer.createEl("button", {
      cls: "date-nav-arrow",
      text: ">"
    });
    this.updateDateLabel(dateLabel);
    leftBtn.addEventListener("click", async () => {
      this.currentDate.setDate(this.currentDate.getDate() - 1);
      this.updateDateLabel(dateLabel);
      await this.loadTasks();
    });
    rightBtn.addEventListener("click", async () => {
      this.currentDate.setDate(this.currentDate.getDate() + 1);
      this.updateDateLabel(dateLabel);
      await this.loadTasks();
    });
    this.setupCalendarButton(calendarBtn, dateLabel);
    topBarContainer.createEl("div", {
      cls: "header-divider"
    });
  }
  createActionButtons(topBarContainer) {
    const actionSection = topBarContainer.createEl("div", {
      cls: "header-action-section"
    });
    const addTaskButton = actionSection.createEl("button", {
      cls: "add-task-button repositioned",
      text: "+",
      attr: { title: "\u65B0\u3057\u3044\u30BF\u30B9\u30AF\u3092\u8FFD\u52A0" }
    });
    const robotButton = actionSection.createEl("button", {
      cls: "robot-terminal-button",
      text: "\u{1F916}",
      attr: { title: "\u30BF\u30FC\u30DF\u30CA\u30EB\u3092\u958B\u304F" }
    });
    addTaskButton.addEventListener("click", () => this.showAddTaskModal());
    robotButton.addEventListener("click", async () => {
      try {
        await this.app.commands.executeCommandById(
          "terminal:open-terminal.integrated.root"
        );
      } catch (error) {
        new import_obsidian3.Notice("\u30BF\u30FC\u30DF\u30CA\u30EB\u3092\u958B\u3051\u307E\u305B\u3093\u3067\u3057\u305F: " + error.message);
      }
    });
  }
  createNavigationUI(contentContainer) {
    this.navigationOverlay = contentContainer.createEl("div", {
      cls: "navigation-overlay navigation-overlay-hidden"
    });
    this.navigationPanel = contentContainer.createEl("div", {
      cls: "navigation-panel navigation-panel-hidden"
    });
    const navMenu = this.navigationPanel.createEl("nav", {
      cls: "navigation-nav"
    });
    const navigationItems = [
      { key: "routine", label: "\u30EB\u30FC\u30C1\u30F3", icon: "\u{1F504}" },
      { key: "review", label: "\u30EC\u30D3\u30E5\u30FC", icon: "\u{1F4CB}" },
      { key: "log", label: "\u30ED\u30B0", icon: "\u{1F4CA}" },
      { key: "project", label: "\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8", icon: "\u{1F4C1}" }
    ];
    navigationItems.forEach((item) => {
      const navItem = navMenu.createEl("div", {
        cls: "navigation-nav-item",
        attr: { "data-section": item.key }
      });
      navItem.createEl("span", {
        cls: "navigation-nav-icon",
        text: item.icon
      });
      navItem.createEl("span", {
        cls: "navigation-nav-label",
        text: item.label
      });
      navItem.addEventListener("click", () => {
        this.handleNavigationItemClick(item.key);
      });
    });
  }
  // ===========================================
  // Date Management Methods
  // ===========================================
  updateDateLabel(label) {
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    const current = new Date(this.currentDate);
    current.setHours(0, 0, 0, 0);
    const isToday = current.getTime() === today.getTime();
    const dayName = current.toLocaleDateString("ja-JP", { weekday: "short" });
    const dateStr = `${this.currentDate.getMonth() + 1}/${this.currentDate.getDate()}`;
    label.textContent = isToday ? `\u4ECA\u65E5 (${dayName} ${dateStr})` : `${dayName} ${dateStr}`;
  }
  getCurrentDateString() {
    const y = this.currentDate.getFullYear();
    const m = (this.currentDate.getMonth() + 1).toString().padStart(2, "0");
    const d = this.currentDate.getDate().toString().padStart(2, "0");
    return `${y}-${m}-${d}`;
  }
  setupCalendarButton(calendarBtn, dateLabel) {
    calendarBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      const oldInput = document.getElementById("calendar-date-input");
      if (oldInput) oldInput.remove();
      const input = document.createElement("input");
      input.type = "date";
      input.id = "calendar-date-input";
      input.classList.add("taskchute-input-absolute");
      input.style.left = `${calendarBtn.getBoundingClientRect().left}px`;
      input.style.top = `${calendarBtn.getBoundingClientRect().top - 900}px`;
      input.style.zIndex = "10000";
      const y = this.currentDate.getFullYear();
      const m = (this.currentDate.getMonth() + 1).toString().padStart(2, "0");
      const d = this.currentDate.getDate().toString().padStart(2, "0");
      input.value = `${y}-${m}-${d}`;
      document.body.appendChild(input);
      setTimeout(() => {
        try {
          input.focus();
          input.click();
          if (input.showPicker && typeof input.showPicker === "function") {
            input.showPicker();
          } else {
            const mouseEvent = new MouseEvent("mousedown", {
              view: window,
              bubbles: true,
              cancelable: true
            });
            input.dispatchEvent(mouseEvent);
          }
        } catch (e2) {
        }
      }, 50);
      input.addEventListener("change", async () => {
        const [yy, mm, dd] = input.value.split("-").map(Number);
        this.currentDate = new Date(yy, mm - 1, dd);
        this.updateDateLabel(dateLabel);
        await this.loadTasks();
        input.remove();
      });
      input.addEventListener("blur", () => input.remove());
    });
  }
  // ===========================================
  // Task Loading and Rendering Methods
  // ===========================================
  async loadTasks() {
    await loadTasksRefactored.call(this);
  }
  async processTaskFile(file) {
    var _a;
    try {
      const content = await this.app.vault.read(file);
      const frontmatter = (_a = this.app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if (!content.includes("#task") && !(frontmatter == null ? void 0 : frontmatter.estimatedMinutes)) {
        return;
      }
      const taskData = {
        file,
        frontmatter: frontmatter || {},
        path: file.path,
        name: file.basename,
        project: frontmatter == null ? void 0 : frontmatter.project,
        isRoutine: (frontmatter == null ? void 0 : frontmatter.isRoutine) || content.includes("#routine"),
        routine_type: frontmatter == null ? void 0 : frontmatter.routine_type,
        routine_start: frontmatter == null ? void 0 : frontmatter.routine_start,
        routine_end: frontmatter == null ? void 0 : frontmatter.routine_end,
        routine_week: frontmatter == null ? void 0 : frontmatter.routine_week,
        routine_day: frontmatter == null ? void 0 : frontmatter.routine_day,
        flexible_schedule: frontmatter == null ? void 0 : frontmatter.flexible_schedule
      };
      this.tasks.push(taskData);
    } catch (error) {
      console.error(`Failed to process task file ${file.path}:`, error);
    }
  }
  async loadTaskInstances() {
    const dateStr = this.getCurrentDateString();
    for (const task of this.tasks) {
      if (!this.shouldShowTaskForDate(task, this.currentDate)) {
        continue;
      }
      const instance = {
        task,
        instanceId: this.generateInstanceId(task, dateStr),
        state: "idle",
        slotKey: this.getTaskSlotKey(task),
        date: dateStr
      };
      if (this.isInstanceDeleted(instance.instanceId, task.path, dateStr) || this.isInstanceHidden(instance.instanceId, task.path, dateStr)) {
        continue;
      }
      this.loadInstanceState(instance, dateStr);
      this.taskInstances.push(instance);
    }
  }
  shouldShowTaskForDate(task, date) {
    if (!task.isRoutine) {
      return true;
    }
    const dayOfWeek = date.getDay();
    switch (task.routine_type) {
      case "daily":
        return true;
      case "weekdays":
        return dayOfWeek >= 1 && dayOfWeek <= 5;
      // Monday to Friday
      case "weekends":
        return dayOfWeek === 0 || dayOfWeek === 6;
      // Saturday and Sunday
      case "weekly":
        return true;
      // Simplified for now
      case "monthly":
        return true;
      // Simplified for now
      default:
        return true;
    }
  }
  generateInstanceId(task, dateStr) {
    return `${task.path}_${dateStr}_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
  }
  getTaskSlotKey(task) {
    const storedSlot = localStorage.getItem(`taskchute-slotkey-${task.path}`);
    if (storedSlot) {
      return storedSlot;
    }
    return "none";
  }
  loadInstanceState(instance, dateStr) {
    const stateKey = `taskchute-instance-state-${instance.instanceId}`;
    const savedState = localStorage.getItem(stateKey);
    if (savedState) {
      try {
        const parsed = JSON.parse(savedState);
        instance.state = parsed.state || "idle";
        instance.startTime = parsed.startTime ? new Date(parsed.startTime) : void 0;
        instance.stopTime = parsed.stopTime ? new Date(parsed.stopTime) : void 0;
        instance.pausedDuration = parsed.pausedDuration || 0;
        instance.actualMinutes = parsed.actualMinutes;
        instance.comment = parsed.comment;
        instance.focusLevel = parsed.focusLevel;
        instance.energyLevel = parsed.energyLevel;
      } catch (error) {
        console.error("Failed to parse instance state:", error);
      }
    }
  }
  // ===========================================
  // Task Rendering Methods
  // ===========================================
  renderTaskList() {
    const scrollTop = this.taskList.scrollTop;
    const scrollLeft = this.taskList.scrollLeft;
    this.applyResponsiveClasses();
    this.sortTaskInstancesByTimeOrder();
    this.taskList.empty();
    const timeSlots = {};
    this.getTimeSlotKeys().forEach((slot) => {
      timeSlots[slot] = [];
    });
    let noTimeInstances = [];
    this.taskInstances.forEach((inst) => {
      if (inst.slotKey && inst.slotKey !== "none") {
        if (!timeSlots[inst.slotKey]) {
          timeSlots[inst.slotKey] = [];
        }
        timeSlots[inst.slotKey].push(inst);
      } else {
        noTimeInstances.push(inst);
      }
    });
    this.renderNoTimeGroup(noTimeInstances);
    this.getTimeSlotKeys().forEach((slot) => {
      const instancesInSlot = timeSlots[slot];
      this.renderTimeSlotGroup(slot, instancesInSlot);
    });
    this.taskList.scrollTop = scrollTop;
    this.taskList.scrollLeft = scrollLeft;
    this.updateTotalTasksCount();
  }
  renderNoTimeGroup(instances) {
    const noTimeHeader = this.taskList.createEl("div", {
      cls: "time-slot-header other",
      text: "\u6642\u9593\u6307\u5B9A\u306A\u3057"
    });
    this.setupTimeSlotDragHandlers(noTimeHeader, "none");
    instances.forEach((inst, idx) => {
      this.createTaskInstanceItem(inst, "none", idx);
    });
  }
  renderTimeSlotGroup(slot, instances) {
    const timeSlotHeader = this.taskList.createEl("div", {
      cls: "time-slot-header",
      text: slot
    });
    this.setupTimeSlotDragHandlers(timeSlotHeader, slot);
    instances.forEach((inst, idx) => {
      this.createTaskInstanceItem(inst, slot, idx);
    });
  }
  createTaskInstanceItem(inst, slot, idx) {
    const taskItem = this.taskList.createEl("div", { cls: "task-item" });
    if (inst.task.path) {
      taskItem.setAttribute("data-task-path", inst.task.path);
    }
    taskItem.setAttribute("data-slot", slot || "none");
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    const viewDate = new Date(this.currentDate);
    viewDate.setHours(0, 0, 0, 0);
    const isFutureTask = viewDate > today;
    if (this.currentInstance === inst && inst.state === "running") {
      taskItem.classList.add("selected");
    }
    if (inst.state === "done") {
      taskItem.classList.add("completed");
    }
    this.createDragHandle(taskItem, inst, slot, idx);
    this.createPlayStopButton(taskItem, inst, isFutureTask);
    this.createTaskName(taskItem, inst);
    this.createProjectDisplay(taskItem, inst);
    this.createTimeRangeDisplay(taskItem, inst);
    this.createDurationTimerDisplay(taskItem, inst);
    this.createCommentButton(taskItem, inst);
    this.createRoutineButton(taskItem, inst);
    this.createSettingsButton(taskItem, inst);
    this.setupTaskItemEventListeners(taskItem, inst);
  }
  createDragHandle(taskItem, inst, slot, idx) {
    const isDraggable = inst.state !== "done";
    const dragHandle = taskItem.createEl("div", {
      cls: "drag-handle",
      attr: isDraggable ? { draggable: "true", title: "\u30C9\u30E9\u30C3\u30B0\u3057\u3066\u79FB\u52D5" } : { title: "\u5B8C\u4E86\u6E08\u307F\u30BF\u30B9\u30AF" }
    });
    if (!isDraggable) {
      dragHandle.classList.add("disabled");
    }
    const svg = dragHandle.createSvg("svg", {
      attr: {
        width: "10",
        height: "16",
        viewBox: "0 0 10 16",
        fill: "currentColor"
      }
    });
    svg.createSvg("circle", { attr: { cx: "2", cy: "2", r: "1.5" } });
    svg.createSvg("circle", { attr: { cx: "8", cy: "2", r: "1.5" } });
    svg.createSvg("circle", { attr: { cx: "2", cy: "8", r: "1.5" } });
    svg.createSvg("circle", { attr: { cx: "8", cy: "8", r: "1.5" } });
    svg.createSvg("circle", { attr: { cx: "2", cy: "14", r: "1.5" } });
    svg.createSvg("circle", { attr: { cx: "8", cy: "14", r: "1.5" } });
    if (isDraggable) {
      this.setupDragEvents(dragHandle, taskItem, slot, idx);
    }
    dragHandle.addEventListener("click", (e) => {
      e.stopPropagation();
      this.selectTaskForKeyboard(inst, taskItem);
    });
  }
  createPlayStopButton(taskItem, inst, isFutureTask) {
    let btnCls = "play-stop-button";
    let btnText = "\u25B6\uFE0F";
    let btnTitle = "\u30B9\u30BF\u30FC\u30C8";
    if (isFutureTask) {
      btnCls += " future-task-button";
      btnText = "\u2014";
      btnTitle = "\u672A\u6765\u306E\u30BF\u30B9\u30AF\u306F\u5B9F\u884C\u3067\u304D\u307E\u305B\u3093";
    } else if (inst.state === "running") {
      btnCls += " stop";
      btnText = "\u23F9";
      btnTitle = "\u30B9\u30C8\u30C3\u30D7";
    } else if (inst.state === "done") {
      btnText = "\u2611\uFE0F";
      btnTitle = "\u5B8C\u4E86\u30BF\u30B9\u30AF\u3092\u518D\u8A08\u6E2C";
    }
    const playButton = taskItem.createEl("button", {
      cls: btnCls,
      text: btnText,
      attr: { title: btnTitle }
    });
    if (isFutureTask) {
      playButton.disabled = true;
    }
    playButton.addEventListener("click", async (e) => {
      e.stopPropagation();
      if (isFutureTask) {
        new import_obsidian3.Notice("\u672A\u6765\u306E\u30BF\u30B9\u30AF\u306F\u5B9F\u884C\u3067\u304D\u307E\u305B\u3093\u3002", 2e3);
        return;
      }
      if (inst.state === "running") {
        await this.stopInstance(inst);
      } else if (inst.state === "idle") {
        await this.startInstance(inst);
      } else if (inst.state === "done") {
        await this.duplicateAndStartInstance(inst);
      }
    });
  }
  createTaskName(taskItem, inst) {
    const taskName = taskItem.createEl("span", {
      cls: "task-name",
      text: inst.task.name
    });
    if (inst.state === "done") {
      taskName.style.opacity = "0.6";
      taskName.style.color = "var(--text-muted)";
    } else {
      taskName.style.color = "var(--text-accent)";
    }
    taskName.addEventListener("click", async (e) => {
      e.stopPropagation();
      try {
        await this.app.workspace.openLinkText(inst.task.path, "", false);
      } catch (error) {
        new import_obsidian3.Notice("\u30BF\u30B9\u30AF\u30D5\u30A1\u30A4\u30EB\u3092\u958B\u3051\u307E\u305B\u3093\u3067\u3057\u305F");
      }
    });
  }
  createProjectDisplay(taskItem, inst) {
    const projectDisplay = taskItem.createEl("span", {
      cls: "taskchute-project-display"
    });
    if (inst.task.projectPath && inst.task.projectTitle) {
      const projectButton = projectDisplay.createEl("span", {
        cls: "taskchute-project-button",
        attr: {
          title: `\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8: ${inst.task.projectTitle}`
        }
      });
      const folderIcon = projectButton.createEl("span", {
        cls: "taskchute-project-icon",
        text: "\u{1F4C1}"
      });
      const projectName = projectButton.createEl("span", {
        cls: "taskchute-project-name",
        text: inst.task.projectTitle.replace(/^Project\s*-\s*/, "")
      });
      projectButton.addEventListener("click", async (e) => {
        e.stopPropagation();
        await this.showUnifiedProjectModal(inst);
      });
      const externalLinkIcon = projectDisplay.createEl("span", {
        cls: "taskchute-external-link",
        text: "\u{1F517}",
        attr: { title: "\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u30CE\u30FC\u30C8\u3092\u958B\u304F" }
      });
      externalLinkIcon.addEventListener("click", async (e) => {
        e.stopPropagation();
        await this.openProjectInSplit(inst.task.projectPath);
      });
    } else {
      const projectPlaceholder = projectDisplay.createEl("span", {
        cls: "taskchute-project-placeholder",
        attr: { title: "\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u3092\u8A2D\u5B9A" }
      });
      projectPlaceholder.addEventListener("click", async (e) => {
        e.stopPropagation();
        await this.showProjectModal(inst);
      });
    }
  }
  createTimeRangeDisplay(taskItem, inst) {
    const timeRangeEl = taskItem.createEl("span", {
      cls: "task-time-range"
    });
    const formatTime = (date) => date ? date.toLocaleTimeString("ja-JP", {
      hour: "2-digit",
      minute: "2-digit"
    }) : "";
    if (inst.state === "running" && inst.startTime) {
      timeRangeEl.textContent = `${formatTime(inst.startTime)} \u2192`;
    } else if (inst.state === "done" && inst.startTime && inst.stopTime) {
      timeRangeEl.textContent = `${formatTime(inst.startTime)} \u2192 ${formatTime(inst.stopTime)}`;
    } else {
      timeRangeEl.textContent = "";
    }
  }
  createDurationTimerDisplay(taskItem, inst) {
    if (inst.state === "done" && inst.startTime && inst.stopTime) {
      const durationEl = taskItem.createEl("span", {
        cls: "task-duration"
      });
      const duration = this.calculateCrossDayDuration(inst.startTime, inst.stopTime);
      const hours = Math.floor(duration / 36e5);
      const minutes = Math.floor(duration % 36e5 / 6e4) % 60;
      const durationStr = `${hours.toString().padStart(2, "0")}:${minutes.toString().padStart(2, "0")}`;
      durationEl.textContent = durationStr;
      if (inst.startTime.getDate() !== inst.stopTime.getDate()) {
        durationEl.setAttribute("title", "\u65E5\u3092\u8DE8\u3044\u3060\u30BF\u30B9\u30AF");
      }
    } else if (inst.state === "running") {
      const timerEl = taskItem.createEl("span", {
        cls: "task-timer-display"
      });
      this.updateTimerDisplay(timerEl, inst);
    } else {
      taskItem.createEl("span", {
        cls: "task-duration-placeholder"
      });
    }
  }
  createCommentButton(taskItem, inst) {
    const commentButton = taskItem.createEl("button", {
      cls: "comment-button",
      text: "\u{1F4AC}",
      attr: {
        "data-task-state": inst.state
      }
    });
    if (inst.state !== "done") {
      commentButton.classList.add("disabled");
      commentButton.setAttribute("disabled", "true");
    }
    commentButton.addEventListener("click", async (e) => {
      e.stopPropagation();
      if (inst.state !== "done") {
        return;
      }
      await this.showTaskCompletionModal(inst);
    });
    this.hasCommentData(inst).then((hasComment) => {
      if (hasComment) {
        commentButton.classList.add("active");
      } else {
        commentButton.classList.remove("active");
        if (inst.state === "done") {
          commentButton.classList.add("no-comment");
        }
      }
    });
  }
  createRoutineButton(taskItem, inst) {
    const routineButton = taskItem.createEl("button", {
      cls: `routine-button ${inst.task.isRoutine ? "active" : ""}`,
      text: "\u{1F504}",
      attr: {
        title: inst.task.isRoutine ? `\u30EB\u30FC\u30C1\u30F3\u30BF\u30B9\u30AF` : "\u30EB\u30FC\u30C1\u30F3\u30BF\u30B9\u30AF\u306B\u8A2D\u5B9A"
      }
    });
    routineButton.addEventListener("click", (e) => {
      e.stopPropagation();
      if (inst.task.isRoutine) {
        this.showRoutineEditModal(inst.task, routineButton);
      } else {
        this.toggleRoutine(inst.task, routineButton);
      }
    });
  }
  createSettingsButton(taskItem, inst) {
    const settingsButton = taskItem.createEl("button", {
      cls: "settings-task-button",
      text: "\u2699\uFE0F",
      attr: { title: "\u30BF\u30B9\u30AF\u8A2D\u5B9A" }
    });
    settingsButton.addEventListener("click", (e) => {
      e.stopPropagation();
      this.showTaskSettingsTooltip(inst, settingsButton);
    });
  }
  // ===========================================
  // Missing Method Placeholders
  // ===========================================
  async duplicateAndStartInstance(inst) {
    await this.duplicateInstance(inst);
  }
  async duplicateInstance(inst) {
    try {
      const newInstance = {
        ...inst,
        instanceId: this.generateInstanceId(inst.task.path),
        state: "idle",
        startTime: void 0,
        stopTime: void 0
      };
      this.taskInstances.push(newInstance);
      this.saveInstanceState(newInstance);
      this.renderTaskList();
      new import_obsidian3.Notice(`\u300C${inst.task.title}\u300D\u3092\u8907\u88FD\u3057\u307E\u3057\u305F`);
    } catch (error) {
      console.error("Failed to duplicate instance:", error);
      new import_obsidian3.Notice("\u30BF\u30B9\u30AF\u306E\u8907\u88FD\u306B\u5931\u6557\u3057\u307E\u3057\u305F");
    }
  }
  async showTaskCompletionModal(inst) {
    const existingComment = await this.getExistingTaskComment(inst);
    const modal = document.createElement("div");
    modal.className = "task-modal-overlay";
    const modalContent = modal.createEl("div", {
      cls: "task-modal-content completion-modal"
    });
    const header = modalContent.createEl("div", { cls: "modal-header" });
    const isCompleted = inst.state === "done";
    const headerText = existingComment ? `\u270F\uFE0F \u300C${inst.task.title}\u300D\u306E\u30B3\u30E1\u30F3\u30C8\u3092\u7DE8\u96C6` : `\u{1F389} \u304A\u75B2\u308C\u69D8\u3067\u3057\u305F\uFF01\u300C${inst.task.title}\u300D\u304C\u5B8C\u4E86\u3057\u307E\u3057\u305F`;
    header.createEl("h3", { text: headerText });
    const closeButton = header.createEl("button", {
      cls: "modal-close-button",
      text: "\xD7"
    });
    const form = modalContent.createEl("form", { cls: "task-form" });
    const commentGroup = form.createEl("div", { cls: "form-group" });
    commentGroup.createEl("label", { text: "\u30B3\u30E1\u30F3\u30C8:", cls: "form-label" });
    const commentInput = commentGroup.createEl("textarea", {
      cls: "form-textarea",
      placeholder: "\u30BF\u30B9\u30AF\u306E\u632F\u308A\u8FD4\u308A\u3084\u6C17\u3065\u304D\u3092\u8A18\u9332...",
      value: (existingComment == null ? void 0 : existingComment.comment) || ""
    });
    const energyGroup = form.createEl("div", { cls: "form-group slider-group" });
    energyGroup.createEl("label", { text: "\u96C6\u4E2D\u5EA6:", cls: "form-label" });
    const energyValue = energyGroup.createEl("span", {
      cls: "slider-value",
      text: (existingComment == null ? void 0 : existingComment.energy) || "5"
    });
    const energySlider = energyGroup.createEl("input", {
      type: "range",
      cls: "form-slider",
      min: "1",
      max: "10",
      value: (existingComment == null ? void 0 : existingComment.energy) || "5"
    });
    energySlider.addEventListener("input", () => {
      energyValue.textContent = energySlider.value;
    });
    const focusGroup = form.createEl("div", { cls: "form-group slider-group" });
    focusGroup.createEl("label", { text: "\u75B2\u52B4\u5EA6:", cls: "form-label" });
    const focusValue = focusGroup.createEl("span", {
      cls: "slider-value",
      text: (existingComment == null ? void 0 : existingComment.focus) || "5"
    });
    const focusSlider = focusGroup.createEl("input", {
      type: "range",
      cls: "form-slider",
      min: "1",
      max: "10",
      value: (existingComment == null ? void 0 : existingComment.focus) || "5"
    });
    focusSlider.addEventListener("input", () => {
      focusValue.textContent = focusSlider.value;
    });
    const buttonGroup = form.createEl("div", { cls: "form-button-group" });
    const cancelButton = buttonGroup.createEl("button", {
      type: "button",
      cls: "form-button cancel",
      text: "\u30AD\u30E3\u30F3\u30BB\u30EB"
    });
    const saveButton = buttonGroup.createEl("button", {
      type: "submit",
      cls: "form-button create",
      text: "\u4FDD\u5B58"
    });
    closeButton.addEventListener("click", () => {
      document.body.removeChild(modal);
    });
    cancelButton.addEventListener("click", () => {
      document.body.removeChild(modal);
    });
    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      await this.saveTaskComment(inst, {
        comment: commentInput.value,
        energy: parseInt(energySlider.value),
        focus: parseInt(focusSlider.value)
      });
      document.body.removeChild(modal);
      this.renderTaskList();
    });
    document.body.appendChild(modal);
    commentInput.focus();
  }
  async hasCommentData(inst) {
    try {
      const comment = await this.getExistingTaskComment(inst);
      return comment !== null && (comment.comment || comment.energy || comment.focus);
    } catch (error) {
      return false;
    }
  }
  async getExistingTaskComment(inst) {
    try {
      const dateStr = this.getCurrentDateString();
      const key = `taskchute-comment-${dateStr}-${inst.instanceId}`;
      const data = localStorage.getItem(key);
      return data ? JSON.parse(data) : null;
    } catch (error) {
      return null;
    }
  }
  async saveTaskComment(inst, data) {
    try {
      const dateStr = this.getCurrentDateString();
      const key = `taskchute-comment-${dateStr}-${inst.instanceId}`;
      localStorage.setItem(key, JSON.stringify(data));
      new import_obsidian3.Notice("\u30B3\u30E1\u30F3\u30C8\u3092\u4FDD\u5B58\u3057\u307E\u3057\u305F");
    } catch (error) {
      console.error("Failed to save comment:", error);
      new import_obsidian3.Notice("\u30B3\u30E1\u30F3\u30C8\u306E\u4FDD\u5B58\u306B\u5931\u6557\u3057\u307E\u3057\u305F");
    }
  }
  showRoutineEditModal(task, button) {
    const modal = document.createElement("div");
    modal.className = "task-modal-overlay";
    const modalContent = modal.createEl("div", { cls: "task-modal-content" });
    const modalHeader = modalContent.createEl("div", { cls: "modal-header" });
    modalHeader.createEl("h3", { text: `\u300C${task.title}\u300D\u306E\u30EB\u30FC\u30C1\u30F3\u8A2D\u5B9A` });
    const closeButton = modalHeader.createEl("button", {
      cls: "modal-close-button",
      text: "\xD7",
      attr: { title: "\u9589\u3058\u308B" }
    });
    const form = modalContent.createEl("form", { cls: "task-form" });
    const timeGroup = form.createEl("div", { cls: "form-group" });
    timeGroup.createEl("label", { text: "\u958B\u59CB\u4E88\u5B9A\u6642\u523B:", cls: "form-label" });
    const timeInput = timeGroup.createEl("input", {
      type: "time",
      cls: "form-input",
      value: task.scheduledTime || "09:00"
    });
    const descGroup = form.createEl("div", { cls: "form-group" });
    const descText = descGroup.createEl("p", {
      cls: "form-description",
      text: `\u6BCE\u65E5${timeInput.value}\u306B\u30EB\u30FC\u30C1\u30F3\u30BF\u30B9\u30AF\u3068\u3057\u3066\u5B9F\u884C\u4E88\u5B9A\u3067\u3059\u3002`
    });
    timeInput.addEventListener("input", () => {
      descText.textContent = `\u6BCE\u65E5${timeInput.value}\u306B\u30EB\u30FC\u30C1\u30F3\u30BF\u30B9\u30AF\u3068\u3057\u3066\u5B9F\u884C\u4E88\u5B9A\u3067\u3059\u3002`;
    });
    const buttonGroup = form.createEl("div", { cls: "form-button-group" });
    const cancelButton = buttonGroup.createEl("button", {
      type: "button",
      cls: "form-button cancel",
      text: "\u30AD\u30E3\u30F3\u30BB\u30EB"
    });
    const saveButton = buttonGroup.createEl("button", {
      type: "submit",
      cls: "form-button create",
      text: "\u4FDD\u5B58"
    });
    let removeButton = null;
    if (task.isRoutine) {
      removeButton = buttonGroup.createEl("button", {
        type: "button",
        cls: "form-button cancel",
        text: "\u30EB\u30FC\u30C1\u30F3\u3092\u5916\u3059"
      });
    }
    closeButton.addEventListener("click", () => {
      document.body.removeChild(modal);
    });
    cancelButton.addEventListener("click", () => {
      document.body.removeChild(modal);
    });
    if (removeButton) {
      removeButton.addEventListener("click", async (e) => {
        e.preventDefault();
        e.stopPropagation();
        await this.toggleRoutine(task, button);
        if (modal.parentNode) document.body.removeChild(modal);
      });
    }
    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const scheduledTime = timeInput.value;
      if (!scheduledTime) {
        new import_obsidian3.Notice("\u958B\u59CB\u6642\u523B\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044");
        return;
      }
      await this.setRoutineTask(task, button, scheduledTime);
      document.body.removeChild(modal);
    });
    document.body.appendChild(modal);
    timeInput.focus();
  }
  async toggleRoutine(task, button) {
    try {
      const taskFolderPath = this.plugin.pathManager.getTaskFolderPath();
      const filePath = `${taskFolderPath}/${task.title}.md`;
      const file = this.app.vault.getAbstractFileByPath(filePath);
      if (!file || !(file instanceof import_obsidian3.TFile)) {
        new import_obsidian3.Notice(`\u30BF\u30B9\u30AF\u30D5\u30A1\u30A4\u30EB\u300C${task.title}.md\u300D\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093`);
        return;
      }
      if (task.isRoutine) {
        await this.app.fileManager.processFrontMatter(file, (frontmatter) => {
          const y = this.currentDate.getFullYear();
          const m = (this.currentDate.getMonth() + 1).toString().padStart(2, "0");
          const d = this.currentDate.getDate().toString().padStart(2, "0");
          frontmatter.routine_end = `${y}-${m}-${d}`;
          frontmatter.isRoutine = false;
          delete frontmatter.\u958B\u59CB\u6642\u523B;
          return frontmatter;
        });
        task.isRoutine = false;
        task.scheduledTime = null;
        button.classList.remove("active");
        button.setAttribute("title", "\u30EB\u30FC\u30C1\u30F3\u30BF\u30B9\u30AF\u306B\u8A2D\u5B9A");
        await this.loadTasks();
        new import_obsidian3.Notice(`\u300C${task.title}\u300D\u3092\u30EB\u30FC\u30C1\u30F3\u30BF\u30B9\u30AF\u304B\u3089\u89E3\u9664\u3057\u307E\u3057\u305F`);
      } else {
        this.showRoutineEditModal(task, button);
      }
    } catch (error) {
      new import_obsidian3.Notice("\u30EB\u30FC\u30C1\u30F3\u30BF\u30B9\u30AF\u306E\u8A2D\u5B9A\u306B\u5931\u6557\u3057\u307E\u3057\u305F");
    }
  }
  showTaskSettingsTooltip(inst, button) {
    const existingTooltip = document.querySelector(".task-settings-tooltip");
    if (existingTooltip) {
      existingTooltip.remove();
    }
    const tooltip = document.createElement("div");
    tooltip.className = "task-settings-tooltip";
    const tooltipHeader = tooltip.createEl("div", {
      cls: "tooltip-header"
    });
    const closeButton = tooltipHeader.createEl("button", {
      cls: "tooltip-close-button",
      text: "\xD7",
      attr: { title: "\u9589\u3058\u308B" }
    });
    closeButton.addEventListener("click", (e) => {
      e.stopPropagation();
      tooltip.remove();
    });
    const resetItem = tooltip.createEl("div", {
      cls: "tooltip-item",
      text: "\u21A9\uFE0F \u672A\u5B9F\u884C\u306B\u623B\u3059"
    });
    if (inst.state === "idle") {
      resetItem.classList.add("disabled");
      resetItem.setAttribute("title", "\u3053\u306E\u30BF\u30B9\u30AF\u306F\u672A\u5B9F\u884C\u3067\u3059");
    } else {
      resetItem.setAttribute("title", "\u30BF\u30B9\u30AF\u3092\u5B9F\u884C\u524D\u306E\u72B6\u614B\u306B\u623B\u3057\u307E\u3059");
    }
    resetItem.addEventListener("click", async (e) => {
      e.stopPropagation();
      tooltip.remove();
      if (inst.state !== "idle") {
        await this.resetTaskToIdle(inst);
      }
    });
    const moveItem = tooltip.createEl("div", {
      cls: "tooltip-item",
      text: "\u{1F4C5} \u30BF\u30B9\u30AF\u3092\u79FB\u52D5"
    });
    moveItem.setAttribute("title", "\u30BF\u30B9\u30AF\u3092\u5225\u306E\u65E5\u4ED8\u306B\u79FB\u52D5\u3057\u307E\u3059");
    moveItem.addEventListener("click", (e) => {
      e.stopPropagation();
      tooltip.remove();
      this.showTaskMoveDatePicker(inst, button);
    });
    const duplicateItem = tooltip.createEl("div", {
      cls: "tooltip-item",
      text: "\u{1F4C4} \u30BF\u30B9\u30AF\u3092\u8907\u88FD"
    });
    duplicateItem.setAttribute("title", "\u540C\u3058\u30BF\u30B9\u30AF\u3092\u3059\u3050\u4E0B\u306B\u8FFD\u52A0\u3057\u307E\u3059");
    duplicateItem.addEventListener("click", async (e) => {
      e.stopPropagation();
      tooltip.remove();
      await this.duplicateInstance(inst);
    });
    const deleteItem = tooltip.createEl("div", {
      cls: "tooltip-item delete-item",
      text: "\u{1F5D1}\uFE0F \u30BF\u30B9\u30AF\u3092\u524A\u9664"
    });
    deleteItem.addEventListener("click", async (e) => {
      e.stopPropagation();
      tooltip.remove();
      const hasHistory = await this.hasExecutionHistory(inst.task.path);
      if (inst.task.isRoutine || hasHistory) {
        await this.deleteRoutineTask(inst);
      } else {
        await this.deleteNonRoutineTask(inst);
      }
    });
    const buttonRect = button.getBoundingClientRect();
    const windowHeight = window.innerHeight;
    const windowWidth = window.innerWidth;
    const tooltipHeight = 250;
    const tooltipWidth = 200;
    tooltip.style.position = "fixed";
    tooltip.style.zIndex = "10000";
    if (buttonRect.bottom + tooltipHeight > windowHeight) {
      tooltip.style.bottom = `${windowHeight - buttonRect.top + 5}px`;
      tooltip.style.top = "auto";
    } else {
      tooltip.style.top = `${buttonRect.bottom + 5}px`;
      tooltip.style.bottom = "auto";
    }
    if (buttonRect.left + tooltipWidth > windowWidth) {
      tooltip.style.right = `${windowWidth - buttonRect.right}px`;
      tooltip.style.left = "auto";
    } else {
      tooltip.style.left = `${buttonRect.left}px`;
      tooltip.style.right = "auto";
    }
    tooltip.style.minWidth = "180px";
    tooltip.style.maxWidth = "250px";
    document.body.appendChild(tooltip);
    const closeTooltip = (e) => {
      if (!tooltip.contains(e.target) && e.target !== button) {
        tooltip.remove();
        document.removeEventListener("click", closeTooltip);
      }
    };
    setTimeout(() => {
      document.addEventListener("click", closeTooltip);
    }, 100);
  }
  // ===========================================
  // Task State Management Methods
  // ===========================================
  async startInstance(inst) {
    try {
      if (this.currentInstance && this.currentInstance.state === "running") {
        await this.stopInstance(this.currentInstance);
      }
      inst.state = "running";
      inst.startTime = /* @__PURE__ */ new Date();
      this.currentInstance = inst;
      this.saveInstanceState(inst);
      this.renderTaskList();
      if (!this.globalTimerInterval) {
        this.startGlobalTimer();
      }
      new import_obsidian3.Notice(`\u958B\u59CB: ${inst.task.name}`);
    } catch (error) {
      console.error("Failed to start instance:", error);
      new import_obsidian3.Notice("\u30BF\u30B9\u30AF\u306E\u958B\u59CB\u306B\u5931\u6557\u3057\u307E\u3057\u305F");
    }
  }
  async stopInstance(inst) {
    try {
      if (inst.state !== "running") {
        return;
      }
      inst.state = "done";
      inst.stopTime = /* @__PURE__ */ new Date();
      if (inst.startTime) {
        const duration = this.calculateCrossDayDuration(inst.startTime, inst.stopTime);
        inst.actualMinutes = Math.floor(duration / (1e3 * 60));
      }
      if (this.currentInstance === inst) {
        this.currentInstance = null;
      }
      this.saveInstanceState(inst);
      await this.saveTaskLog(inst);
      this.renderTaskList();
      new import_obsidian3.Notice(`\u5B8C\u4E86: ${inst.task.name} (${inst.actualMinutes || 0}\u5206)`);
    } catch (error) {
      console.error("Failed to stop instance:", error);
      new import_obsidian3.Notice("\u30BF\u30B9\u30AF\u306E\u505C\u6B62\u306B\u5931\u6557\u3057\u307E\u3057\u305F");
    }
  }
  calculateCrossDayDuration(startTime, stopTime) {
    if (!startTime || !stopTime) return 0;
    let duration = stopTime.getTime() - startTime.getTime();
    if (duration < 0) {
      duration += 24 * 60 * 60 * 1e3;
    }
    return duration;
  }
  saveInstanceState(inst) {
    var _a, _b;
    const stateKey = `taskchute-instance-state-${inst.instanceId}`;
    const state = {
      state: inst.state,
      startTime: (_a = inst.startTime) == null ? void 0 : _a.toISOString(),
      stopTime: (_b = inst.stopTime) == null ? void 0 : _b.toISOString(),
      pausedDuration: inst.pausedDuration,
      actualMinutes: inst.actualMinutes,
      comment: inst.comment,
      focusLevel: inst.focusLevel,
      energyLevel: inst.energyLevel
    };
    try {
      localStorage.setItem(stateKey, JSON.stringify(state));
    } catch (error) {
      console.error("Failed to save instance state:", error);
    }
  }
  async saveTaskLog(inst) {
    console.log("Saving task log for:", inst.task.name);
  }
  // ===========================================
  // Timer Management Methods
  // ===========================================
  startGlobalTimer() {
    if (this.globalTimerInterval) {
      clearInterval(this.globalTimerInterval);
    }
    this.globalTimerInterval = setInterval(() => {
      this.updateAllTimers();
    }, 1e3);
  }
  updateAllTimers() {
    const runningInstances = this.taskInstances.filter((inst) => inst.state === "running");
    if (runningInstances.length === 0) {
      this.stopGlobalTimer();
      return;
    }
    runningInstances.forEach((inst) => {
      const timerEl = this.taskList.querySelector(`[data-task-path="${inst.task.path}"] .task-timer`);
      if (timerEl) {
        this.updateTimerDisplay(timerEl, inst);
      }
    });
  }
  updateTimerDisplay(timerEl, inst) {
    if (!inst.startTime) return;
    const now = /* @__PURE__ */ new Date();
    const elapsed = now.getTime() - inst.startTime.getTime();
    const minutes = Math.floor(elapsed / (1e3 * 60));
    const seconds = Math.floor(elapsed % (1e3 * 60) / 1e3);
    timerEl.textContent = `${minutes}:${seconds.toString().padStart(2, "0")}`;
  }
  stopGlobalTimer() {
    if (this.globalTimerInterval) {
      clearInterval(this.globalTimerInterval);
      this.globalTimerInterval = null;
    }
  }
  // ===========================================
  // Event Handler Methods
  // ===========================================
  setupEventListeners() {
    this.registerDomEvent(document, "keydown", (e) => {
      this.handleKeyboardShortcut(e);
    });
    this.registerDomEvent(this.containerEl, "click", (e) => {
      if (!e.target.closest(".task-item")) {
        this.clearTaskSelection();
      }
    });
    this.registerEvent(
      this.app.vault.on("rename", async (file, oldPath) => {
        await this.handleFileRename(file, oldPath);
      })
    );
  }
  setupPlayStopButton(button, inst) {
    button.addEventListener("click", async (e) => {
      e.stopPropagation();
      if (inst.state === "running") {
        await this.stopInstance(inst);
      } else if (inst.state === "idle") {
        await this.startInstance(inst);
      }
    });
  }
  setupTaskItemEventListeners(taskItem, inst) {
    taskItem.addEventListener("contextmenu", (e) => {
      e.preventDefault();
      this.showTaskContextMenu(e, inst);
    });
    this.setupTaskItemDragDrop(taskItem, inst);
  }
  setupTaskItemDragDrop(taskItem, inst) {
    taskItem.addEventListener("dragover", (e) => {
      e.preventDefault();
      this.handleDragOver(e, taskItem, inst);
    });
    taskItem.addEventListener("dragleave", () => {
      this.clearDragoverClasses(taskItem);
    });
    taskItem.addEventListener("drop", (e) => {
      e.preventDefault();
      this.handleDrop(e, taskItem, inst);
    });
  }
  setupDragEvents(dragHandle, taskItem, slot, idx) {
    dragHandle.addEventListener("dragstart", (e) => {
      e.dataTransfer.setData("text/plain", `${slot != null ? slot : "none"}::${idx}`);
      taskItem.classList.add("dragging");
    });
    dragHandle.addEventListener("dragend", () => {
      taskItem.classList.remove("dragging");
    });
  }
  setupTimeSlotDragHandlers(header, slot) {
    header.addEventListener("dragover", (e) => {
      e.preventDefault();
      header.classList.add("dragover");
    });
    header.addEventListener("dragleave", () => {
      header.classList.remove("dragover");
    });
    header.addEventListener("drop", (e) => {
      e.preventDefault();
      header.classList.remove("dragover");
      this.handleSlotDrop(e, slot);
    });
  }
  // ===========================================
  // Command Methods (for external commands)
  // ===========================================
  duplicateSelectedTask() {
    if (this.selectedTaskInstance) {
      this.duplicateTask(this.selectedTaskInstance);
    } else {
      new import_obsidian3.Notice("\u30BF\u30B9\u30AF\u304C\u9078\u629E\u3055\u308C\u3066\u3044\u307E\u305B\u3093");
    }
  }
  deleteSelectedTask() {
    if (this.selectedTaskInstance) {
      this.deleteTask(this.selectedTaskInstance);
    } else {
      new import_obsidian3.Notice("\u30BF\u30B9\u30AF\u304C\u9078\u629E\u3055\u308C\u3066\u3044\u307E\u305B\u3093");
    }
  }
  resetSelectedTask() {
    if (this.selectedTaskInstance) {
      this.resetTask(this.selectedTaskInstance);
    } else {
      new import_obsidian3.Notice("\u30BF\u30B9\u30AF\u304C\u9078\u629E\u3055\u308C\u3066\u3044\u307E\u305B\u3093");
    }
  }
  showTodayTasks() {
    const today = /* @__PURE__ */ new Date();
    this.currentDate = new Date(today.getFullYear(), today.getMonth(), today.getDate());
    this.loadTasks().then(() => {
      new import_obsidian3.Notice(`\u4ECA\u65E5\u306E\u30BF\u30B9\u30AF\u3092\u8868\u793A\u3057\u307E\u3057\u305F`);
    });
  }
  reorganizeIdleTasks() {
    this.moveIdleTasksToCurrentTime();
    new import_obsidian3.Notice("\u30A2\u30A4\u30C9\u30EB\u30BF\u30B9\u30AF\u3092\u6574\u7406\u3057\u307E\u3057\u305F");
  }
  // ===========================================
  // Utility Methods
  // ===========================================
  getTimeSlotKeys() {
    return ["0:00-8:00", "8:00-12:00", "12:00-16:00", "16:00-0:00"];
  }
  sortTaskInstancesByTimeOrder() {
    if (this.useOrderBasedSort) {
      this.taskInstances.sort((a, b) => {
        return 0;
      });
    }
  }
  applyResponsiveClasses() {
    const width = this.containerEl.clientWidth;
    const classList = this.containerEl.classList;
    classList.remove("narrow", "medium", "wide");
    if (width < 400) {
      classList.add("narrow");
    } else if (width < 600) {
      classList.add("medium");
    } else {
      classList.add("wide");
    }
  }
  setupResizeObserver() {
    const resizeObserver = new ResizeObserver(() => {
      this.applyResponsiveClasses();
    });
    resizeObserver.observe(this.containerEl);
  }
  initializeNavigationEventListeners() {
    const drawerToggle = this.containerEl.querySelector(".drawer-toggle");
    if (drawerToggle) {
      drawerToggle.addEventListener("click", () => {
        this.toggleNavigation();
      });
    }
    if (this.navigationOverlay) {
      this.navigationOverlay.addEventListener("click", () => {
        this.closeNavigation();
      });
    }
  }
  scheduleBoundaryCheck() {
    const now = /* @__PURE__ */ new Date();
    const nextHour = new Date(now);
    nextHour.setHours(nextHour.getHours() + 1, 0, 0, 0);
    const msUntilNextHour = nextHour.getTime() - now.getTime();
    this.boundaryCheckTimeout = setTimeout(() => {
      this.checkBoundaryTasks();
      this.scheduleBoundaryCheck();
    }, msUntilNextHour);
  }
  checkBoundaryTasks() {
    const now = /* @__PURE__ */ new Date();
    const currentHour = now.getHours();
    const currentSlot = `${currentHour.toString().padStart(2, "0")}:00`;
    console.log("Checking boundary tasks for", currentSlot);
  }
  updateTotalTasksCount() {
    const completedTasks = this.taskInstances.filter((inst) => inst.state === "done");
  }
  cleanupAutocompleteInstances() {
    if (this.autocompleteInstances) {
      this.autocompleteInstances.forEach((instance) => {
        if (instance && instance.cleanup) {
          instance.cleanup();
        }
      });
      this.autocompleteInstances = [];
    }
  }
  cleanupTimers() {
    if (this.globalTimerInterval) {
      clearInterval(this.globalTimerInterval);
      this.globalTimerInterval = null;
    }
    if (this.boundaryCheckTimeout) {
      clearTimeout(this.boundaryCheckTimeout);
      this.boundaryCheckTimeout = null;
    }
    if (this.renderDebounceTimer) {
      clearTimeout(this.renderDebounceTimer);
      this.renderDebounceTimer = null;
    }
  }
  applyStyles() {
    const style = document.createElement("style");
    style.textContent = TASKCHUTE_FULL_CSS;
    document.head.appendChild(style);
  }
  // ===========================================
  // Placeholder Methods (to be implemented)
  // ===========================================
  handleNavigationItemClick(section) {
    new import_obsidian3.Notice(`${section} \u6A5F\u80FD\u306F\u5B9F\u88C5\u4E2D\u3067\u3059`);
  }
  handleKeyboardShortcut(e) {
  }
  selectTaskForKeyboard(inst, taskItem) {
    this.selectedTaskInstance = inst;
    this.containerEl.querySelectorAll(".task-item.keyboard-selected").forEach((el) => el.classList.remove("keyboard-selected"));
    taskItem.classList.add("keyboard-selected");
  }
  clearTaskSelection() {
    this.selectedTaskInstance = null;
    this.containerEl.querySelectorAll(".task-item.keyboard-selected").forEach((el) => el.classList.remove("keyboard-selected"));
  }
  async deleteTask(inst) {
    if (!inst) return;
    if (!inst.task.isRoutine) {
      await this.deleteNonRoutineTask(inst);
    } else {
      await this.deleteRoutineTask(inst);
    }
  }
  async deleteNonRoutineTask(inst) {
    await this.deleteInstance(inst);
  }
  async deleteRoutineTask(inst) {
    const dateStr = this.getCurrentDateString();
    const hiddenKey = `taskchute-hidden-routines-${dateStr}`;
    const hiddenRoutines = JSON.parse(localStorage.getItem(hiddenKey) || "[]");
    const isDuplicated = this.isDuplicatedTask(inst);
    const alreadyHidden = hiddenRoutines.some((h) => {
      if (isDuplicated) {
        return h.instanceId === inst.instanceId;
      }
      if (typeof h === "string") {
        return h === inst.task.path;
      }
      return h.path === inst.task.path && !h.instanceId;
    });
    if (!alreadyHidden) {
      if (isDuplicated) {
        hiddenRoutines.push({
          path: inst.task.path,
          instanceId: inst.instanceId
        });
      } else {
        hiddenRoutines.push({
          path: inst.task.path,
          instanceId: null
        });
      }
      localStorage.setItem(hiddenKey, JSON.stringify(hiddenRoutines));
    }
    if (inst.instanceId) {
      await this.deleteTaskLogsByInstanceId(inst.task.path, inst.instanceId);
    }
    await this.deleteInstance(inst);
  }
  isDuplicatedTask(inst) {
    const dateStr = this.getCurrentDateString();
    const duplicationKey = `taskchute-duplicated-instances-${dateStr}`;
    const duplicatedInstances = JSON.parse(localStorage.getItem(duplicationKey) || "[]");
    return duplicatedInstances.some((d) => d.instanceId === inst.instanceId);
  }
  async deleteTaskLogsByInstanceId(taskPath, instanceId) {
    try {
      const logDataPath = this.plugin.pathManager.getLogDataPath();
      const [year, month] = this.getCurrentDateString().split("-");
      const monthString = `${year}-${month}`;
      const logPath = `${logDataPath}/${monthString}-tasks.json`;
      const logFile = this.app.vault.getAbstractFileByPath(logPath);
      if (!logFile || !(logFile instanceof import_obsidian3.TFile)) {
        return 0;
      }
      const content = await this.app.vault.read(logFile);
      const monthlyLog = JSON.parse(content);
      let deletedCount = 0;
      for (const dateKey in monthlyLog.taskExecutions) {
        const dayExecutions = monthlyLog.taskExecutions[dateKey];
        const beforeLength = dayExecutions.length;
        monthlyLog.taskExecutions[dateKey] = dayExecutions.filter(
          (exec) => exec.instanceId !== instanceId
        );
        deletedCount += beforeLength - monthlyLog.taskExecutions[dateKey].length;
      }
      if (deletedCount > 0) {
        await this.app.vault.modify(logFile, JSON.stringify(monthlyLog, null, 2));
      }
      return deletedCount;
    } catch (error) {
      console.error("Failed to delete task logs:", error);
      return 0;
    }
  }
  showTaskContextMenu(e, inst) {
    new import_obsidian3.Notice("\u30B3\u30F3\u30C6\u30AD\u30B9\u30C8\u30E1\u30CB\u30E5\u30FC\u306F\u5B9F\u88C5\u4E2D\u3067\u3059");
  }
  handleDragOver(e, taskItem, inst) {
  }
  clearDragoverClasses(taskItem) {
    taskItem.classList.remove("dragover", "dragover-bottom", "dragover-invalid");
  }
  handleDrop(e, taskItem, inst) {
  }
  handleSlotDrop(e, slot) {
  }
  toggleNavigation() {
    this.navigationState.isOpen = !this.navigationState.isOpen;
    if (this.navigationState.isOpen) {
      this.openNavigation();
    } else {
      this.closeNavigation();
    }
  }
  openNavigation() {
    this.navigationPanel.classList.remove("navigation-panel-hidden");
    this.navigationOverlay.classList.remove("navigation-overlay-hidden");
  }
  closeNavigation() {
    this.navigationPanel.classList.add("navigation-panel-hidden");
    this.navigationOverlay.classList.add("navigation-overlay-hidden");
  }
  async setRoutineTask(task, button, scheduledTime) {
    try {
      const taskFolderPath = this.plugin.pathManager.getTaskFolderPath();
      const filePath = `${taskFolderPath}/${task.title}.md`;
      const file = this.app.vault.getAbstractFileByPath(filePath);
      if (!file || !(file instanceof import_obsidian3.TFile)) {
        new import_obsidian3.Notice(`\u30BF\u30B9\u30AF\u30D5\u30A1\u30A4\u30EB\u300C${task.title}.md\u300D\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093`);
        return;
      }
      await this.app.fileManager.processFrontMatter(file, (frontmatter) => {
        frontmatter.isRoutine = true;
        frontmatter.\u958B\u59CB\u6642\u523B = scheduledTime;
        frontmatter.routine_type = "daily";
        const y = this.currentDate.getFullYear();
        const m = (this.currentDate.getMonth() + 1).toString().padStart(2, "0");
        const d = this.currentDate.getDate().toString().padStart(2, "0");
        frontmatter.routine_start = `${y}-${m}-${d}`;
        delete frontmatter.routine_end;
        return frontmatter;
      });
      task.isRoutine = true;
      task.scheduledTime = scheduledTime;
      button.classList.add("active");
      button.setAttribute("title", `\u30EB\u30FC\u30C1\u30F3\u30BF\u30B9\u30AF\uFF08${scheduledTime}\u958B\u59CB\u4E88\u5B9A\uFF09`);
      await this.loadTasks();
      new import_obsidian3.Notice(`\u300C${task.title}\u300D\u3092\u30EB\u30FC\u30C1\u30F3\u30BF\u30B9\u30AF\u306B\u8A2D\u5B9A\u3057\u307E\u3057\u305F\uFF08${scheduledTime}\u958B\u59CB\u4E88\u5B9A\uFF09`);
    } catch (error) {
      console.error("Failed to set routine task:", error);
      new import_obsidian3.Notice("\u30EB\u30FC\u30C1\u30F3\u30BF\u30B9\u30AF\u306E\u8A2D\u5B9A\u306B\u5931\u6557\u3057\u307E\u3057\u305F");
    }
  }
  async deleteInstanceWithConfirm(inst) {
    const confirmed = await this.showDeleteConfirmDialog(inst);
    if (confirmed) {
      await this.deleteInstance(inst);
    }
  }
  showDeleteConfirmDialog(inst) {
    return new Promise((resolve) => {
      const modal = document.createElement("div");
      modal.className = "task-modal-overlay";
      const modalContent = modal.createEl("div", { cls: "task-modal-content" });
      modalContent.createEl("h3", { text: "\u30BF\u30B9\u30AF\u306E\u524A\u9664\u78BA\u8A8D" });
      modalContent.createEl("p", {
        text: `\u300C${inst.task.title}\u300D\u3092\u524A\u9664\u3057\u3066\u3082\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F`
      });
      const buttonContainer = modalContent.createEl("div", {
        cls: "modal-button-container"
      });
      const confirmButton = buttonContainer.createEl("button", {
        text: "\u524A\u9664",
        cls: "mod-cta"
      });
      const cancelButton = buttonContainer.createEl("button", {
        text: "\u30AD\u30E3\u30F3\u30BB\u30EB"
      });
      confirmButton.addEventListener("click", () => {
        modal.remove();
        resolve(true);
      });
      cancelButton.addEventListener("click", () => {
        modal.remove();
        resolve(false);
      });
      document.body.appendChild(modal);
    });
  }
  async deleteInstance(inst) {
    try {
      const index = this.taskInstances.indexOf(inst);
      if (index > -1) {
        this.taskInstances.splice(index, 1);
      }
      const dateStr = this.getCurrentDateString();
      const deletedInstances = this.getDeletedInstances(dateStr);
      deletedInstances.push({
        instanceId: inst.instanceId,
        path: inst.task.path,
        deletionType: inst.task.isRoutine ? "today" : "permanent",
        deletedAt: (/* @__PURE__ */ new Date()).toISOString()
      });
      this.saveDeletedInstances(dateStr, deletedInstances);
      if (!inst.task.isRoutine) {
        const samePathInstances = this.taskInstances.filter(
          (i) => i.task.path === inst.task.path
        );
        if (samePathInstances.length === 0 && inst.task.file) {
          this.tasks = this.tasks.filter((t) => t.path !== inst.task.path);
          await this.app.vault.delete(inst.task.file);
          new import_obsidian3.Notice(`\u300C${inst.task.title}\u300D\u3092\u5B8C\u5168\u306B\u524A\u9664\u3057\u307E\u3057\u305F\u3002`);
        } else {
          new import_obsidian3.Notice(`\u300C${inst.task.title}\u300D\u3092\u672C\u65E5\u306E\u30EA\u30B9\u30C8\u304B\u3089\u524A\u9664\u3057\u307E\u3057\u305F\u3002`);
        }
      } else {
        new import_obsidian3.Notice(`\u300C${inst.task.title}\u300D\u3092\u672C\u65E5\u306E\u30EA\u30B9\u30C8\u304B\u3089\u524A\u9664\u3057\u307E\u3057\u305F\u3002`);
      }
      this.renderTaskList();
    } catch (error) {
      console.error("Failed to delete instance:", error);
      new import_obsidian3.Notice("\u30BF\u30B9\u30AF\u306E\u524A\u9664\u306B\u5931\u6557\u3057\u307E\u3057\u305F");
    }
  }
  async resetTaskToIdle(inst) {
    try {
      inst.state = "idle";
      inst.startTime = void 0;
      inst.stopTime = void 0;
      this.saveInstanceState(inst);
      this.renderTaskList();
      new import_obsidian3.Notice(`\u300C${inst.task.title}\u300D\u3092\u30A2\u30A4\u30C9\u30EB\u72B6\u614B\u306B\u623B\u3057\u307E\u3057\u305F`);
    } catch (error) {
      console.error("Failed to reset task:", error);
      new import_obsidian3.Notice("\u30BF\u30B9\u30AF\u306E\u30EA\u30BB\u30C3\u30C8\u306B\u5931\u6557\u3057\u307E\u3057\u305F");
    }
  }
  async showProjectSettingsModal(inst, tooltip) {
    if (tooltip) {
      tooltip.remove();
    }
    const modal = document.createElement("div");
    modal.className = "task-modal-overlay";
    const modalContent = modal.createEl("div", { cls: "task-modal-content" });
    const modalHeader = modalContent.createEl("div", { cls: "modal-header" });
    modalHeader.createEl("h3", {
      text: `\u300C${inst.task.title}\u300D\u306E\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u8A2D\u5B9A`
    });
    const closeButton = modalHeader.createEl("button", {
      cls: "modal-close-button",
      text: "\xD7"
    });
    const form = modalContent.createEl("form", { cls: "task-form" });
    const projectGroup = form.createEl("div", { cls: "form-group" });
    projectGroup.createEl("label", { text: "\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8:", cls: "form-label" });
    const projectSelect = projectGroup.createEl("select", {
      cls: "form-select"
    });
    const projects = await this.getAvailableProjects();
    const noneOption = projectSelect.createEl("option", {
      value: "",
      text: "\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u306A\u3057"
    });
    projects.forEach((project) => {
      projectSelect.createEl("option", {
        value: project,
        text: project
      });
    });
    if (inst.task.project) {
      projectSelect.value = inst.task.project;
    }
    const buttonGroup = form.createEl("div", { cls: "form-button-group" });
    const cancelButton = buttonGroup.createEl("button", {
      type: "button",
      cls: "form-button cancel",
      text: "\u30AD\u30E3\u30F3\u30BB\u30EB"
    });
    const saveButton = buttonGroup.createEl("button", {
      type: "submit",
      cls: "form-button create",
      text: "\u4FDD\u5B58"
    });
    closeButton.addEventListener("click", () => {
      document.body.removeChild(modal);
    });
    cancelButton.addEventListener("click", () => {
      document.body.removeChild(modal);
    });
    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const selectedProject = projectSelect.value;
      await this.updateTaskProject(inst, selectedProject);
      document.body.removeChild(modal);
    });
    document.body.appendChild(modal);
  }
  async getAvailableProjects() {
    try {
      const projectFolderPath = this.plugin.pathManager.getProjectFolderPath();
      const projectFolder = this.app.vault.getAbstractFileByPath(projectFolderPath);
      if (!projectFolder || !("children" in projectFolder)) {
        return [];
      }
      const projects = [];
      for (const file of projectFolder.children) {
        if (file instanceof import_obsidian3.TFile && file.extension === "md") {
          projects.push(file.basename);
        }
      }
      return projects;
    } catch (error) {
      console.error("Failed to get projects:", error);
      return [];
    }
  }
  async updateTaskProject(inst, projectName) {
    try {
      const taskFolderPath = this.plugin.pathManager.getTaskFolderPath();
      const filePath = `${taskFolderPath}/${inst.task.title}.md`;
      const file = this.app.vault.getAbstractFileByPath(filePath);
      if (!file || !(file instanceof import_obsidian3.TFile)) {
        new import_obsidian3.Notice(`\u30BF\u30B9\u30AF\u30D5\u30A1\u30A4\u30EB\u300C${inst.task.title}.md\u300D\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093`);
        return;
      }
      await this.app.fileManager.processFrontMatter(file, (frontmatter) => {
        if (projectName) {
          frontmatter.project = `[[${projectName}]]`;
          frontmatter.project_path = `TaskChute/Project/${projectName}.md`;
        } else {
          delete frontmatter.project;
          delete frontmatter.project_path;
        }
        return frontmatter;
      });
      inst.task.project = projectName || void 0;
      inst.task.projectPath = projectName ? `TaskChute/Project/${projectName}.md` : void 0;
      inst.task.projectTitle = projectName || void 0;
      this.renderTaskList();
      const message = projectName ? `\u300C${inst.task.title}\u300D\u3092${projectName}\u306B\u95A2\u9023\u4ED8\u3051\u307E\u3057\u305F` : `\u300C${inst.task.title}\u300D\u306E\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u95A2\u9023\u4ED8\u3051\u3092\u89E3\u9664\u3057\u307E\u3057\u305F`;
      new import_obsidian3.Notice(message);
    } catch (error) {
      console.error("Failed to update project:", error);
      new import_obsidian3.Notice("\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u306E\u66F4\u65B0\u306B\u5931\u6557\u3057\u307E\u3057\u305F");
    }
  }
  moveIdleTasksToCurrentTime() {
    new import_obsidian3.Notice("\u30A2\u30A4\u30C9\u30EB\u30BF\u30B9\u30AF\u79FB\u52D5\u6A5F\u80FD\u306F\u5B9F\u88C5\u4E2D\u3067\u3059");
  }
  async showAddTaskModal() {
    const modal = document.createElement("div");
    modal.className = "task-modal-overlay";
    const modalContent = modal.createEl("div", { cls: "task-modal-content" });
    const modalHeader = modalContent.createEl("div", { cls: "modal-header" });
    modalHeader.createEl("h3", { text: "\u65B0\u3057\u3044\u30BF\u30B9\u30AF\u3092\u8FFD\u52A0" });
    const closeButton = modalHeader.createEl("button", {
      cls: "modal-close-button",
      text: "\xD7"
    });
    const form = modalContent.createEl("form", { cls: "task-form" });
    const nameGroup = form.createEl("div", { cls: "form-group" });
    nameGroup.createEl("label", { text: "\u30BF\u30B9\u30AF\u540D:", cls: "form-label" });
    const nameInput = nameGroup.createEl("input", {
      type: "text",
      cls: "form-input",
      placeholder: "\u30BF\u30B9\u30AF\u540D\u3092\u5165\u529B"
    });
    const estimatedMinutes = 30;
    const buttonGroup = form.createEl("div", { cls: "form-button-group" });
    const cancelButton = buttonGroup.createEl("button", {
      type: "button",
      cls: "form-button cancel",
      text: "\u30AD\u30E3\u30F3\u30BB\u30EB"
    });
    const saveButton = buttonGroup.createEl("button", {
      type: "submit",
      cls: "form-button create",
      text: "\u4FDD\u5B58"
    });
    closeButton.addEventListener("click", () => {
      document.body.removeChild(modal);
    });
    cancelButton.addEventListener("click", () => {
      document.body.removeChild(modal);
    });
    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const taskName = nameInput.value.trim();
      if (!taskName) {
        new import_obsidian3.Notice("\u30BF\u30B9\u30AF\u540D\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044");
        return;
      }
      await this.createNewTask(taskName, estimatedMinutes);
      document.body.removeChild(modal);
    });
    document.body.appendChild(modal);
    nameInput.focus();
  }
  async createNewTask(taskName, estimatedMinutes) {
    try {
      const taskFolderPath = this.plugin.pathManager.getTaskFolderPath();
      const filePath = `${taskFolderPath}/${taskName}.md`;
      const dateStr = this.getCurrentDateString();
      const frontmatter = [
        "---",
        `estimatedMinutes: ${estimatedMinutes}`,
        `createdAt: ${(/* @__PURE__ */ new Date()).toISOString()}`,
        "---",
        "",
        `#task`,
        "",
        `# ${taskName}`,
        ""
      ].join("\n");
      await this.app.vault.create(filePath, frontmatter);
      setTimeout(async () => {
        await this.loadTasks();
        this.renderTaskList();
      }, 100);
      new import_obsidian3.Notice(`\u30BF\u30B9\u30AF\u300C${taskName}\u300D\u3092\u4F5C\u6210\u3057\u307E\u3057\u305F`);
    } catch (error) {
      console.error("Failed to create task:", error);
      new import_obsidian3.Notice("\u30BF\u30B9\u30AF\u306E\u4F5C\u6210\u306B\u5931\u6557\u3057\u307E\u3057\u305F");
    }
  }
  async showTaskMoveDatePicker(inst, button) {
    const modal = document.createElement("div");
    modal.className = "task-modal-overlay";
    const modalContent = modal.createEl("div", { cls: "task-modal-content" });
    modalContent.createEl("h3", { text: "\u30BF\u30B9\u30AF\u3092\u79FB\u52D5" });
    const dateInput = modalContent.createEl("input", {
      type: "date",
      value: this.getCurrentDateString()
    });
    const buttonContainer = modalContent.createEl("div", {
      cls: "modal-button-container"
    });
    const cancelButton = buttonContainer.createEl("button", {
      text: "\u30AD\u30E3\u30F3\u30BB\u30EB"
    });
    const moveButton = buttonContainer.createEl("button", {
      text: "\u79FB\u52D5",
      cls: "mod-cta"
    });
    cancelButton.addEventListener("click", () => {
      modal.remove();
    });
    moveButton.addEventListener("click", async () => {
      const newDate = dateInput.value;
      if (newDate) {
        await this.moveTaskToDate(inst, newDate);
        modal.remove();
      }
    });
    document.body.appendChild(modal);
  }
  async moveTaskToDate(inst, dateStr) {
    try {
      const file = this.app.vault.getAbstractFileByPath(inst.task.path);
      if (file instanceof import_obsidian3.TFile) {
        await this.app.fileManager.processFrontMatter(file, (frontmatter) => {
          frontmatter.target_date = dateStr;
          return frontmatter;
        });
      }
      new import_obsidian3.Notice(`\u30BF\u30B9\u30AF\u300C${inst.task.title}\u300D\u3092${dateStr}\u306B\u79FB\u52D5\u3057\u307E\u3057\u305F`);
      await this.loadTasks();
    } catch (error) {
      console.error("Failed to move task:", error);
      new import_obsidian3.Notice("\u30BF\u30B9\u30AF\u306E\u79FB\u52D5\u306B\u5931\u6557\u3057\u307E\u3057\u305F");
    }
  }
  async showProjectModal(inst) {
    await this.showUnifiedProjectModal(inst);
  }
  async showUnifiedProjectModal(inst) {
    try {
      const modal = document.createElement("div");
      modal.className = "task-modal-overlay";
      const modalContent = modal.createEl("div", { cls: "task-modal-content" });
      const modalHeader = modalContent.createEl("div", { cls: "modal-header" });
      modalHeader.createEl("h3", {
        text: `\u300C${inst.task.title}\u300D\u306E\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u8A2D\u5B9A`
      });
      const closeButton = modalHeader.createEl("button", {
        cls: "modal-close-button",
        text: "\xD7",
        attr: { title: "\u9589\u3058\u308B" }
      });
      const form = modalContent.createEl("form", { cls: "task-form" });
      let projectFiles = [];
      try {
        projectFiles = await this.getProjectFiles();
      } catch (error) {
        new import_obsidian3.Notice("\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u30EA\u30B9\u30C8\u306E\u8AAD\u307F\u8FBC\u307F\u306B\u5931\u6557\u3057\u307E\u3057\u305F");
        modal.remove();
        return;
      }
      if (projectFiles.length === 0) {
        const noProjectGroup = form.createEl("div", { cls: "form-group" });
        noProjectGroup.createEl("p", {
          text: "\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u30D5\u30A1\u30A4\u30EB\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3002",
          cls: "form-description"
        });
        noProjectGroup.createEl("p", {
          text: "\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u30D5\u30A1\u30A4\u30EB\u306B #project \u30BF\u30B0\u3092\u8FFD\u52A0\u3057\u3066\u304F\u3060\u3055\u3044\u3002",
          cls: "form-description"
        });
      } else {
        const projectGroup = form.createEl("div", { cls: "form-group" });
        projectGroup.createEl("label", {
          text: "\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u3092\u9078\u629E:",
          cls: "form-label"
        });
        const projectSelect = projectGroup.createEl("select", {
          cls: "form-input"
        });
        if (inst.task.projectPath) {
          const removeProjectOption = projectSelect.createEl("option", {
            value: "",
            text: "\u2796 \u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u3092\u5916\u3059"
          });
        } else {
          const emptyOption = projectSelect.createEl("option", {
            value: "",
            text: ""
          });
          emptyOption.selected = true;
        }
        projectFiles.forEach((project) => {
          const option = projectSelect.createEl("option", {
            value: project.path,
            text: project.basename
          });
          if (inst.task.projectPath === project.path) {
            option.selected = true;
          }
        });
        const descGroup = form.createEl("div", { cls: "form-group" });
        if (inst.task.projectPath) {
          descGroup.createEl("p", {
            text: "\u5225\u306E\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u3092\u9078\u629E\u3059\u308B\u304B\u3001\u300C\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u3092\u5916\u3059\u300D\u3092\u9078\u629E\u3057\u3066\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u3092\u89E3\u9664\u3067\u304D\u307E\u3059\u3002",
            cls: "form-description"
          });
        } else {
          descGroup.createEl("p", {
            text: "\u30BF\u30B9\u30AF\u306B\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u3092\u8A2D\u5B9A\u3059\u308B\u3068\u3001\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u30DA\u30FC\u30B8\u304B\u3089\u95A2\u9023\u30BF\u30B9\u30AF\u3092\u78BA\u8A8D\u3067\u304D\u307E\u3059\u3002",
            cls: "form-description"
          });
        }
        const buttonGroup = form.createEl("div", { cls: "form-button-group" });
        const cancelButton = buttonGroup.createEl("button", {
          type: "button",
          cls: "form-button cancel",
          text: "\u30AD\u30E3\u30F3\u30BB\u30EB"
        });
        const saveButton = buttonGroup.createEl("button", {
          type: "submit",
          cls: "form-button create",
          text: "\u4FDD\u5B58"
        });
        form.addEventListener("submit", async (e) => {
          e.preventDefault();
          const selectedProject = projectSelect.value;
          await this.setProjectForTask(inst.task, selectedProject);
          this.updateProjectDisplay(inst);
          modal.remove();
        });
        cancelButton.addEventListener("click", () => {
          modal.remove();
        });
      }
      closeButton.addEventListener("click", () => {
        modal.remove();
      });
      document.body.appendChild(modal);
    } catch (error) {
      console.error("Failed to show project modal:", error);
      new import_obsidian3.Notice("\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u9078\u629E\u753B\u9762\u306E\u8868\u793A\u306B\u5931\u6557\u3057\u307E\u3057\u305F");
    }
  }
  async getProjectFiles() {
    const files = this.app.vault.getMarkdownFiles();
    const projectFiles = [];
    const projectFolderPath = this.plugin.pathManager.getProjectFolderPath();
    for (const file of files) {
      if (file.path.startsWith(projectFolderPath + "/") && file.basename.startsWith("Project - ")) {
        projectFiles.push(file);
        continue;
      }
      if (file.basename.startsWith("Project - ")) {
        projectFiles.push(file);
        continue;
      }
      const content = await this.app.vault.read(file);
      if (content.includes("#project")) {
        projectFiles.push(file);
      }
    }
    return projectFiles;
  }
  async setProjectForTask(task, projectPath) {
    try {
      if (!task.file || !(task.file instanceof import_obsidian3.TFile)) {
        new import_obsidian3.Notice("\u30BF\u30B9\u30AF\u30D5\u30A1\u30A4\u30EB\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093");
        return;
      }
      await this.app.fileManager.processFrontMatter(
        task.file,
        (frontmatter) => {
          if (projectPath) {
            const projectFile = this.app.vault.getAbstractFileByPath(projectPath);
            if (projectFile) {
              frontmatter.project = projectFile.basename;
              frontmatter.project_path = projectPath;
            }
          } else {
            delete frontmatter.project;
            delete frontmatter.project_path;
          }
          return frontmatter;
        }
      );
      if (projectPath) {
        const projectFile = this.app.vault.getAbstractFileByPath(projectPath);
        if (projectFile) {
          task.projectPath = projectPath;
          task.projectTitle = projectFile.basename;
        }
      } else {
        task.projectPath = null;
        task.projectTitle = null;
      }
      new import_obsidian3.Notice(`\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u8A2D\u5B9A\u3092\u4FDD\u5B58\u3057\u307E\u3057\u305F`);
    } catch (error) {
      console.error("Failed to set project:", error);
      new import_obsidian3.Notice("\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u8A2D\u5B9A\u306B\u5931\u6557\u3057\u307E\u3057\u305F");
    }
  }
  updateProjectDisplay(inst) {
    var _a;
    const taskItem = (_a = this.taskList) == null ? void 0 : _a.querySelector(
      `[data-task-path="${inst.task.path}"]`
    );
    if (taskItem) {
      const projectDisplay = taskItem.querySelector(
        ".taskchute-project-display"
      );
      if (projectDisplay) {
        projectDisplay.empty();
        if (inst.task.projectPath && inst.task.projectTitle) {
          const projectButton = projectDisplay.createEl("span", {
            cls: "taskchute-project-button",
            attr: {
              title: `\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8: ${inst.task.projectTitle}`
            }
          });
          const folderIcon = projectButton.createEl("span", {
            cls: "taskchute-project-icon",
            text: "\u{1F4C1}"
          });
          const projectName = projectButton.createEl("span", {
            cls: "taskchute-project-name",
            text: inst.task.projectTitle.replace(/^Project\s*-\s*/, "")
          });
          projectButton.addEventListener("click", async (e) => {
            e.stopPropagation();
            await this.showUnifiedProjectModal(inst);
          });
          const externalLinkIcon = projectDisplay.createEl("span", {
            cls: "taskchute-external-link",
            text: "\u{1F517}",
            attr: { title: "\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u30CE\u30FC\u30C8\u3092\u958B\u304F" }
          });
          externalLinkIcon.addEventListener("click", async (e) => {
            e.stopPropagation();
            await this.openProjectInSplit(inst.task.projectPath);
          });
        } else {
          const projectPlaceholder = projectDisplay.createEl("span", {
            cls: "taskchute-project-placeholder",
            attr: { title: "\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u3092\u8A2D\u5B9A" }
          });
          projectPlaceholder.addEventListener("click", async (e) => {
            e.stopPropagation();
            await this.showProjectModal(inst);
          });
        }
      }
    }
  }
  async openProjectInSplit(projectPath) {
    try {
      const file = this.app.vault.getAbstractFileByPath(projectPath);
      if (file instanceof import_obsidian3.TFile) {
        const leaf = this.app.workspace.getLeaf("split");
        await leaf.openFile(file);
      } else {
        new import_obsidian3.Notice(`\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u30D5\u30A1\u30A4\u30EB\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093: ${projectPath}`);
      }
    } catch (error) {
      console.error("Failed to open project:", error);
      new import_obsidian3.Notice("\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u30D5\u30A1\u30A4\u30EB\u3092\u958B\u3051\u307E\u305B\u3093\u3067\u3057\u305F");
    }
  }
  async hasExecutionHistory(taskPath) {
    return false;
  }
  async handleFileRename(file, oldPath) {
    console.log("File renamed:", oldPath, "->", file.path);
  }
  moveInstanceToSlot(fromSlot, fromIdx, toSlot, toIdx) {
    console.log(`Moving task from ${fromSlot}:${fromIdx} to ${toSlot}:${toIdx}`);
  }
  // State management methods for deletion/hiding
  getDeletedInstances(dateStr) {
    const key = `taskchute-deleted-instances-${dateStr}`;
    try {
      const data = localStorage.getItem(key);
      if (!data) return [];
      return JSON.parse(data);
    } catch (e) {
      return [];
    }
  }
  saveDeletedInstances(dateStr, instances) {
    const key = `taskchute-deleted-instances-${dateStr}`;
    try {
      localStorage.setItem(key, JSON.stringify(instances));
    } catch (e) {
      console.error("Failed to save deleted instances:", e);
    }
  }
  getHiddenRoutines(dateStr) {
    const key = `taskchute-hidden-routines-${dateStr}`;
    try {
      const data = localStorage.getItem(key);
      if (!data) return [];
      return JSON.parse(data);
    } catch (e) {
      return [];
    }
  }
  saveHiddenRoutines(dateStr, routines) {
    const key = `taskchute-hidden-routines-${dateStr}`;
    try {
      localStorage.setItem(key, JSON.stringify(routines));
    } catch (e) {
      console.error("Failed to save hidden routines:", e);
    }
  }
  isInstanceDeleted(instanceId, taskPath, dateStr) {
    const deletedInstances = this.getDeletedInstances(dateStr);
    return deletedInstances.some((del) => {
      if (instanceId && del.instanceId === instanceId) return true;
      if (del.deletionType === "permanent" && del.path === taskPath) return true;
      return false;
    });
  }
  isInstanceHidden(instanceId, taskPath, dateStr) {
    const hiddenRoutines = this.getHiddenRoutines(dateStr);
    return hiddenRoutines.some((hidden) => {
      if (hidden.instanceId && hidden.instanceId === instanceId) return true;
      if (hidden.instanceId === null && hidden.path && hidden.path === taskPath) return true;
      return false;
    });
  }
};

// src/main.ts
var VIEW_TYPE_TASKCHUTE = "taskchute-view";
var TaskChuteSettingTab = class extends import_obsidian4.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian4.Setting(containerEl).setName("\u30D1\u30B9\u8A2D\u5B9A").setHeading();
    new import_obsidian4.Setting(containerEl).setName("\u30BF\u30B9\u30AF\u30D5\u30A9\u30EB\u30C0\u30D1\u30B9").setDesc("\u30BF\u30B9\u30AF\u30D5\u30A1\u30A4\u30EB\u3092\u4FDD\u5B58\u3059\u308B\u30D5\u30A9\u30EB\u30C0\u306E\u30D1\u30B9").addText((text) => {
      text.setPlaceholder(PathManager.DEFAULT_PATHS.taskFolder).setValue(this.plugin.settings.taskFolderPath || "").onChange(async (value) => {
        const validation = this.plugin.pathManager.validatePath(value);
        if (validation.valid || value === "") {
          this.plugin.settings.taskFolderPath = value;
          await this.plugin.saveSettings();
        } else {
          new import_obsidian4.Notice(validation.error);
          text.setValue(this.plugin.settings.taskFolderPath || "");
        }
      });
      text.inputEl.addEventListener("blur", async () => {
        if (this.plugin.settings.taskFolderPath || !this.plugin.settings.taskFolderPath) {
          try {
            await this.plugin.pathManager.ensureFolderExists(
              this.plugin.pathManager.getTaskFolderPath()
            );
          } catch (error) {
          }
        }
      });
    });
    new import_obsidian4.Setting(containerEl).setName("\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u30D5\u30A9\u30EB\u30C0\u30D1\u30B9").setDesc("\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u30D5\u30A1\u30A4\u30EB\u3092\u4FDD\u5B58\u3059\u308B\u30D5\u30A9\u30EB\u30C0\u306E\u30D1\u30B9").addText((text) => {
      text.setPlaceholder(PathManager.DEFAULT_PATHS.projectFolder).setValue(this.plugin.settings.projectFolderPath || "").onChange(async (value) => {
        const validation = this.plugin.pathManager.validatePath(value);
        if (validation.valid || value === "") {
          this.plugin.settings.projectFolderPath = value;
          await this.plugin.saveSettings();
        } else {
          new import_obsidian4.Notice(validation.error);
          text.setValue(this.plugin.settings.projectFolderPath || "");
        }
      });
    });
    new import_obsidian4.Setting(containerEl).setName("\u30ED\u30B0\u30C7\u30FC\u30BF\u30D1\u30B9").setDesc("\u30ED\u30B0\u30C7\u30FC\u30BF\u3092\u4FDD\u5B58\u3059\u308B\u30D5\u30A9\u30EB\u30C0\u306E\u30D1\u30B9").addText((text) => {
      text.setPlaceholder(PathManager.DEFAULT_PATHS.logData).setValue(this.plugin.settings.logDataPath || "").onChange(async (value) => {
        const validation = this.plugin.pathManager.validatePath(value);
        if (validation.valid || value === "") {
          this.plugin.settings.logDataPath = value;
          await this.plugin.saveSettings();
        } else {
          new import_obsidian4.Notice(validation.error);
          text.setValue(this.plugin.settings.logDataPath || "");
        }
      });
    });
    new import_obsidian4.Setting(containerEl).setName("\u30EC\u30D3\u30E5\u30FC\u30C7\u30FC\u30BF\u30D1\u30B9").setDesc("\u30EC\u30D3\u30E5\u30FC\u30C7\u30FC\u30BF\u3092\u4FDD\u5B58\u3059\u308B\u30D5\u30A9\u30EB\u30C0\u306E\u30D1\u30B9").addText((text) => {
      text.setPlaceholder(PathManager.DEFAULT_PATHS.reviewData).setValue(this.plugin.settings.reviewDataPath || "").onChange(async (value) => {
        const validation = this.plugin.pathManager.validatePath(value);
        if (validation.valid || value === "") {
          this.plugin.settings.reviewDataPath = value;
          await this.plugin.saveSettings();
        } else {
          new import_obsidian4.Notice(validation.error);
          text.setValue(this.plugin.settings.reviewDataPath || "");
        }
      });
    });
    new import_obsidian4.Setting(containerEl).setName("\u8996\u899A\u52B9\u679C\u8A2D\u5B9A").setHeading();
    new import_obsidian4.Setting(containerEl).setName("\u52B9\u679C\u97F3\u3092\u6709\u52B9\u5316").setDesc("\u30BF\u30B9\u30AF\u5B8C\u4E86\u6642\u306B\u52B9\u679C\u97F3\u3092\u518D\u751F\u3059\u308B").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.enableSound).onChange(async (value) => {
        this.plugin.settings.enableSound = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian4.Setting(containerEl).setName("\u82B1\u706B\u30A8\u30D5\u30A7\u30AF\u30C8\u3092\u6709\u52B9\u5316").setDesc("\u30BF\u30B9\u30AF\u5B8C\u4E86\u6642\u306B\u82B1\u706B\u30A8\u30D5\u30A7\u30AF\u30C8\u3092\u8868\u793A\u3059\u308B").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.enableFireworks).onChange(async (value) => {
        this.plugin.settings.enableFireworks = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian4.Setting(containerEl).setName("\u7D19\u5439\u96EA\u30A8\u30D5\u30A7\u30AF\u30C8\u3092\u6709\u52B9\u5316").setDesc("\u30BF\u30B9\u30AF\u5B8C\u4E86\u6642\u306B\u7D19\u5439\u96EA\u30A8\u30D5\u30A7\u30AF\u30C8\u3092\u8868\u793A\u3059\u308B").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.enableConfetti).onChange(async (value) => {
        this.plugin.settings.enableConfetti = value;
        await this.plugin.saveSettings();
      })
    );
  }
};
var TaskChutePlusPlugin = class extends import_obsidian4.Plugin {
  // Simple logger/notification wrapper
  _log(level, ...args) {
    var _a;
    try {
      (_a = console[level || "log"]) == null ? void 0 : _a.call(console, ...args);
    } catch (_) {
    }
  }
  _notify(message, timeout) {
    try {
      new import_obsidian4.Notice(message, timeout);
    } catch (_) {
      this._log("warn", "[Notice]", message);
    }
  }
  async onload() {
    const loaded = await this.loadData() || {};
    this.settings = Object.assign({}, DEFAULT_SETTINGS, loaded);
    this.pathManager = new PathManager(this);
    this.routineAliasManager = new RoutineAliasManager(this);
    await this.routineAliasManager.loadAliases();
    await this.ensureRequiredFolders();
    try {
      this.addSettingTab(new TaskChuteSettingTab(this.app, this));
    } catch (error) {
      this._log("warn", "Settings tab not available:", error);
    }
    this.registerView(
      VIEW_TYPE_TASKCHUTE,
      (leaf) => new TaskChuteView(leaf, this)
    );
    this.addRibbonIcon("checkmark", "TaskChute\u3092\u958B\u304F", () => {
      this.activateTaskChuteView();
    });
    this.registerCommands();
  }
  async onunload() {
    if (this.globalTimerInterval) {
      clearInterval(this.globalTimerInterval);
      this.globalTimerInterval = null;
    }
    const view = this.getTaskChuteView();
    if (view && view.boundaryCheckTimeout) {
      clearTimeout(view.boundaryCheckTimeout);
      view.boundaryCheckTimeout = null;
    }
    this.app.workspace.getLeavesOfType(VIEW_TYPE_TASKCHUTE).forEach((leaf) => {
      if (leaf.view && leaf.view.onunload) {
        leaf.view.onunload();
      }
    });
    try {
      const today = /* @__PURE__ */ new Date();
      const cutoffDate = new Date(today);
      cutoffDate.setDate(today.getDate() - 30);
      const keysToCheck = Object.keys(localStorage);
      keysToCheck.forEach((key) => {
        const dateMatch = key.match(/taskchute-.*-(\d{4}-\d{2}-\d{2})/);
        if (dateMatch) {
          const keyDate = new Date(dateMatch[1]);
          if (keyDate < cutoffDate) {
            localStorage.removeItem(key);
          }
        }
      });
    } catch (error) {
    }
  }
  registerCommands() {
    this.addCommand({
      id: "open-taskchute-view",
      name: "TaskChute\u3092\u958B\u304F",
      callback: () => {
        this.activateTaskChuteView();
      }
    });
    this.addCommand({
      id: "taskchute-settings",
      name: "TaskChute\u8A2D\u5B9A",
      callback: () => {
        this.showSettingsModal();
      }
    });
    this.addCommand({
      id: "duplicate-selected-task",
      name: "\u9078\u629E\u3055\u308C\u305F\u30BF\u30B9\u30AF\u3092\u8907\u88FD",
      callback: async () => {
        const view = this.getTaskChuteView();
        if (view && view.selectedTaskInstance) {
          await view.duplicateInstance(view.selectedTaskInstance);
          view.clearTaskSelection();
        } else {
          new import_obsidian4.Notice("\u30BF\u30B9\u30AF\u304C\u9078\u629E\u3055\u308C\u3066\u3044\u307E\u305B\u3093");
        }
      }
    });
    this.addCommand({
      id: "delete-selected-task",
      name: "\u9078\u629E\u3055\u308C\u305F\u30BF\u30B9\u30AF\u3092\u524A\u9664",
      callback: () => {
        const view = this.getTaskChuteView();
        if (view && view.selectedTaskInstance) {
          view.deleteSelectedTask();
        } else {
          new import_obsidian4.Notice("\u30BF\u30B9\u30AF\u304C\u9078\u629E\u3055\u308C\u3066\u3044\u307E\u305B\u3093");
        }
      }
    });
    this.addCommand({
      id: "reset-selected-task",
      name: "\u9078\u629E\u3055\u308C\u305F\u30BF\u30B9\u30AF\u3092\u672A\u5B9F\u884C\u306B\u623B\u3059",
      callback: () => {
        const view = this.getTaskChuteView();
        if (view && view.selectedTaskInstance) {
          if (view.selectedTaskInstance.state !== "idle") {
            view.resetTaskToIdle(view.selectedTaskInstance);
          } else {
            new import_obsidian4.Notice("\u65E2\u306B\u672A\u5B9F\u884C\u72B6\u614B\u3067\u3059");
          }
        } else {
          new import_obsidian4.Notice("\u30BF\u30B9\u30AF\u304C\u9078\u629E\u3055\u308C\u3066\u3044\u307E\u305B\u3093");
        }
      }
    });
    this.addCommand({
      id: "show-today-tasks",
      name: "\u4ECA\u65E5\u306E\u30BF\u30B9\u30AF\u3092\u8868\u793A",
      description: "Show today's tasks",
      hotkeys: [
        {
          modifiers: ["Alt"],
          key: "t"
        }
      ],
      callback: () => {
        const view = this.getTaskChuteView();
        if (view) {
          view.showTodayTasks();
        } else {
          new import_obsidian4.Notice("TaskChute\u30D3\u30E5\u30FC\u304C\u958B\u304B\u308C\u3066\u3044\u307E\u305B\u3093");
        }
      }
    });
    this.addCommand({
      id: "reorganize-idle-tasks",
      name: "\u672A\u5B9F\u884C\u30BF\u30B9\u30AF\u3092\u73FE\u5728\u306E\u6642\u9593\u5E2F\u306B\u6574\u7406",
      callback: () => {
        const view = this.getTaskChuteView();
        if (view) {
          view.reorganizeIdleTasks();
        } else {
          new import_obsidian4.Notice("TaskChute\u30D3\u30E5\u30FC\u304C\u958B\u304B\u308C\u3066\u3044\u307E\u305B\u3093");
        }
      }
    });
  }
  async ensureRequiredFolders() {
    const targets = [
      ["\u30BF\u30B9\u30AF\u30D5\u30A9\u30EB\u30C0", () => this.pathManager.getTaskFolderPath()],
      ["\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u30D5\u30A9\u30EB\u30C0", () => this.pathManager.getProjectFolderPath()],
      ["\u30ED\u30B0\u30C7\u30FC\u30BF\u30D5\u30A9\u30EB\u30C0", () => this.pathManager.getLogDataPath()],
      ["\u30EC\u30D3\u30E5\u30FC\u30C7\u30FC\u30BF\u30D5\u30A9\u30EB\u30C0", () => this.pathManager.getReviewDataPath()]
    ];
    for (const [label, getter] of targets) {
      try {
        const path = getter();
        await this.pathManager.ensureFolderExists(path);
      } catch (error) {
        try {
          new import_obsidian4.Notice(`${label}\u306E\u4F5C\u6210\u306B\u5931\u6557\u3057\u307E\u3057\u305F`);
        } catch (_) {
        }
      }
    }
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  getTaskChuteView() {
    const leaf = this.app.workspace.getLeavesOfType(VIEW_TYPE_TASKCHUTE)[0];
    if (leaf && leaf.view instanceof TaskChuteView) {
      return leaf.view;
    }
    return null;
  }
  async activateTaskChuteView() {
    const { workspace } = this.app;
    const leaf = workspace.getLeaf(true);
    await leaf.setViewState({
      type: VIEW_TYPE_TASKCHUTE,
      active: true
    });
  }
  showSettingsModal() {
    const modal = document.createElement("div");
    modal.className = "task-modal-overlay";
    const modalContent = modal.createEl("div", { cls: "task-modal-content" });
    const modalHeader = modalContent.createEl("div", { cls: "modal-header" });
    modalHeader.createEl("h3", { text: "TaskChute\u8A2D\u5B9A" });
    const closeButton = modalHeader.createEl("button", {
      cls: "modal-close-button",
      text: "\xD7",
      attr: { title: "\u9589\u3058\u308B" }
    });
    const form = modalContent.createEl("form", { cls: "task-form" });
    const pathSection = form.createEl("div", { cls: "settings-section" });
    pathSection.createEl("h4", { text: "\u30D1\u30B9\u8A2D\u5B9A" });
    this.createPathSetting(
      pathSection,
      "\u30BF\u30B9\u30AF\u30D5\u30A9\u30EB\u30C0\u30D1\u30B9",
      "taskFolderPath",
      PathManager.DEFAULT_PATHS.taskFolder
    );
    this.createPathSetting(
      pathSection,
      "\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u30D5\u30A9\u30EB\u30C0\u30D1\u30B9",
      "projectFolderPath",
      PathManager.DEFAULT_PATHS.projectFolder
    );
    this.createPathSetting(
      pathSection,
      "\u30ED\u30B0\u30C7\u30FC\u30BF\u30D1\u30B9",
      "logDataPath",
      PathManager.DEFAULT_PATHS.logData
    );
    this.createPathSetting(
      pathSection,
      "\u30EC\u30D3\u30E5\u30FC\u30C7\u30FC\u30BF\u30D1\u30B9",
      "reviewDataPath",
      PathManager.DEFAULT_PATHS.reviewData
    );
    const effectsSection = form.createEl("div", { cls: "settings-section" });
    effectsSection.createEl("h4", { text: "\u8996\u899A\u52B9\u679C\u8A2D\u5B9A" });
    this.createToggleSetting(effectsSection, "\u52B9\u679C\u97F3\u3092\u6709\u52B9\u5316", "enableSound");
    this.createToggleSetting(effectsSection, "\u82B1\u706B\u30A8\u30D5\u30A7\u30AF\u30C8\u3092\u6709\u52B9\u5316", "enableFireworks");
    this.createToggleSetting(effectsSection, "\u7D19\u5439\u96EA\u30A8\u30D5\u30A7\u30AF\u30C8\u3092\u6709\u52B9\u5316", "enableConfetti");
    closeButton.addEventListener("click", () => {
      document.body.removeChild(modal);
    });
    modal.addEventListener("click", (e) => {
      if (e.target === modal) {
        document.body.removeChild(modal);
      }
    });
    document.body.appendChild(modal);
  }
  createPathSetting(container, label, settingKey, placeholder) {
    const group = container.createEl("div", { cls: "form-group" });
    group.createEl("label", { text: label + ":", cls: "form-label" });
    const input = group.createEl("input", {
      type: "text",
      cls: "form-input",
      attr: { placeholder }
    });
    input.value = this.settings[settingKey] || "";
    input.addEventListener("change", async () => {
      const value = input.value.trim();
      const validation = this.pathManager.validatePath(value);
      if (validation.valid || value === "") {
        this.settings[settingKey] = value;
        await this.saveSettings();
        try {
          if (settingKey === "taskFolderPath") {
            await this.pathManager.ensureFolderExists(this.pathManager.getTaskFolderPath());
          } else if (settingKey === "projectFolderPath") {
            await this.pathManager.ensureFolderExists(this.pathManager.getProjectFolderPath());
          } else if (settingKey === "logDataPath") {
            await this.pathManager.ensureFolderExists(this.pathManager.getLogDataPath());
          } else if (settingKey === "reviewDataPath") {
            await this.pathManager.ensureFolderExists(this.pathManager.getReviewDataPath());
          }
        } catch (error) {
        }
      } else {
        new import_obsidian4.Notice(validation.error);
        input.value = this.settings[settingKey] || "";
      }
    });
  }
  createToggleSetting(container, label, settingKey) {
    const group = container.createEl("div", { cls: "form-group checkbox-group" });
    const checkbox = group.createEl("input", {
      type: "checkbox",
      cls: "form-checkbox"
    });
    group.createEl("label", { text: label, cls: "form-label" });
    checkbox.checked = this.settings[settingKey];
    checkbox.addEventListener("change", async () => {
      this.settings[settingKey] = checkbox.checked;
      await this.saveSettings();
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL21hbmFnZXJzL1BhdGhNYW5hZ2VyLnRzIiwgInNyYy9zZXR0aW5ncy50cyIsICJzcmMvbWFuYWdlcnMvUm91dGluZUFsaWFzTWFuYWdlci50cyIsICJzcmMvdmlld3MvVGFza0NodXRlVmlldy50cyIsICJzcmMvc3R5bGVzL2Z1bGwtY3NzLnRzIiwgInNyYy92aWV3cy9UYXNrQ2h1dGVWaWV3LXJlZmFjdG9yZWQudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7XG4gIFBsdWdpbixcbiAgSXRlbVZpZXcsXG4gIFdvcmtzcGFjZUxlYWYsXG4gIE5vdGljZSxcbiAgUGx1Z2luU2V0dGluZ1RhYixcbiAgU2V0dGluZ1xufSBmcm9tICdvYnNpZGlhbic7XG5cbmltcG9ydCB7IFRhc2tDaHV0ZVNldHRpbmdzIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSAnLi9zZXR0aW5ncyc7XG5pbXBvcnQgeyBQYXRoTWFuYWdlciB9IGZyb20gJy4vbWFuYWdlcnMvUGF0aE1hbmFnZXInO1xuaW1wb3J0IHsgUm91dGluZUFsaWFzTWFuYWdlciB9IGZyb20gJy4vbWFuYWdlcnMvUm91dGluZUFsaWFzTWFuYWdlcic7XG5pbXBvcnQgeyBUYXNrQ2h1dGVWaWV3IH0gZnJvbSAnLi92aWV3cy9UYXNrQ2h1dGVWaWV3JztcblxuY29uc3QgVklFV19UWVBFX1RBU0tDSFVURSA9IFwidGFza2NodXRlLXZpZXdcIjtcblxuLy8gUGx1Z2luU2V0dGluZ1RhYiBpbXBsZW1lbnRhdGlvblxuY2xhc3MgVGFza0NodXRlU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICBwbHVnaW46IFRhc2tDaHV0ZVBsdXNQbHVnaW47XG5cbiAgY29uc3RydWN0b3IoYXBwOiBhbnksIHBsdWdpbjogVGFza0NodXRlUGx1c1BsdWdpbikge1xuICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcbiAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgLy8gUGF0aCBzZXR0aW5ncyBzZWN0aW9uXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJcdTMwRDFcdTMwQjlcdThBMkRcdTVCOUFcIikuc2V0SGVhZGluZygpO1xuXG4gICAgLy8gVGFzayBmb2xkZXIgcGF0aFxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCJcdTMwQkZcdTMwQjlcdTMwQUZcdTMwRDVcdTMwQTlcdTMwRUJcdTMwQzBcdTMwRDFcdTMwQjlcIilcbiAgICAgIC5zZXREZXNjKFwiXHUzMEJGXHUzMEI5XHUzMEFGXHUzMEQ1XHUzMEExXHUzMEE0XHUzMEVCXHUzMDkyXHU0RkREXHU1QjU4XHUzMDU5XHUzMDhCXHUzMEQ1XHUzMEE5XHUzMEVCXHUzMEMwXHUzMDZFXHUzMEQxXHUzMEI5XCIpXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFBhdGhNYW5hZ2VyLkRFRkFVTFRfUEFUSFMudGFza0ZvbGRlcilcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0ZvbGRlclBhdGggfHwgXCJcIilcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWxpZGF0aW9uID0gdGhpcy5wbHVnaW4ucGF0aE1hbmFnZXIudmFsaWRhdGVQYXRoKHZhbHVlKTtcbiAgICAgICAgICAgIGlmICh2YWxpZGF0aW9uLnZhbGlkIHx8IHZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tGb2xkZXJQYXRoID0gdmFsdWU7XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgbmV3IE5vdGljZSh2YWxpZGF0aW9uLmVycm9yISk7XG4gICAgICAgICAgICAgIHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0ZvbGRlclBhdGggfHwgXCJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgdGV4dC5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0ZvbGRlclBhdGggfHwgIXRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tGb2xkZXJQYXRoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5wYXRoTWFuYWdlci5lbnN1cmVGb2xkZXJFeGlzdHMoXG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4ucGF0aE1hbmFnZXIuZ2V0VGFza0ZvbGRlclBhdGgoKVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgLy8gRmFpbGVkIHRvIGNyZWF0ZSB0YXNrIGZvbGRlclxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgIC8vIFByb2plY3QgZm9sZGVyIHBhdGhcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiXHUzMEQ3XHUzMEVEXHUzMEI4XHUzMEE3XHUzMEFGXHUzMEM4XHUzMEQ1XHUzMEE5XHUzMEVCXHUzMEMwXHUzMEQxXHUzMEI5XCIpXG4gICAgICAuc2V0RGVzYyhcIlx1MzBEN1x1MzBFRFx1MzBCOFx1MzBBN1x1MzBBRlx1MzBDOFx1MzBENVx1MzBBMVx1MzBBNFx1MzBFQlx1MzA5Mlx1NEZERFx1NUI1OFx1MzA1OVx1MzA4Qlx1MzBENVx1MzBBOVx1MzBFQlx1MzBDMFx1MzA2RVx1MzBEMVx1MzBCOVwiKVxuICAgICAgLmFkZFRleHQoKHRleHQpID0+IHtcbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihQYXRoTWFuYWdlci5ERUZBVUxUX1BBVEhTLnByb2plY3RGb2xkZXIpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnByb2plY3RGb2xkZXJQYXRoIHx8IFwiXCIpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IHRoaXMucGx1Z2luLnBhdGhNYW5hZ2VyLnZhbGlkYXRlUGF0aCh2YWx1ZSk7XG4gICAgICAgICAgICBpZiAodmFsaWRhdGlvbi52YWxpZCB8fCB2YWx1ZSA9PT0gXCJcIikge1xuICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm9qZWN0Rm9sZGVyUGF0aCA9IHZhbHVlO1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG5ldyBOb3RpY2UodmFsaWRhdGlvbi5lcnJvciEpO1xuICAgICAgICAgICAgICB0ZXh0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnByb2plY3RGb2xkZXJQYXRoIHx8IFwiXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAvLyBMb2cgZGF0YSBwYXRoXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIlx1MzBFRFx1MzBCMFx1MzBDN1x1MzBGQ1x1MzBCRlx1MzBEMVx1MzBCOVwiKVxuICAgICAgLnNldERlc2MoXCJcdTMwRURcdTMwQjBcdTMwQzdcdTMwRkNcdTMwQkZcdTMwOTJcdTRGRERcdTVCNThcdTMwNTlcdTMwOEJcdTMwRDVcdTMwQTlcdTMwRUJcdTMwQzBcdTMwNkVcdTMwRDFcdTMwQjlcIilcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoUGF0aE1hbmFnZXIuREVGQVVMVF9QQVRIUy5sb2dEYXRhKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5sb2dEYXRhUGF0aCB8fCBcIlwiKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSB0aGlzLnBsdWdpbi5wYXRoTWFuYWdlci52YWxpZGF0ZVBhdGgodmFsdWUpO1xuICAgICAgICAgICAgaWYgKHZhbGlkYXRpb24udmFsaWQgfHwgdmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubG9nRGF0YVBhdGggPSB2YWx1ZTtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBuZXcgTm90aWNlKHZhbGlkYXRpb24uZXJyb3IhKTtcbiAgICAgICAgICAgICAgdGV4dC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5sb2dEYXRhUGF0aCB8fCBcIlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgLy8gUmV2aWV3IGRhdGEgcGF0aFxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCJcdTMwRUNcdTMwRDNcdTMwRTVcdTMwRkNcdTMwQzdcdTMwRkNcdTMwQkZcdTMwRDFcdTMwQjlcIilcbiAgICAgIC5zZXREZXNjKFwiXHUzMEVDXHUzMEQzXHUzMEU1XHUzMEZDXHUzMEM3XHUzMEZDXHUzMEJGXHUzMDkyXHU0RkREXHU1QjU4XHUzMDU5XHUzMDhCXHUzMEQ1XHUzMEE5XHUzMEVCXHUzMEMwXHUzMDZFXHUzMEQxXHUzMEI5XCIpXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFBhdGhNYW5hZ2VyLkRFRkFVTFRfUEFUSFMucmV2aWV3RGF0YSlcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmV2aWV3RGF0YVBhdGggfHwgXCJcIilcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWxpZGF0aW9uID0gdGhpcy5wbHVnaW4ucGF0aE1hbmFnZXIudmFsaWRhdGVQYXRoKHZhbHVlKTtcbiAgICAgICAgICAgIGlmICh2YWxpZGF0aW9uLnZhbGlkIHx8IHZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnJldmlld0RhdGFQYXRoID0gdmFsdWU7XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgbmV3IE5vdGljZSh2YWxpZGF0aW9uLmVycm9yISk7XG4gICAgICAgICAgICAgIHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmV2aWV3RGF0YVBhdGggfHwgXCJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgIC8vIFZpc3VhbCBlZmZlY3RzIHNldHRpbmdzXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJcdTg5OTZcdTg5OUFcdTUyQjlcdTY3OUNcdThBMkRcdTVCOUFcIikuc2V0SGVhZGluZygpO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIlx1NTJCOVx1Njc5Q1x1OTdGM1x1MzA5Mlx1NjcwOVx1NTJCOVx1NTMxNlwiKVxuICAgICAgLnNldERlc2MoXCJcdTMwQkZcdTMwQjlcdTMwQUZcdTVCOENcdTRFODZcdTY2NDJcdTMwNkJcdTUyQjlcdTY3OUNcdTk3RjNcdTMwOTJcdTUxOERcdTc1MUZcdTMwNTlcdTMwOEJcIilcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cbiAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVNvdW5kKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVNvdW5kID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCJcdTgyQjFcdTcwNkJcdTMwQThcdTMwRDVcdTMwQTdcdTMwQUZcdTMwQzhcdTMwOTJcdTY3MDlcdTUyQjlcdTUzMTZcIilcbiAgICAgIC5zZXREZXNjKFwiXHUzMEJGXHUzMEI5XHUzMEFGXHU1QjhDXHU0RTg2XHU2NjQyXHUzMDZCXHU4MkIxXHU3MDZCXHUzMEE4XHUzMEQ1XHUzMEE3XHUzMEFGXHUzMEM4XHUzMDkyXHU4ODY4XHU3OTNBXHUzMDU5XHUzMDhCXCIpXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVGaXJld29ya3MpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRmlyZXdvcmtzID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCJcdTdEMTlcdTU0MzlcdTk2RUFcdTMwQThcdTMwRDVcdTMwQTdcdTMwQUZcdTMwQzhcdTMwOTJcdTY3MDlcdTUyQjlcdTUzMTZcIilcbiAgICAgIC5zZXREZXNjKFwiXHUzMEJGXHUzMEI5XHUzMEFGXHU1QjhDXHU0RTg2XHU2NjQyXHUzMDZCXHU3RDE5XHU1NDM5XHU5NkVBXHUzMEE4XHUzMEQ1XHUzMEE3XHUzMEFGXHUzMEM4XHUzMDkyXHU4ODY4XHU3OTNBXHUzMDU5XHUzMDhCXCIpXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVDb25mZXR0aSlcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVDb25mZXR0aSA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGFza0NodXRlUGx1c1BsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gIHNldHRpbmdzITogVGFza0NodXRlU2V0dGluZ3M7XG4gIHBhdGhNYW5hZ2VyITogUGF0aE1hbmFnZXI7XG4gIHJvdXRpbmVBbGlhc01hbmFnZXIhOiBSb3V0aW5lQWxpYXNNYW5hZ2VyO1xuICBnbG9iYWxUaW1lckludGVydmFsPzogTm9kZUpTLlRpbWVyIHwgbnVsbDtcblxuICAvLyBTaW1wbGUgbG9nZ2VyL25vdGlmaWNhdGlvbiB3cmFwcGVyXG4gIF9sb2cobGV2ZWw/OiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIChjb25zb2xlIGFzIGFueSlbbGV2ZWwgfHwgJ2xvZyddPy4oLi4uYXJncyk7XG4gICAgfSBjYXRjaCAoXykge31cbiAgfVxuXG4gIF9ub3RpZnkobWVzc2FnZTogc3RyaW5nLCB0aW1lb3V0PzogbnVtYmVyKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIG5ldyBOb3RpY2UobWVzc2FnZSwgdGltZW91dCk7XG4gICAgfSBjYXRjaCAoXykge1xuICAgICAgdGhpcy5fbG9nKCd3YXJuJywgJ1tOb3RpY2VdJywgbWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgb25sb2FkKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIExvYWQgc2V0dGluZ3Mgd2l0aCBkZWZhdWx0c1xuICAgIGNvbnN0IGxvYWRlZCA9IChhd2FpdCB0aGlzLmxvYWREYXRhKCkpIHx8IHt9O1xuICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBsb2FkZWQpO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBQYXRoTWFuYWdlclxuICAgIHRoaXMucGF0aE1hbmFnZXIgPSBuZXcgUGF0aE1hbmFnZXIodGhpcyk7XG5cbiAgICAvLyBJbml0aWFsaXplIFJvdXRpbmVBbGlhc01hbmFnZXJcbiAgICB0aGlzLnJvdXRpbmVBbGlhc01hbmFnZXIgPSBuZXcgUm91dGluZUFsaWFzTWFuYWdlcih0aGlzKTtcbiAgICBhd2FpdCB0aGlzLnJvdXRpbmVBbGlhc01hbmFnZXIubG9hZEFsaWFzZXMoKTtcblxuICAgIC8vIENyZWF0ZSByZXF1aXJlZCBmb2xkZXJzIG9uIGZpcnN0IHN0YXJ0dXBcbiAgICBhd2FpdCB0aGlzLmVuc3VyZVJlcXVpcmVkRm9sZGVycygpO1xuXG4gICAgLy8gQWRkIHNldHRpbmdzIHRhYiBpZiBhdmFpbGFibGVcbiAgICB0cnkge1xuICAgICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBUYXNrQ2h1dGVTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuX2xvZygnd2FybicsICdTZXR0aW5ncyB0YWIgbm90IGF2YWlsYWJsZTonLCBlcnJvcik7XG4gICAgfVxuXG4gICAgLy8gUmVnaXN0ZXIgdmlldyB0eXBlXG4gICAgdGhpcy5yZWdpc3RlclZpZXcoXG4gICAgICBWSUVXX1RZUEVfVEFTS0NIVVRFLFxuICAgICAgKGxlYWYpID0+IG5ldyBUYXNrQ2h1dGVWaWV3KGxlYWYsIHRoaXMpXG4gICAgKTtcblxuICAgIC8vIEFkZCByaWJib24gaWNvblxuICAgIHRoaXMuYWRkUmliYm9uSWNvbihcImNoZWNrbWFya1wiLCBcIlRhc2tDaHV0ZVx1MzA5Mlx1OTU4Qlx1MzA0RlwiLCAoKSA9PiB7XG4gICAgICB0aGlzLmFjdGl2YXRlVGFza0NodXRlVmlldygpO1xuICAgIH0pO1xuXG4gICAgLy8gUmVnaXN0ZXIgY29tbWFuZHNcbiAgICB0aGlzLnJlZ2lzdGVyQ29tbWFuZHMoKTtcbiAgfVxuXG4gIGFzeW5jIG9udW5sb2FkKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIENsZWFyIHRpbWVyIGludGVydmFsc1xuICAgIGlmICh0aGlzLmdsb2JhbFRpbWVySW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5nbG9iYWxUaW1lckludGVydmFsKTtcbiAgICAgIHRoaXMuZ2xvYmFsVGltZXJJbnRlcnZhbCA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gQ2xlYXIgYm91bmRhcnkgY2hlY2sgdGltZW91dFxuICAgIGNvbnN0IHZpZXcgPSB0aGlzLmdldFRhc2tDaHV0ZVZpZXcoKTtcbiAgICBpZiAodmlldyAmJiB2aWV3LmJvdW5kYXJ5Q2hlY2tUaW1lb3V0KSB7XG4gICAgICBjbGVhclRpbWVvdXQodmlldy5ib3VuZGFyeUNoZWNrVGltZW91dCk7XG4gICAgICB2aWV3LmJvdW5kYXJ5Q2hlY2tUaW1lb3V0ID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBDbGVhbiB1cCB2aWV3c1xuICAgIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1RBU0tDSFVURSkuZm9yRWFjaChsZWFmID0+IHtcbiAgICAgIGlmIChsZWFmLnZpZXcgJiYgbGVhZi52aWV3Lm9udW5sb2FkKSB7XG4gICAgICAgIGxlYWYudmlldy5vbnVubG9hZCgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gQ2xlYW4gdXAgb2xkIGxvY2FsU3RvcmFnZSBkYXRhIChvcHRpb25hbClcbiAgICB0cnkge1xuICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgICAgY29uc3QgY3V0b2ZmRGF0ZSA9IG5ldyBEYXRlKHRvZGF5KTtcbiAgICAgIGN1dG9mZkRhdGUuc2V0RGF0ZSh0b2RheS5nZXREYXRlKCkgLSAzMCk7IC8vIFJlbW92ZSBkYXRhIG9sZGVyIHRoYW4gMzAgZGF5c1xuXG4gICAgICBjb25zdCBrZXlzVG9DaGVjayA9IE9iamVjdC5rZXlzKGxvY2FsU3RvcmFnZSk7XG4gICAgICBrZXlzVG9DaGVjay5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgY29uc3QgZGF0ZU1hdGNoID0ga2V5Lm1hdGNoKC90YXNrY2h1dGUtLiotKFxcZHs0fS1cXGR7Mn0tXFxkezJ9KS8pO1xuICAgICAgICBpZiAoZGF0ZU1hdGNoKSB7XG4gICAgICAgICAgY29uc3Qga2V5RGF0ZSA9IG5ldyBEYXRlKGRhdGVNYXRjaFsxXSk7XG4gICAgICAgICAgaWYgKGtleURhdGUgPCBjdXRvZmZEYXRlKSB7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIElnbm9yZSBjbGVhbnVwIGVycm9yc1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVnaXN0ZXJDb21tYW5kcygpOiB2b2lkIHtcbiAgICAvLyBNYWluIFRhc2tDaHV0ZSBjb21tYW5kXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiBcIm9wZW4tdGFza2NodXRlLXZpZXdcIixcbiAgICAgIG5hbWU6IFwiVGFza0NodXRlXHUzMDkyXHU5NThCXHUzMDRGXCIsXG4gICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICB0aGlzLmFjdGl2YXRlVGFza0NodXRlVmlldygpO1xuICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8vIFNldHRpbmdzIGNvbW1hbmRcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6IFwidGFza2NodXRlLXNldHRpbmdzXCIsXG4gICAgICBuYW1lOiBcIlRhc2tDaHV0ZVx1OEEyRFx1NUI5QVwiLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgdGhpcy5zaG93U2V0dGluZ3NNb2RhbCgpO1xuICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8vIFRhc2sgbWFuaXB1bGF0aW9uIGNvbW1hbmRzXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiBcImR1cGxpY2F0ZS1zZWxlY3RlZC10YXNrXCIsXG4gICAgICBuYW1lOiBcIlx1OTA3OFx1NjI5RVx1MzA1NVx1MzA4Q1x1MzA1Rlx1MzBCRlx1MzBCOVx1MzBBRlx1MzA5Mlx1ODkwN1x1ODhGRFwiLFxuICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgdmlldyA9IHRoaXMuZ2V0VGFza0NodXRlVmlldygpO1xuICAgICAgICBpZiAodmlldyAmJiB2aWV3LnNlbGVjdGVkVGFza0luc3RhbmNlKSB7XG4gICAgICAgICAgYXdhaXQgdmlldy5kdXBsaWNhdGVJbnN0YW5jZSh2aWV3LnNlbGVjdGVkVGFza0luc3RhbmNlKTtcbiAgICAgICAgICB2aWV3LmNsZWFyVGFza1NlbGVjdGlvbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ldyBOb3RpY2UoXCJcdTMwQkZcdTMwQjlcdTMwQUZcdTMwNENcdTkwNzhcdTYyOUVcdTMwNTVcdTMwOENcdTMwNjZcdTMwNDRcdTMwN0VcdTMwNUJcdTMwOTNcIik7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6IFwiZGVsZXRlLXNlbGVjdGVkLXRhc2tcIixcbiAgICAgIG5hbWU6IFwiXHU5MDc4XHU2MjlFXHUzMDU1XHUzMDhDXHUzMDVGXHUzMEJGXHUzMEI5XHUzMEFGXHUzMDkyXHU1MjRBXHU5NjY0XCIsXG4gICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICBjb25zdCB2aWV3ID0gdGhpcy5nZXRUYXNrQ2h1dGVWaWV3KCk7XG4gICAgICAgIGlmICh2aWV3ICYmIHZpZXcuc2VsZWN0ZWRUYXNrSW5zdGFuY2UpIHtcbiAgICAgICAgICB2aWV3LmRlbGV0ZVNlbGVjdGVkVGFzaygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ldyBOb3RpY2UoXCJcdTMwQkZcdTMwQjlcdTMwQUZcdTMwNENcdTkwNzhcdTYyOUVcdTMwNTVcdTMwOENcdTMwNjZcdTMwNDRcdTMwN0VcdTMwNUJcdTMwOTNcIik7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6IFwicmVzZXQtc2VsZWN0ZWQtdGFza1wiLFxuICAgICAgbmFtZTogXCJcdTkwNzhcdTYyOUVcdTMwNTVcdTMwOENcdTMwNUZcdTMwQkZcdTMwQjlcdTMwQUZcdTMwOTJcdTY3MkFcdTVCOUZcdTg4NENcdTMwNkJcdTYyM0JcdTMwNTlcIixcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLmdldFRhc2tDaHV0ZVZpZXcoKTtcbiAgICAgICAgaWYgKHZpZXcgJiYgdmlldy5zZWxlY3RlZFRhc2tJbnN0YW5jZSkge1xuICAgICAgICAgIGlmICh2aWV3LnNlbGVjdGVkVGFza0luc3RhbmNlLnN0YXRlICE9PSBcImlkbGVcIikge1xuICAgICAgICAgICAgdmlldy5yZXNldFRhc2tUb0lkbGUodmlldy5zZWxlY3RlZFRhc2tJbnN0YW5jZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJcdTY1RTJcdTMwNkJcdTY3MkFcdTVCOUZcdTg4NENcdTcyQjZcdTYxNEJcdTMwNjdcdTMwNTlcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ldyBOb3RpY2UoXCJcdTMwQkZcdTMwQjlcdTMwQUZcdTMwNENcdTkwNzhcdTYyOUVcdTMwNTVcdTMwOENcdTMwNjZcdTMwNDRcdTMwN0VcdTMwNUJcdTMwOTNcIik7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBUb2RheSdzIHRhc2tzIGNvbW1hbmQgd2l0aCBob3RrZXlcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6IFwic2hvdy10b2RheS10YXNrc1wiLFxuICAgICAgbmFtZTogXCJcdTRFQ0FcdTY1RTVcdTMwNkVcdTMwQkZcdTMwQjlcdTMwQUZcdTMwOTJcdTg4NjhcdTc5M0FcIixcbiAgICAgIGRlc2NyaXB0aW9uOiBcIlNob3cgdG9kYXkncyB0YXNrc1wiLFxuICAgICAgaG90a2V5czogW1xuICAgICAgICB7XG4gICAgICAgICAgbW9kaWZpZXJzOiBbXCJBbHRcIl0sXG4gICAgICAgICAga2V5OiBcInRcIixcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICBjb25zdCB2aWV3ID0gdGhpcy5nZXRUYXNrQ2h1dGVWaWV3KCk7XG4gICAgICAgIGlmICh2aWV3KSB7XG4gICAgICAgICAgdmlldy5zaG93VG9kYXlUYXNrcygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ldyBOb3RpY2UoXCJUYXNrQ2h1dGVcdTMwRDNcdTMwRTVcdTMwRkNcdTMwNENcdTk1OEJcdTMwNEJcdTMwOENcdTMwNjZcdTMwNDRcdTMwN0VcdTMwNUJcdTMwOTNcIik7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBSZW9yZ2FuaXplIGlkbGUgdGFza3MgY29tbWFuZFxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3Jlb3JnYW5pemUtaWRsZS10YXNrcycsXG4gICAgICBuYW1lOiAnXHU2NzJBXHU1QjlGXHU4ODRDXHUzMEJGXHUzMEI5XHUzMEFGXHUzMDkyXHU3M0ZFXHU1NzI4XHUzMDZFXHU2NjQyXHU5NTkzXHU1RTJGXHUzMDZCXHU2NTc0XHU3NDA2JyxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLmdldFRhc2tDaHV0ZVZpZXcoKTtcbiAgICAgICAgaWYgKHZpZXcpIHtcbiAgICAgICAgICB2aWV3LnJlb3JnYW5pemVJZGxlVGFza3MoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXcgTm90aWNlKFwiVGFza0NodXRlXHUzMEQzXHUzMEU1XHUzMEZDXHUzMDRDXHU5NThCXHUzMDRCXHUzMDhDXHUzMDY2XHUzMDQ0XHUzMDdFXHUzMDVCXHUzMDkzXCIpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZW5zdXJlUmVxdWlyZWRGb2xkZXJzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHRhcmdldHM6IFtzdHJpbmcsICgpID0+IHN0cmluZ11bXSA9IFtcbiAgICAgIFtcIlx1MzBCRlx1MzBCOVx1MzBBRlx1MzBENVx1MzBBOVx1MzBFQlx1MzBDMFwiLCAoKSA9PiB0aGlzLnBhdGhNYW5hZ2VyLmdldFRhc2tGb2xkZXJQYXRoKCldLFxuICAgICAgW1wiXHUzMEQ3XHUzMEVEXHUzMEI4XHUzMEE3XHUzMEFGXHUzMEM4XHUzMEQ1XHUzMEE5XHUzMEVCXHUzMEMwXCIsICgpID0+IHRoaXMucGF0aE1hbmFnZXIuZ2V0UHJvamVjdEZvbGRlclBhdGgoKV0sXG4gICAgICBbXCJcdTMwRURcdTMwQjBcdTMwQzdcdTMwRkNcdTMwQkZcdTMwRDVcdTMwQTlcdTMwRUJcdTMwQzBcIiwgKCkgPT4gdGhpcy5wYXRoTWFuYWdlci5nZXRMb2dEYXRhUGF0aCgpXSxcbiAgICAgIFtcIlx1MzBFQ1x1MzBEM1x1MzBFNVx1MzBGQ1x1MzBDN1x1MzBGQ1x1MzBCRlx1MzBENVx1MzBBOVx1MzBFQlx1MzBDMFwiLCAoKSA9PiB0aGlzLnBhdGhNYW5hZ2VyLmdldFJldmlld0RhdGFQYXRoKCldLFxuICAgIF07XG5cbiAgICBmb3IgKGNvbnN0IFtsYWJlbCwgZ2V0dGVyXSBvZiB0YXJnZXRzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBwYXRoID0gZ2V0dGVyKCk7XG4gICAgICAgIGF3YWl0IHRoaXMucGF0aE1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKHBhdGgpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBuZXcgTm90aWNlKGAke2xhYmVsfVx1MzA2RVx1NEY1Q1x1NjIxMFx1MzA2Qlx1NTkzMVx1NjU1N1x1MzA1N1x1MzA3RVx1MzA1N1x1MzA1RmApO1xuICAgICAgICB9IGNhdGNoIChfKSB7XG4gICAgICAgICAgLy8gSWdub3JlIGlmIE5vdGljZSBpcyBub3QgYXZhaWxhYmxlIChlLmcuLCBpbiB0ZXN0cylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHNhdmVTZXR0aW5ncygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICB9XG5cbiAgZ2V0VGFza0NodXRlVmlldygpOiBUYXNrQ2h1dGVWaWV3IHwgbnVsbCB7XG4gICAgY29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1RBU0tDSFVURSlbMF07XG4gICAgaWYgKGxlYWYgJiYgbGVhZi52aWV3IGluc3RhbmNlb2YgVGFza0NodXRlVmlldykge1xuICAgICAgcmV0dXJuIGxlYWYudmlldztcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBhc3luYyBhY3RpdmF0ZVRhc2tDaHV0ZVZpZXcoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgeyB3b3Jrc3BhY2UgfSA9IHRoaXMuYXBwO1xuICAgIC8vIE9wZW4gaW4gYSBuZXcgdGFiIGluIHRoZSBtYWluIHBhbmVcbiAgICBjb25zdCBsZWFmID0gd29ya3NwYWNlLmdldExlYWYodHJ1ZSk7XG4gICAgYXdhaXQgbGVhZi5zZXRWaWV3U3RhdGUoe1xuICAgICAgdHlwZTogVklFV19UWVBFX1RBU0tDSFVURSxcbiAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICB9KTtcbiAgfVxuXG4gIHNob3dTZXR0aW5nc01vZGFsKCk6IHZvaWQge1xuICAgIC8vIENyZWF0ZSBtb2RhbCBvdmVybGF5XG4gICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIG1vZGFsLmNsYXNzTmFtZSA9IFwidGFzay1tb2RhbC1vdmVybGF5XCI7XG4gICAgY29uc3QgbW9kYWxDb250ZW50ID0gbW9kYWwuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwidGFzay1tb2RhbC1jb250ZW50XCIgfSk7XG5cbiAgICAvLyBNb2RhbCBoZWFkZXJcbiAgICBjb25zdCBtb2RhbEhlYWRlciA9IG1vZGFsQ29udGVudC5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJtb2RhbC1oZWFkZXJcIiB9KTtcbiAgICBtb2RhbEhlYWRlci5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJUYXNrQ2h1dGVcdThBMkRcdTVCOUFcIiB9KTtcblxuICAgIC8vIENsb3NlIGJ1dHRvblxuICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gbW9kYWxIZWFkZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuICAgICAgY2xzOiBcIm1vZGFsLWNsb3NlLWJ1dHRvblwiLFxuICAgICAgdGV4dDogXCJcdTAwRDdcIixcbiAgICAgIGF0dHI6IHsgdGl0bGU6IFwiXHU5NTg5XHUzMDU4XHUzMDhCXCIgfSxcbiAgICB9KTtcblxuICAgIC8vIEZvcm0gY29udGFpbmVyXG4gICAgY29uc3QgZm9ybSA9IG1vZGFsQ29udGVudC5jcmVhdGVFbChcImZvcm1cIiwgeyBjbHM6IFwidGFzay1mb3JtXCIgfSk7XG5cbiAgICAvLyBQYXRoIHNldHRpbmdzIHNlY3Rpb25cbiAgICBjb25zdCBwYXRoU2VjdGlvbiA9IGZvcm0uY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwic2V0dGluZ3Mtc2VjdGlvblwiIH0pO1xuICAgIHBhdGhTZWN0aW9uLmNyZWF0ZUVsKFwiaDRcIiwgeyB0ZXh0OiBcIlx1MzBEMVx1MzBCOVx1OEEyRFx1NUI5QVwiIH0pO1xuXG4gICAgLy8gVGFzayBmb2xkZXIgcGF0aFxuICAgIHRoaXMuY3JlYXRlUGF0aFNldHRpbmcoXG4gICAgICBwYXRoU2VjdGlvbixcbiAgICAgIFwiXHUzMEJGXHUzMEI5XHUzMEFGXHUzMEQ1XHUzMEE5XHUzMEVCXHUzMEMwXHUzMEQxXHUzMEI5XCIsXG4gICAgICBcInRhc2tGb2xkZXJQYXRoXCIsXG4gICAgICBQYXRoTWFuYWdlci5ERUZBVUxUX1BBVEhTLnRhc2tGb2xkZXJcbiAgICApO1xuXG4gICAgLy8gUHJvamVjdCBmb2xkZXIgcGF0aFxuICAgIHRoaXMuY3JlYXRlUGF0aFNldHRpbmcoXG4gICAgICBwYXRoU2VjdGlvbixcbiAgICAgIFwiXHUzMEQ3XHUzMEVEXHUzMEI4XHUzMEE3XHUzMEFGXHUzMEM4XHUzMEQ1XHUzMEE5XHUzMEVCXHUzMEMwXHUzMEQxXHUzMEI5XCIsIFxuICAgICAgXCJwcm9qZWN0Rm9sZGVyUGF0aFwiLFxuICAgICAgUGF0aE1hbmFnZXIuREVGQVVMVF9QQVRIUy5wcm9qZWN0Rm9sZGVyXG4gICAgKTtcblxuICAgIC8vIExvZyBkYXRhIHBhdGhcbiAgICB0aGlzLmNyZWF0ZVBhdGhTZXR0aW5nKFxuICAgICAgcGF0aFNlY3Rpb24sXG4gICAgICBcIlx1MzBFRFx1MzBCMFx1MzBDN1x1MzBGQ1x1MzBCRlx1MzBEMVx1MzBCOVwiLFxuICAgICAgXCJsb2dEYXRhUGF0aFwiLCBcbiAgICAgIFBhdGhNYW5hZ2VyLkRFRkFVTFRfUEFUSFMubG9nRGF0YVxuICAgICk7XG5cbiAgICAvLyBSZXZpZXcgZGF0YSBwYXRoXG4gICAgdGhpcy5jcmVhdGVQYXRoU2V0dGluZyhcbiAgICAgIHBhdGhTZWN0aW9uLFxuICAgICAgXCJcdTMwRUNcdTMwRDNcdTMwRTVcdTMwRkNcdTMwQzdcdTMwRkNcdTMwQkZcdTMwRDFcdTMwQjlcIixcbiAgICAgIFwicmV2aWV3RGF0YVBhdGhcIixcbiAgICAgIFBhdGhNYW5hZ2VyLkRFRkFVTFRfUEFUSFMucmV2aWV3RGF0YVxuICAgICk7XG5cbiAgICAvLyBFZmZlY3RzIHNldHRpbmdzIHNlY3Rpb25cbiAgICBjb25zdCBlZmZlY3RzU2VjdGlvbiA9IGZvcm0uY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwic2V0dGluZ3Mtc2VjdGlvblwiIH0pO1xuICAgIGVmZmVjdHNTZWN0aW9uLmNyZWF0ZUVsKFwiaDRcIiwgeyB0ZXh0OiBcIlx1ODk5Nlx1ODk5QVx1NTJCOVx1Njc5Q1x1OEEyRFx1NUI5QVwiIH0pO1xuXG4gICAgdGhpcy5jcmVhdGVUb2dnbGVTZXR0aW5nKGVmZmVjdHNTZWN0aW9uLCBcIlx1NTJCOVx1Njc5Q1x1OTdGM1x1MzA5Mlx1NjcwOVx1NTJCOVx1NTMxNlwiLCBcImVuYWJsZVNvdW5kXCIpO1xuICAgIHRoaXMuY3JlYXRlVG9nZ2xlU2V0dGluZyhlZmZlY3RzU2VjdGlvbiwgXCJcdTgyQjFcdTcwNkJcdTMwQThcdTMwRDVcdTMwQTdcdTMwQUZcdTMwQzhcdTMwOTJcdTY3MDlcdTUyQjlcdTUzMTZcIiwgXCJlbmFibGVGaXJld29ya3NcIik7XG4gICAgdGhpcy5jcmVhdGVUb2dnbGVTZXR0aW5nKGVmZmVjdHNTZWN0aW9uLCBcIlx1N0QxOVx1NTQzOVx1OTZFQVx1MzBBOFx1MzBENVx1MzBBN1x1MzBBRlx1MzBDOFx1MzA5Mlx1NjcwOVx1NTJCOVx1NTMxNlwiLCBcImVuYWJsZUNvbmZldHRpXCIpO1xuXG4gICAgLy8gRXZlbnQgbGlzdGVuZXJzXG4gICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobW9kYWwpO1xuICAgIH0pO1xuXG4gICAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICBpZiAoZS50YXJnZXQgPT09IG1vZGFsKSB7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobW9kYWwpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gQWRkIHRvIERPTVxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobW9kYWwpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVQYXRoU2V0dGluZyhjb250YWluZXI6IEhUTUxFbGVtZW50LCBsYWJlbDogc3RyaW5nLCBzZXR0aW5nS2V5OiBrZXlvZiBUYXNrQ2h1dGVTZXR0aW5ncywgcGxhY2Vob2xkZXI6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IGdyb3VwID0gY29udGFpbmVyLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcImZvcm0tZ3JvdXBcIiB9KTtcbiAgICBncm91cC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogbGFiZWwgKyBcIjpcIiwgY2xzOiBcImZvcm0tbGFiZWxcIiB9KTtcbiAgICBjb25zdCBpbnB1dCA9IGdyb3VwLmNyZWF0ZUVsKFwiaW5wdXRcIiwge1xuICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICBjbHM6IFwiZm9ybS1pbnB1dFwiLFxuICAgICAgYXR0cjogeyBwbGFjZWhvbGRlciB9XG4gICAgfSkgYXMgSFRNTElucHV0RWxlbWVudDtcblxuICAgIGlucHV0LnZhbHVlID0gKHRoaXMuc2V0dGluZ3Nbc2V0dGluZ0tleV0gYXMgc3RyaW5nKSB8fCBcIlwiO1xuXG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGlucHV0LnZhbHVlLnRyaW0oKTtcbiAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSB0aGlzLnBhdGhNYW5hZ2VyLnZhbGlkYXRlUGF0aCh2YWx1ZSk7XG4gICAgICBcbiAgICAgIGlmICh2YWxpZGF0aW9uLnZhbGlkIHx8IHZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICh0aGlzLnNldHRpbmdzW3NldHRpbmdLZXldIGFzIHN0cmluZykgPSB2YWx1ZTtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFRyeSB0byBjcmVhdGUgZm9sZGVyXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKHNldHRpbmdLZXkgPT09IFwidGFza0ZvbGRlclBhdGhcIikge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXRoTWFuYWdlci5lbnN1cmVGb2xkZXJFeGlzdHModGhpcy5wYXRoTWFuYWdlci5nZXRUYXNrRm9sZGVyUGF0aCgpKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHNldHRpbmdLZXkgPT09IFwicHJvamVjdEZvbGRlclBhdGhcIikge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXRoTWFuYWdlci5lbnN1cmVGb2xkZXJFeGlzdHModGhpcy5wYXRoTWFuYWdlci5nZXRQcm9qZWN0Rm9sZGVyUGF0aCgpKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHNldHRpbmdLZXkgPT09IFwibG9nRGF0YVBhdGhcIikge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXRoTWFuYWdlci5lbnN1cmVGb2xkZXJFeGlzdHModGhpcy5wYXRoTWFuYWdlci5nZXRMb2dEYXRhUGF0aCgpKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHNldHRpbmdLZXkgPT09IFwicmV2aWV3RGF0YVBhdGhcIikge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXRoTWFuYWdlci5lbnN1cmVGb2xkZXJFeGlzdHModGhpcy5wYXRoTWFuYWdlci5nZXRSZXZpZXdEYXRhUGF0aCgpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgLy8gSWdub3JlIGZvbGRlciBjcmVhdGlvbiBlcnJvcnNcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZSh2YWxpZGF0aW9uLmVycm9yISk7XG4gICAgICAgIGlucHV0LnZhbHVlID0gKHRoaXMuc2V0dGluZ3Nbc2V0dGluZ0tleV0gYXMgc3RyaW5nKSB8fCBcIlwiO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVUb2dnbGVTZXR0aW5nKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGxhYmVsOiBzdHJpbmcsIHNldHRpbmdLZXk6IGtleW9mIFRhc2tDaHV0ZVNldHRpbmdzKTogdm9pZCB7XG4gICAgY29uc3QgZ3JvdXAgPSBjb250YWluZXIuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwiZm9ybS1ncm91cCBjaGVja2JveC1ncm91cFwiIH0pO1xuICAgIGNvbnN0IGNoZWNrYm94ID0gZ3JvdXAuY3JlYXRlRWwoXCJpbnB1dFwiLCB7XG4gICAgICB0eXBlOiBcImNoZWNrYm94XCIsXG4gICAgICBjbHM6IFwiZm9ybS1jaGVja2JveFwiXG4gICAgfSkgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBcbiAgICBncm91cC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogbGFiZWwsIGNsczogXCJmb3JtLWxhYmVsXCIgfSk7XG5cbiAgICBjaGVja2JveC5jaGVja2VkID0gdGhpcy5zZXR0aW5nc1tzZXR0aW5nS2V5XSBhcyBib29sZWFuO1xuXG4gICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAodGhpcy5zZXR0aW5nc1tzZXR0aW5nS2V5XSBhcyBib29sZWFuKSA9IGNoZWNrYm94LmNoZWNrZWQ7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgIH0pO1xuICB9XG59IiwgImltcG9ydCB7IFBsdWdpbiwgbm9ybWFsaXplUGF0aCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFRhc2tDaHV0ZVNldHRpbmdzIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgUGF0aE1hbmFnZXIge1xuICBwcml2YXRlIHBsdWdpbjogUGx1Z2luICYgeyBzZXR0aW5nczogVGFza0NodXRlU2V0dGluZ3MgfTtcblxuICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbiAmIHsgc2V0dGluZ3M6IFRhc2tDaHV0ZVNldHRpbmdzIH0pIHtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIHN0YXRpYyBERUZBVUxUX1BBVEhTID0ge1xuICAgIHRhc2tGb2xkZXI6IFwiVGFza0NodXRlL1Rhc2tcIixcbiAgICBwcm9qZWN0Rm9sZGVyOiBcIlRhc2tDaHV0ZS9Qcm9qZWN0XCIsXG4gICAgbG9nRGF0YTogXCJUYXNrQ2h1dGUvTG9nXCIsXG4gICAgcmV2aWV3RGF0YTogXCJUYXNrQ2h1dGUvUmV2aWV3XCIsXG4gIH07XG5cbiAgZ2V0VGFza0ZvbGRlclBhdGgoKTogc3RyaW5nIHtcbiAgICBjb25zdCBwYXRoID1cbiAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tGb2xkZXJQYXRoIHx8XG4gICAgICBQYXRoTWFuYWdlci5ERUZBVUxUX1BBVEhTLnRhc2tGb2xkZXI7XG4gICAgcmV0dXJuIG5vcm1hbGl6ZVBhdGgocGF0aCk7XG4gIH1cblxuICBnZXRQcm9qZWN0Rm9sZGVyUGF0aCgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHBhdGggPVxuICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvamVjdEZvbGRlclBhdGggfHxcbiAgICAgIFBhdGhNYW5hZ2VyLkRFRkFVTFRfUEFUSFMucHJvamVjdEZvbGRlcjtcbiAgICByZXR1cm4gbm9ybWFsaXplUGF0aChwYXRoKTtcbiAgfVxuXG4gIGdldExvZ0RhdGFQYXRoKCk6IHN0cmluZyB7XG4gICAgY29uc3QgcGF0aCA9XG4gICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5sb2dEYXRhUGF0aCB8fCBQYXRoTWFuYWdlci5ERUZBVUxUX1BBVEhTLmxvZ0RhdGE7XG4gICAgcmV0dXJuIG5vcm1hbGl6ZVBhdGgocGF0aCk7XG4gIH1cblxuICBnZXRSZXZpZXdEYXRhUGF0aCgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHBhdGggPVxuICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucmV2aWV3RGF0YVBhdGggfHxcbiAgICAgIFBhdGhNYW5hZ2VyLkRFRkFVTFRfUEFUSFMucmV2aWV3RGF0YTtcbiAgICByZXR1cm4gbm9ybWFsaXplUGF0aChwYXRoKTtcbiAgfVxuXG4gIGdldExvZ1llYXJQYXRoKHllYXI6IG51bWJlciB8IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgbG9nUGF0aCA9IHRoaXMuZ2V0TG9nRGF0YVBhdGgoKTtcbiAgICByZXR1cm4gbm9ybWFsaXplUGF0aChgJHtsb2dQYXRofS8ke3llYXJ9YCk7XG4gIH1cblxuICBhc3luYyBlbnN1cmVZZWFyRm9sZGVyKHllYXI6IG51bWJlciB8IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3QgeWVhclBhdGggPSB0aGlzLmdldExvZ1llYXJQYXRoKHllYXIpO1xuICAgIGF3YWl0IHRoaXMuZW5zdXJlRm9sZGVyRXhpc3RzKHllYXJQYXRoKTtcbiAgICByZXR1cm4geWVhclBhdGg7XG4gIH1cblxuICB2YWxpZGF0ZVBhdGgocGF0aDogc3RyaW5nKTogeyB2YWxpZDogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmcgfSB7XG4gICAgaWYgKHBhdGguc3RhcnRzV2l0aChcIi9cIikgfHwgcGF0aC5tYXRjaCgvXltBLVphLXpdOlxcXFwvKSkge1xuICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBlcnJvcjogXCJcdTdENzZcdTVCRkVcdTMwRDFcdTMwQjlcdTMwNkZcdTRGN0ZcdTc1MjhcdTMwNjdcdTMwNERcdTMwN0VcdTMwNUJcdTMwOTNcIiB9O1xuICAgIH1cbiAgICBpZiAocGF0aC5pbmNsdWRlcyhcIi4uXCIpKSB7XG4gICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yOiBcIlx1MzBEMVx1MzBCOVx1MzA2QicuLidcdTMwOTJcdTU0MkJcdTMwODFcdTMwOEJcdTMwNTNcdTMwNjhcdTMwNkZcdTMwNjdcdTMwNERcdTMwN0VcdTMwNUJcdTMwOTNcIiB9O1xuICAgIH1cbiAgICBpZiAocGF0aC5tYXRjaCgvWzw+XCJ8PypdLykpIHtcbiAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgZXJyb3I6IFwiXHUzMEQxXHUzMEI5XHUzMDZCXHU3Mjc5XHU2QjhBXHU2NTg3XHU1QjU3XHUzMDkyXHU1NDJCXHUzMDgxXHUzMDhCXHUzMDUzXHUzMDY4XHUzMDZGXHUzMDY3XHUzMDREXHUzMDdFXHUzMDVCXHUzMDkzXCIgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUgfTtcbiAgfVxuXG4gIGFzeW5jIGVuc3VyZUZvbGRlckV4aXN0cyhwYXRoOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBmb2xkZXIgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGgpO1xuICAgIGlmICghZm9sZGVyKSB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKHBhdGgpO1xuICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICBpZiAoZXJyb3IubWVzc2FnZSAmJiBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKFwiRm9sZGVyIGFscmVhZHkgZXhpc3RzXCIpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSIsICJpbXBvcnQgeyBUYXNrQ2h1dGVTZXR0aW5ncyB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgUGF0aE1hbmFnZXIgfSBmcm9tICcuL21hbmFnZXJzL1BhdGhNYW5hZ2VyJztcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFRhc2tDaHV0ZVNldHRpbmdzID0ge1xuICB0YXNrRm9sZGVyUGF0aDogUGF0aE1hbmFnZXIuREVGQVVMVF9QQVRIUy50YXNrRm9sZGVyLFxuICBwcm9qZWN0Rm9sZGVyUGF0aDogUGF0aE1hbmFnZXIuREVGQVVMVF9QQVRIUy5wcm9qZWN0Rm9sZGVyLFxuICBsb2dEYXRhUGF0aDogUGF0aE1hbmFnZXIuREVGQVVMVF9QQVRIUy5sb2dEYXRhLFxuICByZXZpZXdEYXRhUGF0aDogUGF0aE1hbmFnZXIuREVGQVVMVF9QQVRIUy5yZXZpZXdEYXRhLFxuICBlbmFibGVTb3VuZDogZmFsc2UsXG4gIGVuYWJsZUZpcmV3b3JrczogZmFsc2UsXG4gIGVuYWJsZUNvbmZldHRpOiBmYWxzZSxcbn07IiwgImltcG9ydCB7IFBsdWdpbiwgbm9ybWFsaXplUGF0aCwgTm90aWNlLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFBhdGhNYW5hZ2VyIH0gZnJvbSAnLi9QYXRoTWFuYWdlcic7XG5pbXBvcnQgeyBUYXNrQ2h1dGVTZXR0aW5ncyB9IGZyb20gJy4uL3R5cGVzJztcblxuaW50ZXJmYWNlIFBsdWdpbldpdGhNYW5hZ2VycyBleHRlbmRzIFBsdWdpbiB7XG4gIHNldHRpbmdzOiBUYXNrQ2h1dGVTZXR0aW5ncztcbiAgcGF0aE1hbmFnZXI6IFBhdGhNYW5hZ2VyO1xuICBfbm90aWZ5PzogKG1lc3NhZ2U6IHN0cmluZykgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGNsYXNzIFJvdXRpbmVBbGlhc01hbmFnZXIge1xuICBwcml2YXRlIHBsdWdpbjogUGx1Z2luV2l0aE1hbmFnZXJzO1xuICBwcml2YXRlIGFsaWFzQ2FjaGU6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPiB8IG51bGwgPSBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luV2l0aE1hbmFnZXJzKSB7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cblxuICBnZXRBbGlhc0ZpbGVQYXRoKCk6IHN0cmluZyB7XG4gICAgY29uc3QgdGFza0ZvbGRlclBhdGggPSB0aGlzLnBsdWdpbi5wYXRoTWFuYWdlci5nZXRUYXNrRm9sZGVyUGF0aCgpO1xuICAgIHJldHVybiBub3JtYWxpemVQYXRoKGAke3Rhc2tGb2xkZXJQYXRofS9yb3V0aW5lLWFsaWFzZXMuanNvbmApO1xuICB9XG5cbiAgYXN5bmMgbG9hZEFsaWFzZXMoKTogUHJvbWlzZTxSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4+IHtcbiAgICBpZiAodGhpcy5hbGlhc0NhY2hlKSByZXR1cm4gdGhpcy5hbGlhc0NhY2hlO1xuICAgIFxuICAgIGNvbnN0IHBhdGggPSB0aGlzLmdldEFsaWFzRmlsZVBhdGgoKTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZmlsZSA9IHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocGF0aCk7XG4gICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgdGhpcy5hbGlhc0NhY2hlID0gSlNPTi5wYXJzZShjb250ZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYWxpYXNDYWNoZSA9IHt9O1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAodGhpcy5wbHVnaW4uX25vdGlmeSkge1xuICAgICAgICB0aGlzLnBsdWdpbi5fbm90aWZ5KFwiXHUzMEVCXHUzMEZDXHUzMEMxXHUzMEYzXHUzMEJGXHUzMEI5XHUzMEFGXHUzMDZFXHU1NDBEXHU1MjREXHU1OTA5XHU2NkY0XHU1QzY1XHU2Qjc0XHUzMDZFXHU4QUFEXHUzMDdGXHU4RkJDXHUzMDdGXHUzMDZCXHU1OTMxXHU2NTU3XHUzMDU3XHUzMDdFXHUzMDU3XHUzMDVGXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZShcIlx1MzBFQlx1MzBGQ1x1MzBDMVx1MzBGM1x1MzBCRlx1MzBCOVx1MzBBRlx1MzA2RVx1NTQwRFx1NTI0RFx1NTkwOVx1NjZGNFx1NUM2NVx1NkI3NFx1MzA2RVx1OEFBRFx1MzA3Rlx1OEZCQ1x1MzA3Rlx1MzA2Qlx1NTkzMVx1NjU1N1x1MzA1N1x1MzA3RVx1MzA1N1x1MzA1RlwiKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuYWxpYXNDYWNoZSA9IHt9O1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdGhpcy5hbGlhc0NhY2hlO1xuICB9XG5cbiAgYXN5bmMgc2F2ZUFsaWFzZXMoYWxpYXNlczogUmVjb3JkPHN0cmluZywgc3RyaW5nW10+KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhdGggPSB0aGlzLmdldEFsaWFzRmlsZVBhdGgoKTtcbiAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGgpO1xuICAgICAgY29uc3QgY29udGVudCA9IEpTT04uc3RyaW5naWZ5KGFsaWFzZXMsIG51bGwsIDIpO1xuICAgICAgXG4gICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5tb2RpZnkoZmlsZSwgY29udGVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuY3JlYXRlKHBhdGgsIGNvbnRlbnQpO1xuICAgICAgfVxuICAgICAgXG4gICAgICB0aGlzLmFsaWFzQ2FjaGUgPSBhbGlhc2VzO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAodGhpcy5wbHVnaW4uX25vdGlmeSkge1xuICAgICAgICB0aGlzLnBsdWdpbi5fbm90aWZ5KFwiXHUzMEVCXHUzMEZDXHUzMEMxXHUzMEYzXHUzMEJGXHUzMEI5XHUzMEFGXHUzMDZFXHU1NDBEXHU1MjREXHU1OTA5XHU2NkY0XHU1QzY1XHU2Qjc0XHUzMDZFXHU0RkREXHU1QjU4XHUzMDZCXHU1OTMxXHU2NTU3XHUzMDU3XHUzMDdFXHUzMDU3XHUzMDVGXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZShcIlx1MzBFQlx1MzBGQ1x1MzBDMVx1MzBGM1x1MzBCRlx1MzBCOVx1MzBBRlx1MzA2RVx1NTQwRFx1NTI0RFx1NTkwOVx1NjZGNFx1NUM2NVx1NkI3NFx1MzA2RVx1NEZERFx1NUI1OFx1MzA2Qlx1NTkzMVx1NjU1N1x1MzA1N1x1MzA3RVx1MzA1N1x1MzA1RlwiKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBhZGRBbGlhcyhuZXdOYW1lOiBzdHJpbmcsIG9sZE5hbWU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGFsaWFzZXMgPSBhd2FpdCB0aGlzLmxvYWRBbGlhc2VzKCk7XG4gICAgXG4gICAgaWYgKCFhbGlhc2VzW25ld05hbWVdKSB7XG4gICAgICBhbGlhc2VzW25ld05hbWVdID0gW107XG4gICAgfVxuICAgIFxuICAgIGlmIChhbGlhc2VzW29sZE5hbWVdKSB7XG4gICAgICBhbGlhc2VzW25ld05hbWVdID0gWy4uLmFsaWFzZXNbb2xkTmFtZV0sIG9sZE5hbWVdO1xuICAgICAgZGVsZXRlIGFsaWFzZXNbb2xkTmFtZV07XG4gICAgfSBlbHNlIHtcbiAgICAgIGFsaWFzZXNbbmV3TmFtZV0ucHVzaChvbGROYW1lKTtcbiAgICB9XG4gICAgXG4gICAgYWxpYXNlc1tuZXdOYW1lXSA9IFsuLi5uZXcgU2V0KGFsaWFzZXNbbmV3TmFtZV0pXTtcbiAgICBhd2FpdCB0aGlzLnNhdmVBbGlhc2VzKGFsaWFzZXMpO1xuICB9XG5cbiAgZ2V0QWxpYXNlcyh0YXNrTmFtZTogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIHJldHVybiB0aGlzLmFsaWFzQ2FjaGU/Llt0YXNrTmFtZV0gfHwgW107XG4gIH1cblxuICBnZXRBbGxQb3NzaWJsZU5hbWVzKHRhc2tOYW1lOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgbmFtZXMgPSBuZXcgU2V0KFt0YXNrTmFtZV0pO1xuICAgIGNvbnN0IGRpcmVjdEFsaWFzZXMgPSB0aGlzLmdldEFsaWFzZXModGFza05hbWUpO1xuICAgIGRpcmVjdEFsaWFzZXMuZm9yRWFjaCgoYWxpYXMpID0+IG5hbWVzLmFkZChhbGlhcykpO1xuICAgIFxuICAgIGNvbnN0IGN1cnJlbnROYW1lID0gdGhpcy5maW5kQ3VycmVudE5hbWUodGFza05hbWUpO1xuICAgIGlmIChjdXJyZW50TmFtZSkge1xuICAgICAgbmFtZXMuYWRkKGN1cnJlbnROYW1lKTtcbiAgICAgIGNvbnN0IGN1cnJlbnRBbGlhc2VzID0gdGhpcy5nZXRBbGlhc2VzKGN1cnJlbnROYW1lKTtcbiAgICAgIGN1cnJlbnRBbGlhc2VzLmZvckVhY2goKGFsaWFzKSA9PiBuYW1lcy5hZGQoYWxpYXMpKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIEFycmF5LmZyb20obmFtZXMpO1xuICB9XG5cbiAgZmluZEN1cnJlbnROYW1lKG9sZE5hbWU6IHN0cmluZywgdmlzaXRlZDogU2V0PHN0cmluZz4gPSBuZXcgU2V0KCkpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBpZiAoIXRoaXMuYWxpYXNDYWNoZSkgcmV0dXJuIG51bGw7XG4gICAgaWYgKHZpc2l0ZWQuaGFzKG9sZE5hbWUpKSByZXR1cm4gbnVsbDtcbiAgICB2aXNpdGVkLmFkZChvbGROYW1lKTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IFtjdXJyZW50LCBhbGlhc2VzXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLmFsaWFzQ2FjaGUpKSB7XG4gICAgICBpZiAoYWxpYXNlcy5pbmNsdWRlcyhvbGROYW1lKSkge1xuICAgICAgICByZXR1cm4gY3VycmVudDtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn0iLCAiaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIFRGaWxlLCBURm9sZGVyLCBOb3RpY2UsIG5vcm1hbGl6ZVBhdGggfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBcbiAgVGFza0RhdGEsIFxuICBUYXNrSW5zdGFuY2UsIFxuICBEZWxldGVkSW5zdGFuY2UsIFxuICBIaWRkZW5Sb3V0aW5lLCBcbiAgRHVwbGljYXRlZEluc3RhbmNlLCBcbiAgTmF2aWdhdGlvblN0YXRlLCBcbiAgVGFza05hbWVWYWxpZGF0b3IsXG4gIEF1dG9jb21wbGV0ZUluc3RhbmNlIFxufSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBUQVNLQ0hVVEVfRlVMTF9DU1MgfSBmcm9tICcuLi9zdHlsZXMvZnVsbC1jc3MnO1xuaW1wb3J0IHsgbG9hZFRhc2tzUmVmYWN0b3JlZCB9IGZyb20gJy4vVGFza0NodXRlVmlldy1yZWZhY3RvcmVkJztcblxuLy8gVklFV19UWVBFX1RBU0tDSFVURSBpcyBkZWZpbmVkIGluIG1haW4udHNcblxuY2xhc3MgTmF2aWdhdGlvblN0YXRlTWFuYWdlciBpbXBsZW1lbnRzIE5hdmlnYXRpb25TdGF0ZSB7XG4gIHNlbGVjdGVkU2VjdGlvbjogJ3JvdXRpbmUnIHwgJ3JldmlldycgfCAnbG9nJyB8ICdwcm9qZWN0JyB8IG51bGwgPSBudWxsO1xuICBpc09wZW46IGJvb2xlYW4gPSBmYWxzZTtcbn1cblxuZXhwb3J0IGNsYXNzIFRhc2tDaHV0ZVZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XG4gIC8vIENvcmUgUHJvcGVydGllc1xuICBwcml2YXRlIHBsdWdpbjogYW55O1xuICBwcml2YXRlIHRhc2tzOiBUYXNrRGF0YVtdID0gW107XG4gIHByaXZhdGUgdGFza0luc3RhbmNlczogVGFza0luc3RhbmNlW10gPSBbXTtcbiAgcHJpdmF0ZSBjdXJyZW50SW5zdGFuY2U6IFRhc2tJbnN0YW5jZSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGdsb2JhbFRpbWVySW50ZXJ2YWw6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgbG9nVmlldzogYW55ID0gbnVsbDtcbiAgXG4gIC8vIERhdGUgTmF2aWdhdGlvblxuICBwcml2YXRlIGN1cnJlbnREYXRlOiBEYXRlO1xuICBcbiAgLy8gVUkgRWxlbWVudHNcbiAgcHJpdmF0ZSB0YXNrTGlzdDogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgbmF2aWdhdGlvblBhbmVsOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBuYXZpZ2F0aW9uT3ZlcmxheTogSFRNTEVsZW1lbnQ7XG4gIFxuICAvLyBTdGF0ZSBNYW5hZ2VtZW50XG4gIHByaXZhdGUgdXNlT3JkZXJCYXNlZFNvcnQ6IGJvb2xlYW47XG4gIHByaXZhdGUgbmF2aWdhdGlvblN0YXRlOiBOYXZpZ2F0aW9uU3RhdGVNYW5hZ2VyO1xuICBwcml2YXRlIHNlbGVjdGVkVGFza0luc3RhbmNlOiBUYXNrSW5zdGFuY2UgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBhdXRvY29tcGxldGVJbnN0YW5jZXM6IEF1dG9jb21wbGV0ZUluc3RhbmNlW10gPSBbXTtcbiAgXG4gIC8vIEJvdW5kYXJ5IENoZWNrIChpZGxlLXRhc2stYXV0by1tb3ZlIGZlYXR1cmUpXG4gIHByaXZhdGUgYm91bmRhcnlDaGVja1RpbWVvdXQ6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XG4gIFxuICAvLyBEZWJvdW5jZSBUaW1lclxuICBwcml2YXRlIHJlbmRlckRlYm91bmNlVGltZXI6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XG5cbiAgLy8gVGFzayBOYW1lIFZhbGlkYXRvclxuICBwcml2YXRlIFRhc2tOYW1lVmFsaWRhdG9yOiBUYXNrTmFtZVZhbGlkYXRvciA9IHtcbiAgICBJTlZBTElEX0NIQVJTX1BBVFRFUk46IC9bOnxcXC9cXFxcI15dL2csXG4gICAgXG4gICAgdmFsaWRhdGUodGFza05hbWU6IHN0cmluZykge1xuICAgICAgY29uc3QgaW52YWxpZENoYXJzID0gdGFza05hbWUubWF0Y2godGhpcy5JTlZBTElEX0NIQVJTX1BBVFRFUk4pO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaXNWYWxpZDogIWludmFsaWRDaGFycyxcbiAgICAgICAgaW52YWxpZENoYXJzOiBpbnZhbGlkQ2hhcnMgPyBbLi4ubmV3IFNldChpbnZhbGlkQ2hhcnMpXSA6IFtdLFxuICAgICAgfTtcbiAgICB9LFxuICAgIFxuICAgIGdldEVycm9yTWVzc2FnZShpbnZhbGlkQ2hhcnM6IHN0cmluZ1tdKSB7XG4gICAgICByZXR1cm4gYFx1NEY3Rlx1NzUyOFx1MzA2N1x1MzA0RFx1MzA2QVx1MzA0NFx1NjU4N1x1NUI1N1x1MzA0Q1x1NTQyQlx1MzA3RVx1MzA4Q1x1MzA2Nlx1MzA0NFx1MzA3RVx1MzA1OTogJHtpbnZhbGlkQ2hhcnMuam9pbihcIiwgXCIpfWA7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBsdWdpbjogYW55KSB7XG4gICAgc3VwZXIobGVhZik7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgXG4gICAgLy8gSW5pdGlhbGl6ZSBjdXJyZW50IGRhdGVcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgdGhpcy5jdXJyZW50RGF0ZSA9IG5ldyBEYXRlKFxuICAgICAgdG9kYXkuZ2V0RnVsbFllYXIoKSxcbiAgICAgIHRvZGF5LmdldE1vbnRoKCksXG4gICAgICB0b2RheS5nZXREYXRlKClcbiAgICApO1xuICAgIFxuICAgIC8vIEluaXRpYWxpemUgc29ydCBwcmVmZXJlbmNlXG4gICAgdGhpcy51c2VPcmRlckJhc2VkU29ydCA9IFxuICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0YXNrY2h1dGUtdXNlLW9yZGVyLXNvcnRcIikgIT09IFwiZmFsc2VcIjtcbiAgICBcbiAgICAvLyBJbml0aWFsaXplIG5hdmlnYXRpb24gc3RhdGVcbiAgICB0aGlzLm5hdmlnYXRpb25TdGF0ZSA9IG5ldyBOYXZpZ2F0aW9uU3RhdGVNYW5hZ2VyKCk7XG4gIH1cblxuICBnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBcInRhc2tjaHV0ZS12aWV3XCI7XG4gIH1cblxuICBnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBcIlRhc2tDaHV0ZVwiO1xuICB9XG5cbiAgZ2V0SWNvbigpOiBzdHJpbmcge1xuICAgIHJldHVybiBcImNoZWNrbWFya1wiO1xuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBDb3JlIExpZmVjeWNsZSBNZXRob2RzXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICBhc3luYyBvbk9wZW4oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXSBhcyBIVE1MRWxlbWVudDtcbiAgICBjb250YWluZXIuZW1wdHkoKTtcblxuICAgIC8vIFNjaGVkdWxlIGJvdW5kYXJ5IGNoZWNrIGZvciBpZGxlLXRhc2stYXV0by1tb3ZlXG4gICAgdGhpcy5zY2hlZHVsZUJvdW5kYXJ5Q2hlY2soKTtcblxuICAgIGF3YWl0IHRoaXMuc2V0dXBVSShjb250YWluZXIpO1xuICAgIGF3YWl0IHRoaXMubG9hZFRhc2tzKCk7XG4gICAgdGhpcy5hcHBseVN0eWxlcygpO1xuICAgIHRoaXMuc2V0dXBSZXNpemVPYnNlcnZlcigpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZU5hdmlnYXRpb25FdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuc2V0dXBFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgYXN5bmMgb25DbG9zZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBDbGVhbiB1cCBhdXRvY29tcGxldGUgaW5zdGFuY2VzXG4gICAgdGhpcy5jbGVhbnVwQXV0b2NvbXBsZXRlSW5zdGFuY2VzKCk7XG4gICAgXG4gICAgLy8gQ2xlYW4gdXAgdGltZXJzXG4gICAgdGhpcy5jbGVhbnVwVGltZXJzKCk7XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIFVJIFNldHVwIE1ldGhvZHNcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIHByaXZhdGUgYXN5bmMgc2V0dXBVSShjb250YWluZXI6IEhUTUxFbGVtZW50KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gVG9wIGJhciBjb250YWluZXIgKGRhdGUgbmF2aWdhdGlvbiBhbmQgZHJhd2VyIGljb24pXG4gICAgY29uc3QgdG9wQmFyQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZUVsKFwiZGl2XCIsIHtcbiAgICAgIGNsczogXCJ0b3AtYmFyLWNvbnRhaW5lclwiLFxuICAgIH0pO1xuXG4gICAgdGhpcy5jcmVhdGVEcmF3ZXJUb2dnbGUodG9wQmFyQ29udGFpbmVyKTtcbiAgICB0aGlzLmNyZWF0ZURhdGVOYXZpZ2F0aW9uKHRvcEJhckNvbnRhaW5lcik7XG4gICAgdGhpcy5jcmVhdGVBY3Rpb25CdXR0b25zKHRvcEJhckNvbnRhaW5lcik7XG5cbiAgICAvLyBNYWluIGNvbnRhaW5lclxuICAgIGNvbnN0IG1haW5Db250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRWwoXCJkaXZcIiwge1xuICAgICAgY2xzOiBcInRhc2tjaHV0ZS1jb250YWluZXJcIixcbiAgICB9KTtcblxuICAgIC8vIENvbnRlbnQgY29udGFpbmVyIGZvciBuYXZpZ2F0aW9uIHBhbmVsIGFuZCB0YXNrIGxpc3RcbiAgICBjb25zdCBjb250ZW50Q29udGFpbmVyID0gbWFpbkNvbnRhaW5lci5jcmVhdGVFbChcImRpdlwiLCB7XG4gICAgICBjbHM6IFwibWFpbi1jb250YWluZXJcIixcbiAgICB9KTtcblxuICAgIC8vIE5hdmlnYXRpb24gb3ZlcmxheSBhbmQgcGFuZWxcbiAgICB0aGlzLmNyZWF0ZU5hdmlnYXRpb25VSShjb250ZW50Q29udGFpbmVyKTtcbiAgICBcbiAgICAvLyBUYXNrIGxpc3QgY29udGFpbmVyXG4gICAgY29uc3QgdGFza0xpc3RDb250YWluZXIgPSBjb250ZW50Q29udGFpbmVyLmNyZWF0ZUVsKFwiZGl2XCIsIHtcbiAgICAgIGNsczogXCJ0YXNrLWxpc3QtY29udGFpbmVyXCIsXG4gICAgfSk7XG5cbiAgICB0aGlzLnRhc2tMaXN0ID0gdGFza0xpc3RDb250YWluZXIuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwidGFzay1saXN0XCIgfSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZURyYXdlclRvZ2dsZSh0b3BCYXJDb250YWluZXI6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgY29uc3QgZHJhd2VyVG9nZ2xlID0gdG9wQmFyQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcbiAgICAgIGNsczogXCJkcmF3ZXItdG9nZ2xlXCIsXG4gICAgICBhdHRyOiB7IHRpdGxlOiBcIlx1MzBDQVx1MzBEM1x1MzBCMlx1MzBGQ1x1MzBCN1x1MzBFN1x1MzBGM1x1MzA5Mlx1OTU4Qlx1MzA0RlwiIH0sXG4gICAgfSk7XG4gICAgXG4gICAgZHJhd2VyVG9nZ2xlLmNyZWF0ZUVsKFwic3BhblwiLCB7XG4gICAgICBjbHM6IFwiZHJhd2VyLXRvZ2dsZS1pY29uXCIsXG4gICAgICB0ZXh0OiBcIlx1MjYzMFwiLFxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVEYXRlTmF2aWdhdGlvbih0b3BCYXJDb250YWluZXI6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgY29uc3QgbmF2Q29udGFpbmVyID0gdG9wQmFyQ29udGFpbmVyLmNyZWF0ZUVsKFwiZGl2XCIsIHtcbiAgICAgIGNsczogXCJkYXRlLW5hdi1jb250YWluZXIgY29tcGFjdFwiLFxuICAgIH0pO1xuICAgIFxuICAgIGNvbnN0IGxlZnRCdG4gPSBuYXZDb250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuICAgICAgY2xzOiBcImRhdGUtbmF2LWFycm93XCIsXG4gICAgICB0ZXh0OiBcIjxcIixcbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCBjYWxlbmRhckJ0biA9IG5hdkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG4gICAgICBjbHM6IFwiY2FsZW5kYXItYnRuXCIsXG4gICAgICB0ZXh0OiBcIlx1RDgzRFx1REREM1x1RkUwRlwiLFxuICAgICAgYXR0cjogeyB0aXRsZTogXCJcdTMwQUJcdTMwRUNcdTMwRjNcdTMwQzBcdTMwRkNcdTMwOTJcdTk1OEJcdTMwNEZcIiB9LFxuICAgICAgc3R5bGU6IFwiZm9udC1zaXplOjE4cHg7cGFkZGluZzowIDZweDtiYWNrZ3JvdW5kOm5vbmU7Ym9yZGVyOm5vbmU7Y3Vyc29yOnBvaW50ZXI7XCIsXG4gICAgfSk7XG4gICAgXG4gICAgY29uc3QgZGF0ZUxhYmVsID0gbmF2Q29udGFpbmVyLmNyZWF0ZUVsKFwic3BhblwiLCB7IGNsczogXCJkYXRlLW5hdi1sYWJlbFwiIH0pO1xuICAgIFxuICAgIGNvbnN0IHJpZ2h0QnRuID0gbmF2Q29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcbiAgICAgIGNsczogXCJkYXRlLW5hdi1hcnJvd1wiLFxuICAgICAgdGV4dDogXCI+XCIsXG4gICAgfSk7XG5cbiAgICAvLyBVcGRhdGUgZGF0ZSBsYWJlbFxuICAgIHRoaXMudXBkYXRlRGF0ZUxhYmVsKGRhdGVMYWJlbCk7XG4gICAgXG4gICAgLy8gRXZlbnQgbGlzdGVuZXJzXG4gICAgbGVmdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgdGhpcy5jdXJyZW50RGF0ZS5zZXREYXRlKHRoaXMuY3VycmVudERhdGUuZ2V0RGF0ZSgpIC0gMSk7XG4gICAgICB0aGlzLnVwZGF0ZURhdGVMYWJlbChkYXRlTGFiZWwpO1xuICAgICAgYXdhaXQgdGhpcy5sb2FkVGFza3MoKTtcbiAgICB9KTtcbiAgICBcbiAgICByaWdodEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgdGhpcy5jdXJyZW50RGF0ZS5zZXREYXRlKHRoaXMuY3VycmVudERhdGUuZ2V0RGF0ZSgpICsgMSk7XG4gICAgICB0aGlzLnVwZGF0ZURhdGVMYWJlbChkYXRlTGFiZWwpO1xuICAgICAgYXdhaXQgdGhpcy5sb2FkVGFza3MoKTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBDYWxlbmRhciBidXR0b24gZnVuY3Rpb25hbGl0eVxuICAgIHRoaXMuc2V0dXBDYWxlbmRhckJ1dHRvbihjYWxlbmRhckJ0biwgZGF0ZUxhYmVsKTtcbiAgICBcbiAgICAvLyBEaXZpZGVyXG4gICAgdG9wQmFyQ29udGFpbmVyLmNyZWF0ZUVsKFwiZGl2XCIsIHtcbiAgICAgIGNsczogXCJoZWFkZXItZGl2aWRlclwiLFxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVBY3Rpb25CdXR0b25zKHRvcEJhckNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBjb25zdCBhY3Rpb25TZWN0aW9uID0gdG9wQmFyQ29udGFpbmVyLmNyZWF0ZUVsKFwiZGl2XCIsIHtcbiAgICAgIGNsczogXCJoZWFkZXItYWN0aW9uLXNlY3Rpb25cIixcbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCBhZGRUYXNrQnV0dG9uID0gYWN0aW9uU2VjdGlvbi5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG4gICAgICBjbHM6IFwiYWRkLXRhc2stYnV0dG9uIHJlcG9zaXRpb25lZFwiLFxuICAgICAgdGV4dDogXCIrXCIsXG4gICAgICBhdHRyOiB7IHRpdGxlOiBcIlx1NjVCMFx1MzA1N1x1MzA0NFx1MzBCRlx1MzBCOVx1MzBBRlx1MzA5Mlx1OEZGRFx1NTJBMFwiIH0sXG4gICAgfSk7XG4gICAgXG4gICAgY29uc3Qgcm9ib3RCdXR0b24gPSBhY3Rpb25TZWN0aW9uLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcbiAgICAgIGNsczogXCJyb2JvdC10ZXJtaW5hbC1idXR0b25cIixcbiAgICAgIHRleHQ6IFwiXHVEODNFXHVERDE2XCIsXG4gICAgICBhdHRyOiB7IHRpdGxlOiBcIlx1MzBCRlx1MzBGQ1x1MzBERlx1MzBDQVx1MzBFQlx1MzA5Mlx1OTU4Qlx1MzA0RlwiIH0sXG4gICAgfSk7XG5cbiAgICAvLyBFdmVudCBsaXN0ZW5lcnNcbiAgICBhZGRUYXNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLnNob3dBZGRUYXNrTW9kYWwoKSk7XG4gICAgcm9ib3RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLmNvbW1hbmRzLmV4ZWN1dGVDb21tYW5kQnlJZChcbiAgICAgICAgICBcInRlcm1pbmFsOm9wZW4tdGVybWluYWwuaW50ZWdyYXRlZC5yb290XCJcbiAgICAgICAgKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJcdTMwQkZcdTMwRkNcdTMwREZcdTMwQ0FcdTMwRUJcdTMwOTJcdTk1OEJcdTMwNTFcdTMwN0VcdTMwNUJcdTMwOTNcdTMwNjdcdTMwNTdcdTMwNUY6IFwiICsgZXJyb3IubWVzc2FnZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZU5hdmlnYXRpb25VSShjb250ZW50Q29udGFpbmVyOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIC8vIE92ZXJsYXkgZm9yIGNsaWNrIG91dHNpZGUgdG8gY2xvc2VcbiAgICB0aGlzLm5hdmlnYXRpb25PdmVybGF5ID0gY29udGVudENvbnRhaW5lci5jcmVhdGVFbChcImRpdlwiLCB7XG4gICAgICBjbHM6IFwibmF2aWdhdGlvbi1vdmVybGF5IG5hdmlnYXRpb24tb3ZlcmxheS1oaWRkZW5cIixcbiAgICB9KTtcblxuICAgIC8vIE5hdmlnYXRpb24gUGFuZWxcbiAgICB0aGlzLm5hdmlnYXRpb25QYW5lbCA9IGNvbnRlbnRDb250YWluZXIuY3JlYXRlRWwoXCJkaXZcIiwge1xuICAgICAgY2xzOiBcIm5hdmlnYXRpb24tcGFuZWwgbmF2aWdhdGlvbi1wYW5lbC1oaWRkZW5cIixcbiAgICB9KTtcblxuICAgIC8vIE5hdmlnYXRpb24gbWVudVxuICAgIGNvbnN0IG5hdk1lbnUgPSB0aGlzLm5hdmlnYXRpb25QYW5lbC5jcmVhdGVFbChcIm5hdlwiLCB7XG4gICAgICBjbHM6IFwibmF2aWdhdGlvbi1uYXZcIixcbiAgICB9KTtcblxuICAgIC8vIE5hdmlnYXRpb24gaXRlbXNcbiAgICBjb25zdCBuYXZpZ2F0aW9uSXRlbXMgPSBbXG4gICAgICB7IGtleTogXCJyb3V0aW5lXCIsIGxhYmVsOiBcIlx1MzBFQlx1MzBGQ1x1MzBDMVx1MzBGM1wiLCBpY29uOiBcIlx1RDgzRFx1REQwNFwiIH0sXG4gICAgICB7IGtleTogXCJyZXZpZXdcIiwgbGFiZWw6IFwiXHUzMEVDXHUzMEQzXHUzMEU1XHUzMEZDXCIsIGljb246IFwiXHVEODNEXHVEQ0NCXCIgfSxcbiAgICAgIHsga2V5OiBcImxvZ1wiLCBsYWJlbDogXCJcdTMwRURcdTMwQjBcIiwgaWNvbjogXCJcdUQ4M0RcdURDQ0FcIiB9LFxuICAgICAgeyBrZXk6IFwicHJvamVjdFwiLCBsYWJlbDogXCJcdTMwRDdcdTMwRURcdTMwQjhcdTMwQTdcdTMwQUZcdTMwQzhcIiwgaWNvbjogXCJcdUQ4M0RcdURDQzFcIiB9LFxuICAgIF07XG5cbiAgICBuYXZpZ2F0aW9uSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgbmF2SXRlbSA9IG5hdk1lbnUuY3JlYXRlRWwoXCJkaXZcIiwge1xuICAgICAgICBjbHM6IFwibmF2aWdhdGlvbi1uYXYtaXRlbVwiLFxuICAgICAgICBhdHRyOiB7IFwiZGF0YS1zZWN0aW9uXCI6IGl0ZW0ua2V5IH0sXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgbmF2SXRlbS5jcmVhdGVFbChcInNwYW5cIiwge1xuICAgICAgICBjbHM6IFwibmF2aWdhdGlvbi1uYXYtaWNvblwiLFxuICAgICAgICB0ZXh0OiBpdGVtLmljb24sXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgbmF2SXRlbS5jcmVhdGVFbChcInNwYW5cIiwge1xuICAgICAgICBjbHM6IFwibmF2aWdhdGlvbi1uYXYtbGFiZWxcIixcbiAgICAgICAgdGV4dDogaXRlbS5sYWJlbCxcbiAgICAgIH0pO1xuXG4gICAgICBuYXZJdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuaGFuZGxlTmF2aWdhdGlvbkl0ZW1DbGljayhpdGVtLmtleSBhcyBhbnkpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIERhdGUgTWFuYWdlbWVudCBNZXRob2RzXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICBwcml2YXRlIHVwZGF0ZURhdGVMYWJlbChsYWJlbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgY29uc3QgY3VycmVudCA9IG5ldyBEYXRlKHRoaXMuY3VycmVudERhdGUpO1xuICAgIGN1cnJlbnQuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgXG4gICAgY29uc3QgaXNUb2RheSA9IGN1cnJlbnQuZ2V0VGltZSgpID09PSB0b2RheS5nZXRUaW1lKCk7XG4gICAgY29uc3QgZGF5TmFtZSA9IGN1cnJlbnQudG9Mb2NhbGVEYXRlU3RyaW5nKCdqYS1KUCcsIHsgd2Vla2RheTogJ3Nob3J0JyB9KTtcbiAgICBjb25zdCBkYXRlU3RyID0gYCR7dGhpcy5jdXJyZW50RGF0ZS5nZXRNb250aCgpICsgMX0vJHt0aGlzLmN1cnJlbnREYXRlLmdldERhdGUoKX1gO1xuICAgIFxuICAgIGxhYmVsLnRleHRDb250ZW50ID0gaXNUb2RheSBcbiAgICAgID8gYFx1NEVDQVx1NjVFNSAoJHtkYXlOYW1lfSAke2RhdGVTdHJ9KWAgXG4gICAgICA6IGAke2RheU5hbWV9ICR7ZGF0ZVN0cn1gO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRDdXJyZW50RGF0ZVN0cmluZygpOiBzdHJpbmcge1xuICAgIGNvbnN0IHkgPSB0aGlzLmN1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgY29uc3QgbSA9ICh0aGlzLmN1cnJlbnREYXRlLmdldE1vbnRoKCkgKyAxKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcbiAgICBjb25zdCBkID0gdGhpcy5jdXJyZW50RGF0ZS5nZXREYXRlKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIik7XG4gICAgcmV0dXJuIGAke3l9LSR7bX0tJHtkfWA7XG4gIH1cblxuICBwcml2YXRlIHNldHVwQ2FsZW5kYXJCdXR0b24oY2FsZW5kYXJCdG46IEhUTUxFbGVtZW50LCBkYXRlTGFiZWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgY2FsZW5kYXJCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgXG4gICAgICAvLyBSZW1vdmUgZXhpc3RpbmcgaW5wdXQgaWYgYW55XG4gICAgICBjb25zdCBvbGRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FsZW5kYXItZGF0ZS1pbnB1dFwiKTtcbiAgICAgIGlmIChvbGRJbnB1dCkgb2xkSW5wdXQucmVtb3ZlKCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgaW5wdXQudHlwZSA9IFwiZGF0ZVwiO1xuICAgICAgaW5wdXQuaWQgPSBcImNhbGVuZGFyLWRhdGUtaW5wdXRcIjtcbiAgICAgIGlucHV0LmNsYXNzTGlzdC5hZGQoXCJ0YXNrY2h1dGUtaW5wdXQtYWJzb2x1dGVcIik7XG4gICAgICBcbiAgICAgIC8vIFBvc2l0aW9uIHRoZSBpbnB1dFxuICAgICAgaW5wdXQuc3R5bGUubGVmdCA9IGAke2NhbGVuZGFyQnRuLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnR9cHhgO1xuICAgICAgaW5wdXQuc3R5bGUudG9wID0gYCR7Y2FsZW5kYXJCdG4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIC0gOTAwfXB4YDtcbiAgICAgIGlucHV0LnN0eWxlLnpJbmRleCA9IFwiMTAwMDBcIjtcbiAgICAgIFxuICAgICAgLy8gU2V0IGN1cnJlbnQgZGF0ZVxuICAgICAgY29uc3QgeSA9IHRoaXMuY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgIGNvbnN0IG0gPSAodGhpcy5jdXJyZW50RGF0ZS5nZXRNb250aCgpICsgMSkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIik7XG4gICAgICBjb25zdCBkID0gdGhpcy5jdXJyZW50RGF0ZS5nZXREYXRlKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIik7XG4gICAgICBpbnB1dC52YWx1ZSA9IGAke3l9LSR7bX0tJHtkfWA7XG4gICAgICBcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuXG4gICAgICAvLyBBdXRvLW9wZW4gY2FsZW5kYXJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlucHV0LmZvY3VzKCk7XG4gICAgICAgICAgaW5wdXQuY2xpY2soKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoaW5wdXQuc2hvd1BpY2tlciAmJiB0eXBlb2YgaW5wdXQuc2hvd1BpY2tlciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBpbnB1dC5zaG93UGlja2VyKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IG1vdXNlRXZlbnQgPSBuZXcgTW91c2VFdmVudChcIm1vdXNlZG93blwiLCB7XG4gICAgICAgICAgICAgIHZpZXc6IHdpbmRvdyxcbiAgICAgICAgICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaW5wdXQuZGlzcGF0Y2hFdmVudChtb3VzZUV2ZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBJZ25vcmUgZXJyb3JzICh0ZXN0IGVudmlyb25tZW50LCBldGMuKVxuICAgICAgICB9XG4gICAgICB9LCA1MCk7XG5cbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBbeXksIG1tLCBkZF0gPSBpbnB1dC52YWx1ZS5zcGxpdChcIi1cIikubWFwKE51bWJlcik7XG4gICAgICAgIHRoaXMuY3VycmVudERhdGUgPSBuZXcgRGF0ZSh5eSwgbW0gLSAxLCBkZCk7XG4gICAgICAgIHRoaXMudXBkYXRlRGF0ZUxhYmVsKGRhdGVMYWJlbCk7XG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFRhc2tzKCk7XG4gICAgICAgIGlucHV0LnJlbW92ZSgpO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsICgpID0+IGlucHV0LnJlbW92ZSgpKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gVGFzayBMb2FkaW5nIGFuZCBSZW5kZXJpbmcgTWV0aG9kc1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgYXN5bmMgbG9hZFRhc2tzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIFVzZSB0aGUgcmVmYWN0b3JlZCBpbXBsZW1lbnRhdGlvblxuICAgIGF3YWl0IGxvYWRUYXNrc1JlZmFjdG9yZWQuY2FsbCh0aGlzKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcHJvY2Vzc1Rhc2tGaWxlKGZpbGU6IFRGaWxlKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgY29uc3QgZnJvbnRtYXR0ZXIgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIGl0J3MgYSB0YXNrIGZpbGVcbiAgICAgIGlmICghY29udGVudC5pbmNsdWRlcyhcIiN0YXNrXCIpICYmICFmcm9udG1hdHRlcj8uZXN0aW1hdGVkTWludXRlcykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRhc2tEYXRhOiBUYXNrRGF0YSA9IHtcbiAgICAgICAgZmlsZSxcbiAgICAgICAgZnJvbnRtYXR0ZXI6IGZyb250bWF0dGVyIHx8IHt9LFxuICAgICAgICBwYXRoOiBmaWxlLnBhdGgsXG4gICAgICAgIG5hbWU6IGZpbGUuYmFzZW5hbWUsXG4gICAgICAgIHByb2plY3Q6IGZyb250bWF0dGVyPy5wcm9qZWN0LFxuICAgICAgICBpc1JvdXRpbmU6IGZyb250bWF0dGVyPy5pc1JvdXRpbmUgfHwgY29udGVudC5pbmNsdWRlcyhcIiNyb3V0aW5lXCIpLFxuICAgICAgICByb3V0aW5lX3R5cGU6IGZyb250bWF0dGVyPy5yb3V0aW5lX3R5cGUsXG4gICAgICAgIHJvdXRpbmVfc3RhcnQ6IGZyb250bWF0dGVyPy5yb3V0aW5lX3N0YXJ0LFxuICAgICAgICByb3V0aW5lX2VuZDogZnJvbnRtYXR0ZXI/LnJvdXRpbmVfZW5kLFxuICAgICAgICByb3V0aW5lX3dlZWs6IGZyb250bWF0dGVyPy5yb3V0aW5lX3dlZWssXG4gICAgICAgIHJvdXRpbmVfZGF5OiBmcm9udG1hdHRlcj8ucm91dGluZV9kYXksXG4gICAgICAgIGZsZXhpYmxlX3NjaGVkdWxlOiBmcm9udG1hdHRlcj8uZmxleGlibGVfc2NoZWR1bGUsXG4gICAgICB9O1xuXG4gICAgICB0aGlzLnRhc2tzLnB1c2godGFza0RhdGEpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gcHJvY2VzcyB0YXNrIGZpbGUgJHtmaWxlLnBhdGh9OmAsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWRUYXNrSW5zdGFuY2VzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGRhdGVTdHIgPSB0aGlzLmdldEN1cnJlbnREYXRlU3RyaW5nKCk7XG4gICAgXG4gICAgZm9yIChjb25zdCB0YXNrIG9mIHRoaXMudGFza3MpIHtcbiAgICAgIC8vIENoZWNrIGlmIHRhc2sgc2hvdWxkIGJlIHNob3duIGZvciBjdXJyZW50IGRhdGVcbiAgICAgIGlmICghdGhpcy5zaG91bGRTaG93VGFza0ZvckRhdGUodGFzaywgdGhpcy5jdXJyZW50RGF0ZSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIENyZWF0ZSB0YXNrIGluc3RhbmNlXG4gICAgICBjb25zdCBpbnN0YW5jZTogVGFza0luc3RhbmNlID0ge1xuICAgICAgICB0YXNrLFxuICAgICAgICBpbnN0YW5jZUlkOiB0aGlzLmdlbmVyYXRlSW5zdGFuY2VJZCh0YXNrLCBkYXRlU3RyKSxcbiAgICAgICAgc3RhdGU6ICdpZGxlJyxcbiAgICAgICAgc2xvdEtleTogdGhpcy5nZXRUYXNrU2xvdEtleSh0YXNrKSxcbiAgICAgICAgZGF0ZTogZGF0ZVN0cixcbiAgICAgIH07XG5cbiAgICAgIC8vIENoZWNrIGlmIGluc3RhbmNlIGlzIGRlbGV0ZWQgb3IgaGlkZGVuXG4gICAgICBpZiAodGhpcy5pc0luc3RhbmNlRGVsZXRlZChpbnN0YW5jZS5pbnN0YW5jZUlkLCB0YXNrLnBhdGgsIGRhdGVTdHIpIHx8XG4gICAgICAgICAgdGhpcy5pc0luc3RhbmNlSGlkZGVuKGluc3RhbmNlLmluc3RhbmNlSWQsIHRhc2sucGF0aCwgZGF0ZVN0cikpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIExvYWQgaW5zdGFuY2Ugc3RhdGUgZnJvbSBsb2NhbFN0b3JhZ2VcbiAgICAgIHRoaXMubG9hZEluc3RhbmNlU3RhdGUoaW5zdGFuY2UsIGRhdGVTdHIpO1xuICAgICAgXG4gICAgICB0aGlzLnRhc2tJbnN0YW5jZXMucHVzaChpbnN0YW5jZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzaG91bGRTaG93VGFza0ZvckRhdGUodGFzazogVGFza0RhdGEsIGRhdGU6IERhdGUpOiBib29sZWFuIHtcbiAgICAvLyBOb24tcm91dGluZSB0YXNrcyBhcmUgYWx3YXlzIHNob3duICh0aGV5IHdpbGwgYmUgZmlsdGVyZWQgYnkgaW5zdGFuY2Ugc3RhdGUpXG4gICAgaWYgKCF0YXNrLmlzUm91dGluZSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gRm9yIHJvdXRpbmUgdGFza3MsIGNoZWNrIHNjaGVkdWxlXG4gICAgY29uc3QgZGF5T2ZXZWVrID0gZGF0ZS5nZXREYXkoKTsgLy8gMCA9IFN1bmRheSwgMSA9IE1vbmRheSwgZXRjLlxuICAgIFxuICAgIHN3aXRjaCAodGFzay5yb3V0aW5lX3R5cGUpIHtcbiAgICAgIGNhc2UgJ2RhaWx5JzpcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICBjYXNlICd3ZWVrZGF5cyc6XG4gICAgICAgIHJldHVybiBkYXlPZldlZWsgPj0gMSAmJiBkYXlPZldlZWsgPD0gNTsgLy8gTW9uZGF5IHRvIEZyaWRheVxuICAgICAgY2FzZSAnd2Vla2VuZHMnOlxuICAgICAgICByZXR1cm4gZGF5T2ZXZWVrID09PSAwIHx8IGRheU9mV2VlayA9PT0gNjsgLy8gU2F0dXJkYXkgYW5kIFN1bmRheVxuICAgICAgY2FzZSAnd2Vla2x5JzpcbiAgICAgICAgLy8gSW1wbGVtZW50IHdlZWtseSBsb2dpYyBiYXNlZCBvbiByb3V0aW5lX2RheVxuICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gU2ltcGxpZmllZCBmb3Igbm93XG4gICAgICBjYXNlICdtb250aGx5JzpcbiAgICAgICAgLy8gSW1wbGVtZW50IG1vbnRobHkgbG9naWNcbiAgICAgICAgcmV0dXJuIHRydWU7IC8vIFNpbXBsaWZpZWQgZm9yIG5vd1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZUluc3RhbmNlSWQodGFzazogVGFza0RhdGEsIGRhdGVTdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8gR2VuZXJhdGUgYSB1bmlxdWUgSUQgZm9yIHRoaXMgdGFzayBpbnN0YW5jZVxuICAgIHJldHVybiBgJHt0YXNrLnBhdGh9XyR7ZGF0ZVN0cn1fJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRUYXNrU2xvdEtleSh0YXNrOiBUYXNrRGF0YSk6IHN0cmluZyB7XG4gICAgLy8gR2V0IHNsb3Qga2V5IGZyb20gbG9jYWxTdG9yYWdlIG9yIGZyb250bWF0dGVyXG4gICAgY29uc3Qgc3RvcmVkU2xvdCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGB0YXNrY2h1dGUtc2xvdGtleS0ke3Rhc2sucGF0aH1gKTtcbiAgICBpZiAoc3RvcmVkU2xvdCkge1xuICAgICAgcmV0dXJuIHN0b3JlZFNsb3Q7XG4gICAgfVxuXG4gICAgLy8gRGVmYXVsdCB0byBcIm5vbmVcIiAobm8gdGltZSBzcGVjaWZpZWQpXG4gICAgcmV0dXJuIFwibm9uZVwiO1xuICB9XG5cbiAgcHJpdmF0ZSBsb2FkSW5zdGFuY2VTdGF0ZShpbnN0YW5jZTogVGFza0luc3RhbmNlLCBkYXRlU3RyOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAvLyBMb2FkIHN0YXRlIGZyb20gbG9jYWxTdG9yYWdlXG4gICAgY29uc3Qgc3RhdGVLZXkgPSBgdGFza2NodXRlLWluc3RhbmNlLXN0YXRlLSR7aW5zdGFuY2UuaW5zdGFuY2VJZH1gO1xuICAgIGNvbnN0IHNhdmVkU3RhdGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShzdGF0ZUtleSk7XG4gICAgXG4gICAgaWYgKHNhdmVkU3RhdGUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2Uoc2F2ZWRTdGF0ZSk7XG4gICAgICAgIGluc3RhbmNlLnN0YXRlID0gcGFyc2VkLnN0YXRlIHx8ICdpZGxlJztcbiAgICAgICAgaW5zdGFuY2Uuc3RhcnRUaW1lID0gcGFyc2VkLnN0YXJ0VGltZSA/IG5ldyBEYXRlKHBhcnNlZC5zdGFydFRpbWUpIDogdW5kZWZpbmVkO1xuICAgICAgICBpbnN0YW5jZS5zdG9wVGltZSA9IHBhcnNlZC5zdG9wVGltZSA/IG5ldyBEYXRlKHBhcnNlZC5zdG9wVGltZSkgOiB1bmRlZmluZWQ7XG4gICAgICAgIGluc3RhbmNlLnBhdXNlZER1cmF0aW9uID0gcGFyc2VkLnBhdXNlZER1cmF0aW9uIHx8IDA7XG4gICAgICAgIGluc3RhbmNlLmFjdHVhbE1pbnV0ZXMgPSBwYXJzZWQuYWN0dWFsTWludXRlcztcbiAgICAgICAgaW5zdGFuY2UuY29tbWVudCA9IHBhcnNlZC5jb21tZW50O1xuICAgICAgICBpbnN0YW5jZS5mb2N1c0xldmVsID0gcGFyc2VkLmZvY3VzTGV2ZWw7XG4gICAgICAgIGluc3RhbmNlLmVuZXJneUxldmVsID0gcGFyc2VkLmVuZXJneUxldmVsO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBwYXJzZSBpbnN0YW5jZSBzdGF0ZTpcIiwgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gVGFzayBSZW5kZXJpbmcgTWV0aG9kc1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgcmVuZGVyVGFza0xpc3QoKTogdm9pZCB7XG4gICAgLy8gU2F2ZSBzY3JvbGwgcG9zaXRpb25cbiAgICBjb25zdCBzY3JvbGxUb3AgPSB0aGlzLnRhc2tMaXN0LnNjcm9sbFRvcDtcbiAgICBjb25zdCBzY3JvbGxMZWZ0ID0gdGhpcy50YXNrTGlzdC5zY3JvbGxMZWZ0O1xuXG4gICAgLy8gQXBwbHkgcmVzcG9uc2l2ZSBjbGFzc2VzXG4gICAgdGhpcy5hcHBseVJlc3BvbnNpdmVDbGFzc2VzKCk7XG5cbiAgICB0aGlzLnNvcnRUYXNrSW5zdGFuY2VzQnlUaW1lT3JkZXIoKTtcbiAgICB0aGlzLnRhc2tMaXN0LmVtcHR5KCk7XG4gICAgXG4gICAgLy8gR3JvdXAgYnkgc2xvdCBrZXlcbiAgICBjb25zdCB0aW1lU2xvdHM6IFJlY29yZDxzdHJpbmcsIFRhc2tJbnN0YW5jZVtdPiA9IHt9O1xuICAgIHRoaXMuZ2V0VGltZVNsb3RLZXlzKCkuZm9yRWFjaCgoc2xvdCkgPT4ge1xuICAgICAgdGltZVNsb3RzW3Nsb3RdID0gW107XG4gICAgfSk7XG4gICAgXG4gICAgbGV0IG5vVGltZUluc3RhbmNlczogVGFza0luc3RhbmNlW10gPSBbXTtcbiAgICBcbiAgICB0aGlzLnRhc2tJbnN0YW5jZXMuZm9yRWFjaCgoaW5zdCkgPT4ge1xuICAgICAgaWYgKGluc3Quc2xvdEtleSAmJiBpbnN0LnNsb3RLZXkgIT09IFwibm9uZVwiKSB7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgc2xvdCBleGlzdHMgaW4gdGltZVNsb3RzXG4gICAgICAgIGlmICghdGltZVNsb3RzW2luc3Quc2xvdEtleV0pIHtcbiAgICAgICAgICB0aW1lU2xvdHNbaW5zdC5zbG90S2V5XSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHRpbWVTbG90c1tpbnN0LnNsb3RLZXldLnB1c2goaW5zdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub1RpbWVJbnN0YW5jZXMucHVzaChpbnN0KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFJlbmRlciBcIm5vIHRpbWUgc3BlY2lmaWVkXCIgZ3JvdXAgZmlyc3RcbiAgICB0aGlzLnJlbmRlck5vVGltZUdyb3VwKG5vVGltZUluc3RhbmNlcyk7XG4gICAgXG4gICAgLy8gUmVuZGVyIHRpbWUgc2xvdCBncm91cHNcbiAgICB0aGlzLmdldFRpbWVTbG90S2V5cygpLmZvckVhY2goKHNsb3QpID0+IHtcbiAgICAgIGNvbnN0IGluc3RhbmNlc0luU2xvdCA9IHRpbWVTbG90c1tzbG90XTtcbiAgICAgIHRoaXMucmVuZGVyVGltZVNsb3RHcm91cChzbG90LCBpbnN0YW5jZXNJblNsb3QpO1xuICAgIH0pO1xuXG4gICAgLy8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb25cbiAgICB0aGlzLnRhc2tMaXN0LnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcbiAgICB0aGlzLnRhc2tMaXN0LnNjcm9sbExlZnQgPSBzY3JvbGxMZWZ0O1xuXG4gICAgLy8gVXBkYXRlIHRvdGFsVGFza3MgY291bnRcbiAgICB0aGlzLnVwZGF0ZVRvdGFsVGFza3NDb3VudCgpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJOb1RpbWVHcm91cChpbnN0YW5jZXM6IFRhc2tJbnN0YW5jZVtdKTogdm9pZCB7XG4gICAgY29uc3Qgbm9UaW1lSGVhZGVyID0gdGhpcy50YXNrTGlzdC5jcmVhdGVFbChcImRpdlwiLCB7XG4gICAgICBjbHM6IFwidGltZS1zbG90LWhlYWRlciBvdGhlclwiLFxuICAgICAgdGV4dDogXCJcdTY2NDJcdTk1OTNcdTYzMDdcdTVCOUFcdTMwNkFcdTMwNTdcIixcbiAgICB9KTtcblxuICAgIHRoaXMuc2V0dXBUaW1lU2xvdERyYWdIYW5kbGVycyhub1RpbWVIZWFkZXIsIFwibm9uZVwiKTtcbiAgICBcbiAgICBpbnN0YW5jZXMuZm9yRWFjaCgoaW5zdCwgaWR4KSA9PiB7XG4gICAgICB0aGlzLmNyZWF0ZVRhc2tJbnN0YW5jZUl0ZW0oaW5zdCwgXCJub25lXCIsIGlkeCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclRpbWVTbG90R3JvdXAoc2xvdDogc3RyaW5nLCBpbnN0YW5jZXM6IFRhc2tJbnN0YW5jZVtdKTogdm9pZCB7XG4gICAgY29uc3QgdGltZVNsb3RIZWFkZXIgPSB0aGlzLnRhc2tMaXN0LmNyZWF0ZUVsKFwiZGl2XCIsIHtcbiAgICAgIGNsczogXCJ0aW1lLXNsb3QtaGVhZGVyXCIsXG4gICAgICB0ZXh0OiBzbG90LFxuICAgIH0pO1xuXG4gICAgdGhpcy5zZXR1cFRpbWVTbG90RHJhZ0hhbmRsZXJzKHRpbWVTbG90SGVhZGVyLCBzbG90KTtcbiAgICBcbiAgICBpbnN0YW5jZXMuZm9yRWFjaCgoaW5zdCwgaWR4KSA9PiB7XG4gICAgICB0aGlzLmNyZWF0ZVRhc2tJbnN0YW5jZUl0ZW0oaW5zdCwgc2xvdCwgaWR4KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlVGFza0luc3RhbmNlSXRlbShpbnN0OiBUYXNrSW5zdGFuY2UsIHNsb3Q6IHN0cmluZywgaWR4OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCB0YXNrSXRlbSA9IHRoaXMudGFza0xpc3QuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwidGFzay1pdGVtXCIgfSk7XG5cbiAgICAvLyBTZXQgZGF0YSBhdHRyaWJ1dGVzXG4gICAgaWYgKGluc3QudGFzay5wYXRoKSB7XG4gICAgICB0YXNrSXRlbS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXRhc2stcGF0aFwiLCBpbnN0LnRhc2sucGF0aCk7XG4gICAgfVxuICAgIHRhc2tJdGVtLnNldEF0dHJpYnV0ZShcImRhdGEtc2xvdFwiLCBzbG90IHx8IFwibm9uZVwiKTtcblxuICAgIC8vIENoZWNrIGlmIGZ1dHVyZSB0YXNrXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgIGNvbnN0IHZpZXdEYXRlID0gbmV3IERhdGUodGhpcy5jdXJyZW50RGF0ZSk7XG4gICAgdmlld0RhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgY29uc3QgaXNGdXR1cmVUYXNrID0gdmlld0RhdGUgPiB0b2RheTtcblxuICAgIC8vIEFkZCBzZWxlY3Rpb24gc3RhdGVcbiAgICBpZiAodGhpcy5jdXJyZW50SW5zdGFuY2UgPT09IGluc3QgJiYgaW5zdC5zdGF0ZSA9PT0gXCJydW5uaW5nXCIpIHtcbiAgICAgIHRhc2tJdGVtLmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgY29tcGxldGlvbiBzdGF0ZVxuICAgIGlmIChpbnN0LnN0YXRlID09PSBcImRvbmVcIikge1xuICAgICAgdGFza0l0ZW0uY2xhc3NMaXN0LmFkZChcImNvbXBsZXRlZFwiKTtcbiAgICB9XG5cbiAgICAvLyAxLiBDcmVhdGUgZHJhZyBoYW5kbGUgKDIwcHgpXG4gICAgdGhpcy5jcmVhdGVEcmFnSGFuZGxlKHRhc2tJdGVtLCBpbnN0LCBzbG90LCBpZHgpO1xuICAgIFxuICAgIC8vIDIuIENyZWF0ZSBwbGF5L3N0b3AgYnV0dG9uICg0MHB4KVxuICAgIHRoaXMuY3JlYXRlUGxheVN0b3BCdXR0b24odGFza0l0ZW0sIGluc3QsIGlzRnV0dXJlVGFzayk7XG4gICAgXG4gICAgLy8gMy4gQ3JlYXRlIHRhc2sgbmFtZSAoMWZyKVxuICAgIHRoaXMuY3JlYXRlVGFza05hbWUodGFza0l0ZW0sIGluc3QpO1xuICAgIFxuICAgIC8vIDQuIENyZWF0ZSBwcm9qZWN0IGRpc3BsYXkgKDIyMHB4KVxuICAgIHRoaXMuY3JlYXRlUHJvamVjdERpc3BsYXkodGFza0l0ZW0sIGluc3QpO1xuICAgIFxuICAgIC8vIDUuIENyZWF0ZSB0aW1lIHJhbmdlIGRpc3BsYXkgKDExMHB4KVxuICAgIHRoaXMuY3JlYXRlVGltZVJhbmdlRGlzcGxheSh0YXNrSXRlbSwgaW5zdCk7XG4gICAgXG4gICAgLy8gNi4gQ3JlYXRlIGR1cmF0aW9uL3RpbWVyIGRpc3BsYXkgKDUwcHgpXG4gICAgdGhpcy5jcmVhdGVEdXJhdGlvblRpbWVyRGlzcGxheSh0YXNrSXRlbSwgaW5zdCk7XG4gICAgXG4gICAgLy8gNy4gQ3JlYXRlIGNvbW1lbnQgYnV0dG9uICgzMHB4KVxuICAgIHRoaXMuY3JlYXRlQ29tbWVudEJ1dHRvbih0YXNrSXRlbSwgaW5zdCk7XG4gICAgXG4gICAgLy8gOC4gQ3JlYXRlIHJvdXRpbmUgYnV0dG9uICgzMHB4KVxuICAgIHRoaXMuY3JlYXRlUm91dGluZUJ1dHRvbih0YXNrSXRlbSwgaW5zdCk7XG4gICAgXG4gICAgLy8gOS4gQ3JlYXRlIHNldHRpbmdzIGJ1dHRvbiAoMzBweClcbiAgICB0aGlzLmNyZWF0ZVNldHRpbmdzQnV0dG9uKHRhc2tJdGVtLCBpbnN0KTtcbiAgICBcbiAgICAvLyBTZXR1cCBldmVudCBsaXN0ZW5lcnNcbiAgICB0aGlzLnNldHVwVGFza0l0ZW1FdmVudExpc3RlbmVycyh0YXNrSXRlbSwgaW5zdCk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZURyYWdIYW5kbGUodGFza0l0ZW06IEhUTUxFbGVtZW50LCBpbnN0OiBUYXNrSW5zdGFuY2UsIHNsb3Q6IHN0cmluZywgaWR4OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBpc0RyYWdnYWJsZSA9IGluc3Quc3RhdGUgIT09IFwiZG9uZVwiO1xuICAgIFxuICAgIGNvbnN0IGRyYWdIYW5kbGUgPSB0YXNrSXRlbS5jcmVhdGVFbChcImRpdlwiLCB7XG4gICAgICBjbHM6IFwiZHJhZy1oYW5kbGVcIixcbiAgICAgIGF0dHI6IGlzRHJhZ2dhYmxlXG4gICAgICAgID8geyBkcmFnZ2FibGU6IFwidHJ1ZVwiLCB0aXRsZTogXCJcdTMwQzlcdTMwRTlcdTMwQzNcdTMwQjBcdTMwNTdcdTMwNjZcdTc5RkJcdTUyRDVcIiB9XG4gICAgICAgIDogeyB0aXRsZTogXCJcdTVCOENcdTRFODZcdTZFMDhcdTMwN0ZcdTMwQkZcdTMwQjlcdTMwQUZcIiB9LFxuICAgIH0pO1xuXG4gICAgaWYgKCFpc0RyYWdnYWJsZSkge1xuICAgICAgZHJhZ0hhbmRsZS5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGdyaXAgaWNvbiAoNiBkb3RzKVxuICAgIGNvbnN0IHN2ZyA9IGRyYWdIYW5kbGUuY3JlYXRlU3ZnKFwic3ZnXCIsIHtcbiAgICAgIGF0dHI6IHtcbiAgICAgICAgd2lkdGg6IFwiMTBcIixcbiAgICAgICAgaGVpZ2h0OiBcIjE2XCIsXG4gICAgICAgIHZpZXdCb3g6IFwiMCAwIDEwIDE2XCIsXG4gICAgICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgICB9LFxuICAgIH0pO1xuICAgIFxuICAgIHN2Zy5jcmVhdGVTdmcoXCJjaXJjbGVcIiwgeyBhdHRyOiB7IGN4OiBcIjJcIiwgY3k6IFwiMlwiLCByOiBcIjEuNVwiIH0gfSk7XG4gICAgc3ZnLmNyZWF0ZVN2ZyhcImNpcmNsZVwiLCB7IGF0dHI6IHsgY3g6IFwiOFwiLCBjeTogXCIyXCIsIHI6IFwiMS41XCIgfSB9KTtcbiAgICBzdmcuY3JlYXRlU3ZnKFwiY2lyY2xlXCIsIHsgYXR0cjogeyBjeDogXCIyXCIsIGN5OiBcIjhcIiwgcjogXCIxLjVcIiB9IH0pO1xuICAgIHN2Zy5jcmVhdGVTdmcoXCJjaXJjbGVcIiwgeyBhdHRyOiB7IGN4OiBcIjhcIiwgY3k6IFwiOFwiLCByOiBcIjEuNVwiIH0gfSk7XG4gICAgc3ZnLmNyZWF0ZVN2ZyhcImNpcmNsZVwiLCB7IGF0dHI6IHsgY3g6IFwiMlwiLCBjeTogXCIxNFwiLCByOiBcIjEuNVwiIH0gfSk7XG4gICAgc3ZnLmNyZWF0ZVN2ZyhcImNpcmNsZVwiLCB7IGF0dHI6IHsgY3g6IFwiOFwiLCBjeTogXCIxNFwiLCByOiBcIjEuNVwiIH0gfSk7XG5cbiAgICAvLyBTZXR1cCBkcmFnIGV2ZW50c1xuICAgIGlmIChpc0RyYWdnYWJsZSkge1xuICAgICAgdGhpcy5zZXR1cERyYWdFdmVudHMoZHJhZ0hhbmRsZSwgdGFza0l0ZW0sIHNsb3QsIGlkeCk7XG4gICAgfVxuXG4gICAgLy8gQ2xpY2sgaGFuZGxlciBmb3Igc2VsZWN0aW9uXG4gICAgZHJhZ0hhbmRsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0aGlzLnNlbGVjdFRhc2tGb3JLZXlib2FyZChpbnN0LCB0YXNrSXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVBsYXlTdG9wQnV0dG9uKHRhc2tJdGVtOiBIVE1MRWxlbWVudCwgaW5zdDogVGFza0luc3RhbmNlLCBpc0Z1dHVyZVRhc2s6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBsZXQgYnRuQ2xzID0gXCJwbGF5LXN0b3AtYnV0dG9uXCI7XG4gICAgbGV0IGJ0blRleHQgPSBcIlx1MjVCNlx1RkUwRlwiO1xuICAgIGxldCBidG5UaXRsZSA9IFwiXHUzMEI5XHUzMEJGXHUzMEZDXHUzMEM4XCI7XG4gICAgXG4gICAgaWYgKGlzRnV0dXJlVGFzaykge1xuICAgICAgYnRuQ2xzICs9IFwiIGZ1dHVyZS10YXNrLWJ1dHRvblwiO1xuICAgICAgYnRuVGV4dCA9IFwiXHUyMDE0XCI7XG4gICAgICBidG5UaXRsZSA9IFwiXHU2NzJBXHU2NzY1XHUzMDZFXHUzMEJGXHUzMEI5XHUzMEFGXHUzMDZGXHU1QjlGXHU4ODRDXHUzMDY3XHUzMDREXHUzMDdFXHUzMDVCXHUzMDkzXCI7XG4gICAgfSBlbHNlIGlmIChpbnN0LnN0YXRlID09PSBcInJ1bm5pbmdcIikge1xuICAgICAgYnRuQ2xzICs9IFwiIHN0b3BcIjtcbiAgICAgIGJ0blRleHQgPSBcIlx1MjNGOVwiO1xuICAgICAgYnRuVGl0bGUgPSBcIlx1MzBCOVx1MzBDOFx1MzBDM1x1MzBEN1wiO1xuICAgIH0gZWxzZSBpZiAoaW5zdC5zdGF0ZSA9PT0gXCJkb25lXCIpIHtcbiAgICAgIGJ0blRleHQgPSBcIlx1MjYxMVx1RkUwRlwiO1xuICAgICAgYnRuVGl0bGUgPSBcIlx1NUI4Q1x1NEU4Nlx1MzBCRlx1MzBCOVx1MzBBRlx1MzA5Mlx1NTE4RFx1OEEwOFx1NkUyQ1wiO1xuICAgIH1cblxuICAgIGNvbnN0IHBsYXlCdXR0b24gPSB0YXNrSXRlbS5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG4gICAgICBjbHM6IGJ0bkNscyxcbiAgICAgIHRleHQ6IGJ0blRleHQsXG4gICAgICBhdHRyOiB7IHRpdGxlOiBidG5UaXRsZSB9LFxuICAgIH0pO1xuXG4gICAgaWYgKGlzRnV0dXJlVGFzaykge1xuICAgICAgcGxheUJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgcGxheUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBpZiAoaXNGdXR1cmVUYXNrKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJcdTY3MkFcdTY3NjVcdTMwNkVcdTMwQkZcdTMwQjlcdTMwQUZcdTMwNkZcdTVCOUZcdTg4NENcdTMwNjdcdTMwNERcdTMwN0VcdTMwNUJcdTMwOTNcdTMwMDJcIiwgMjAwMCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGluc3Quc3RhdGUgPT09IFwicnVubmluZ1wiKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc3RvcEluc3RhbmNlKGluc3QpO1xuICAgICAgfSBlbHNlIGlmIChpbnN0LnN0YXRlID09PSBcImlkbGVcIikge1xuICAgICAgICBhd2FpdCB0aGlzLnN0YXJ0SW5zdGFuY2UoaW5zdCk7XG4gICAgICB9IGVsc2UgaWYgKGluc3Quc3RhdGUgPT09IFwiZG9uZVwiKSB7XG4gICAgICAgIC8vIFJlcGxheSBmdW5jdGlvbmFsaXR5IGZvciBjb21wbGV0ZWQgdGFza3NcbiAgICAgICAgYXdhaXQgdGhpcy5kdXBsaWNhdGVBbmRTdGFydEluc3RhbmNlKGluc3QpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVUYXNrTmFtZSh0YXNrSXRlbTogSFRNTEVsZW1lbnQsIGluc3Q6IFRhc2tJbnN0YW5jZSk6IHZvaWQge1xuICAgIGNvbnN0IHRhc2tOYW1lID0gdGFza0l0ZW0uY3JlYXRlRWwoXCJzcGFuXCIsIHtcbiAgICAgIGNsczogXCJ0YXNrLW5hbWVcIixcbiAgICAgIHRleHQ6IGluc3QudGFzay5uYW1lLFxuICAgIH0pO1xuXG4gICAgLy8gQXBwbHkgZGlmZmVyZW50IHN0eWxlIGZvciBjb21wbGV0ZWQgdGFza3NcbiAgICBpZiAoaW5zdC5zdGF0ZSA9PT0gXCJkb25lXCIpIHtcbiAgICAgIHRhc2tOYW1lLnN0eWxlLm9wYWNpdHkgPSBcIjAuNlwiO1xuICAgICAgdGFza05hbWUuc3R5bGUuY29sb3IgPSBcInZhcigtLXRleHQtbXV0ZWQpXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEFwcGx5IGxpbmstbGlrZSBzdHlsZSBmb3Igbm9uLWNvbXBsZXRlZCB0YXNrc1xuICAgICAgdGFza05hbWUuc3R5bGUuY29sb3IgPSBcInZhcigtLXRleHQtYWNjZW50KVwiO1xuICAgIH1cblxuICAgIC8vIENsaWNrIGhhbmRsZXIgdG8gb3BlbiB0YXNrIGZpbGVcbiAgICB0YXNrTmFtZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KGluc3QudGFzay5wYXRoLCBcIlwiLCBmYWxzZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBuZXcgTm90aWNlKFwiXHUzMEJGXHUzMEI5XHUzMEFGXHUzMEQ1XHUzMEExXHUzMEE0XHUzMEVCXHUzMDkyXHU5NThCXHUzMDUxXHUzMDdFXHUzMDVCXHUzMDkzXHUzMDY3XHUzMDU3XHUzMDVGXCIpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVQcm9qZWN0RGlzcGxheSh0YXNrSXRlbTogSFRNTEVsZW1lbnQsIGluc3Q6IFRhc2tJbnN0YW5jZSk6IHZvaWQge1xuICAgIGNvbnN0IHByb2plY3REaXNwbGF5ID0gdGFza0l0ZW0uY3JlYXRlRWwoXCJzcGFuXCIsIHtcbiAgICAgIGNsczogXCJ0YXNrY2h1dGUtcHJvamVjdC1kaXNwbGF5XCIsXG4gICAgfSk7XG5cbiAgICBpZiAoaW5zdC50YXNrLnByb2plY3RQYXRoICYmIGluc3QudGFzay5wcm9qZWN0VGl0bGUpIHtcbiAgICAgIC8vIFByb2plY3QgYnV0dG9uIHdpdGggZm9sZGVyIGljb24gYW5kIG5hbWVcbiAgICAgIGNvbnN0IHByb2plY3RCdXR0b24gPSBwcm9qZWN0RGlzcGxheS5jcmVhdGVFbChcInNwYW5cIiwge1xuICAgICAgICBjbHM6IFwidGFza2NodXRlLXByb2plY3QtYnV0dG9uXCIsXG4gICAgICAgIGF0dHI6IHtcbiAgICAgICAgICB0aXRsZTogYFx1MzBEN1x1MzBFRFx1MzBCOFx1MzBBN1x1MzBBRlx1MzBDODogJHtpbnN0LnRhc2sucHJvamVjdFRpdGxlfWAsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgLy8gRm9sZGVyIGljb25cbiAgICAgIGNvbnN0IGZvbGRlckljb24gPSBwcm9qZWN0QnV0dG9uLmNyZWF0ZUVsKFwic3BhblwiLCB7XG4gICAgICAgIGNsczogXCJ0YXNrY2h1dGUtcHJvamVjdC1pY29uXCIsXG4gICAgICAgIHRleHQ6IFwiXHVEODNEXHVEQ0MxXCIsXG4gICAgICB9KTtcblxuICAgICAgLy8gUHJvamVjdCBuYW1lIChyZW1vdmUgXCJQcm9qZWN0IC0gXCIgcHJlZml4KVxuICAgICAgY29uc3QgcHJvamVjdE5hbWUgPSBwcm9qZWN0QnV0dG9uLmNyZWF0ZUVsKFwic3BhblwiLCB7XG4gICAgICAgIGNsczogXCJ0YXNrY2h1dGUtcHJvamVjdC1uYW1lXCIsXG4gICAgICAgIHRleHQ6IGluc3QudGFzay5wcm9qZWN0VGl0bGUucmVwbGFjZSgvXlByb2plY3RcXHMqLVxccyovLCBcIlwiKSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGljayBoYW5kbGVyIGZvciBwcm9qZWN0XG4gICAgICBwcm9qZWN0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoZSkgPT4ge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAvLyBPcGVuIHByb2plY3QgZmlsZSBvciBzaG93IHByb2plY3QgbW9kYWxcbiAgICAgICAgYXdhaXQgdGhpcy5zaG93VW5pZmllZFByb2plY3RNb2RhbChpbnN0KTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBFeHRlcm5hbCBsaW5rIGljb25cbiAgICAgIGNvbnN0IGV4dGVybmFsTGlua0ljb24gPSBwcm9qZWN0RGlzcGxheS5jcmVhdGVFbChcInNwYW5cIiwge1xuICAgICAgICBjbHM6IFwidGFza2NodXRlLWV4dGVybmFsLWxpbmtcIixcbiAgICAgICAgdGV4dDogXCJcdUQ4M0RcdUREMTdcIixcbiAgICAgICAgYXR0cjogeyB0aXRsZTogXCJcdTMwRDdcdTMwRURcdTMwQjhcdTMwQTdcdTMwQUZcdTMwQzhcdTMwQ0VcdTMwRkNcdTMwQzhcdTMwOTJcdTk1OEJcdTMwNEZcIiB9LFxuICAgICAgfSk7XG5cbiAgICAgIGV4dGVybmFsTGlua0ljb24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jIChlKSA9PiB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIC8vIE9wZW4gcHJvamVjdCBmaWxlIGRpcmVjdGx5XG4gICAgICAgIGF3YWl0IHRoaXMub3BlblByb2plY3RJblNwbGl0KGluc3QudGFzay5wcm9qZWN0UGF0aCk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gXHUzMEQ3XHUzMEVEXHUzMEI4XHUzMEE3XHUzMEFGXHUzMEM4XHU2NzJBXHU4QTJEXHU1QjlBXHUzMDZFXHU1ODM0XHU1NDA4XHVGRjA4XHUzMERCXHUzMEQwXHUzMEZDXHUzMDY3XHU4ODY4XHU3OTNBXHVGRjA5XG4gICAgICBjb25zdCBwcm9qZWN0UGxhY2Vob2xkZXIgPSBwcm9qZWN0RGlzcGxheS5jcmVhdGVFbChcInNwYW5cIiwge1xuICAgICAgICBjbHM6IFwidGFza2NodXRlLXByb2plY3QtcGxhY2Vob2xkZXJcIixcbiAgICAgICAgYXR0cjogeyB0aXRsZTogXCJcdTMwQUZcdTMwRUFcdTMwQzNcdTMwQUZcdTMwNTdcdTMwNjZcdTMwRDdcdTMwRURcdTMwQjhcdTMwQTdcdTMwQUZcdTMwQzhcdTMwOTJcdThBMkRcdTVCOUFcIiB9LFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHByb2plY3RQbGFjZWhvbGRlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKGUpID0+IHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgYXdhaXQgdGhpcy5zaG93UHJvamVjdE1vZGFsKGluc3QpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVUaW1lUmFuZ2VEaXNwbGF5KHRhc2tJdGVtOiBIVE1MRWxlbWVudCwgaW5zdDogVGFza0luc3RhbmNlKTogdm9pZCB7XG4gICAgY29uc3QgdGltZVJhbmdlRWwgPSB0YXNrSXRlbS5jcmVhdGVFbChcInNwYW5cIiwge1xuICAgICAgY2xzOiBcInRhc2stdGltZS1yYW5nZVwiLFxuICAgIH0pO1xuXG4gICAgY29uc3QgZm9ybWF0VGltZSA9IChkYXRlOiBEYXRlKSA9PlxuICAgICAgZGF0ZSA/IGRhdGUudG9Mb2NhbGVUaW1lU3RyaW5nKFwiamEtSlBcIiwge1xuICAgICAgICBob3VyOiBcIjItZGlnaXRcIixcbiAgICAgICAgbWludXRlOiBcIjItZGlnaXRcIixcbiAgICAgIH0pIDogXCJcIjtcblxuICAgIGlmIChpbnN0LnN0YXRlID09PSBcInJ1bm5pbmdcIiAmJiBpbnN0LnN0YXJ0VGltZSkge1xuICAgICAgdGltZVJhbmdlRWwudGV4dENvbnRlbnQgPSBgJHtmb3JtYXRUaW1lKGluc3Quc3RhcnRUaW1lKX0gXHUyMTkyYDtcbiAgICB9IGVsc2UgaWYgKGluc3Quc3RhdGUgPT09IFwiZG9uZVwiICYmIGluc3Quc3RhcnRUaW1lICYmIGluc3Quc3RvcFRpbWUpIHtcbiAgICAgIHRpbWVSYW5nZUVsLnRleHRDb250ZW50ID0gYCR7Zm9ybWF0VGltZShpbnN0LnN0YXJ0VGltZSl9IFx1MjE5MiAke2Zvcm1hdFRpbWUoaW5zdC5zdG9wVGltZSl9YDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGltZVJhbmdlRWwudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlRHVyYXRpb25UaW1lckRpc3BsYXkodGFza0l0ZW06IEhUTUxFbGVtZW50LCBpbnN0OiBUYXNrSW5zdGFuY2UpOiB2b2lkIHtcbiAgICBpZiAoaW5zdC5zdGF0ZSA9PT0gXCJkb25lXCIgJiYgaW5zdC5zdGFydFRpbWUgJiYgaW5zdC5zdG9wVGltZSkge1xuICAgICAgLy8gQ29tcGxldGVkIHRhc2s6IHNob3cgZHVyYXRpb25cbiAgICAgIGNvbnN0IGR1cmF0aW9uRWwgPSB0YXNrSXRlbS5jcmVhdGVFbChcInNwYW5cIiwge1xuICAgICAgICBjbHM6IFwidGFzay1kdXJhdGlvblwiLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gdGhpcy5jYWxjdWxhdGVDcm9zc0RheUR1cmF0aW9uKGluc3Quc3RhcnRUaW1lLCBpbnN0LnN0b3BUaW1lKTtcbiAgICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcihkdXJhdGlvbiAvIDM2MDAwMDApO1xuICAgICAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3IoKGR1cmF0aW9uICUgMzYwMDAwMCkgLyA2MDAwMCkgJSA2MDtcbiAgICAgIGNvbnN0IGR1cmF0aW9uU3RyID0gYCR7aG91cnMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIil9OiR7bWludXRlcy50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKX1gO1xuICAgICAgXG4gICAgICBkdXJhdGlvbkVsLnRleHRDb250ZW50ID0gZHVyYXRpb25TdHI7XG5cbiAgICAgIC8vIEFkZCB0b29sdGlwIGZvciBjcm9zcy1kYXkgdGFza3NcbiAgICAgIGlmIChpbnN0LnN0YXJ0VGltZS5nZXREYXRlKCkgIT09IGluc3Quc3RvcFRpbWUuZ2V0RGF0ZSgpKSB7XG4gICAgICAgIGR1cmF0aW9uRWwuc2V0QXR0cmlidXRlKFwidGl0bGVcIiwgXCJcdTY1RTVcdTMwOTJcdThERThcdTMwNDRcdTMwNjBcdTMwQkZcdTMwQjlcdTMwQUZcIik7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpbnN0LnN0YXRlID09PSBcInJ1bm5pbmdcIikge1xuICAgICAgLy8gUnVubmluZyB0YXNrOiBzaG93IHRpbWVyXG4gICAgICBjb25zdCB0aW1lckVsID0gdGFza0l0ZW0uY3JlYXRlRWwoXCJzcGFuXCIsIHtcbiAgICAgICAgY2xzOiBcInRhc2stdGltZXItZGlzcGxheVwiLFxuICAgICAgfSk7XG4gICAgICB0aGlzLnVwZGF0ZVRpbWVyRGlzcGxheSh0aW1lckVsLCBpbnN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSWRsZSB0YXNrOiBzaG93IHBsYWNlaG9sZGVyXG4gICAgICB0YXNrSXRlbS5jcmVhdGVFbChcInNwYW5cIiwge1xuICAgICAgICBjbHM6IFwidGFzay1kdXJhdGlvbi1wbGFjZWhvbGRlclwiLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVDb21tZW50QnV0dG9uKHRhc2tJdGVtOiBIVE1MRWxlbWVudCwgaW5zdDogVGFza0luc3RhbmNlKTogdm9pZCB7XG4gICAgY29uc3QgY29tbWVudEJ1dHRvbiA9IHRhc2tJdGVtLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcbiAgICAgIGNsczogXCJjb21tZW50LWJ1dHRvblwiLFxuICAgICAgdGV4dDogXCJcdUQ4M0RcdURDQUNcIixcbiAgICAgIGF0dHI6IHtcbiAgICAgICAgXCJkYXRhLXRhc2stc3RhdGVcIjogaW5zdC5zdGF0ZSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBFbmFibGUgb25seSBmb3IgY29tcGxldGVkIHRhc2tzXG4gICAgaWYgKGluc3Quc3RhdGUgIT09IFwiZG9uZVwiKSB7XG4gICAgICBjb21tZW50QnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcbiAgICAgIGNvbW1lbnRCdXR0b24uc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpO1xuICAgIH1cblxuICAgIGNvbW1lbnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jIChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgaWYgKGluc3Quc3RhdGUgIT09IFwiZG9uZVwiKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIFNob3cgY29tbWVudCBtb2RhbCBmb3IgY29tcGxldGVkIHRhc2tzXG4gICAgICBhd2FpdCB0aGlzLnNob3dUYXNrQ29tcGxldGlvbk1vZGFsKGluc3QpO1xuICAgIH0pO1xuXG4gICAgLy8gVXBkYXRlIGNvbW1lbnQgc3RhdGUgYmFzZWQgb24gZXhpc3RpbmcgY29tbWVudHNcbiAgICB0aGlzLmhhc0NvbW1lbnREYXRhKGluc3QpLnRoZW4oKGhhc0NvbW1lbnQpID0+IHtcbiAgICAgIGlmIChoYXNDb21tZW50KSB7XG4gICAgICAgIGNvbW1lbnRCdXR0b24uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbW1lbnRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICAgICAgaWYgKGluc3Quc3RhdGUgPT09IFwiZG9uZVwiKSB7XG4gICAgICAgICAgY29tbWVudEJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwibm8tY29tbWVudFwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVSb3V0aW5lQnV0dG9uKHRhc2tJdGVtOiBIVE1MRWxlbWVudCwgaW5zdDogVGFza0luc3RhbmNlKTogdm9pZCB7XG4gICAgY29uc3Qgcm91dGluZUJ1dHRvbiA9IHRhc2tJdGVtLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcbiAgICAgIGNsczogYHJvdXRpbmUtYnV0dG9uICR7aW5zdC50YXNrLmlzUm91dGluZSA/IFwiYWN0aXZlXCIgOiBcIlwifWAsXG4gICAgICB0ZXh0OiBcIlx1RDgzRFx1REQwNFwiLFxuICAgICAgYXR0cjoge1xuICAgICAgICB0aXRsZTogaW5zdC50YXNrLmlzUm91dGluZVxuICAgICAgICAgID8gYFx1MzBFQlx1MzBGQ1x1MzBDMVx1MzBGM1x1MzBCRlx1MzBCOVx1MzBBRmBcbiAgICAgICAgICA6IFwiXHUzMEVCXHUzMEZDXHUzMEMxXHUzMEYzXHUzMEJGXHUzMEI5XHUzMEFGXHUzMDZCXHU4QTJEXHU1QjlBXCIsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgcm91dGluZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBpZiAoaW5zdC50YXNrLmlzUm91dGluZSkge1xuICAgICAgICB0aGlzLnNob3dSb3V0aW5lRWRpdE1vZGFsKGluc3QudGFzaywgcm91dGluZUJ1dHRvbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnRvZ2dsZVJvdXRpbmUoaW5zdC50YXNrLCByb3V0aW5lQnV0dG9uKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlU2V0dGluZ3NCdXR0b24odGFza0l0ZW06IEhUTUxFbGVtZW50LCBpbnN0OiBUYXNrSW5zdGFuY2UpOiB2b2lkIHtcbiAgICBjb25zdCBzZXR0aW5nc0J1dHRvbiA9IHRhc2tJdGVtLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcbiAgICAgIGNsczogXCJzZXR0aW5ncy10YXNrLWJ1dHRvblwiLFxuICAgICAgdGV4dDogXCJcdTI2OTlcdUZFMEZcIixcbiAgICAgIGF0dHI6IHsgdGl0bGU6IFwiXHUzMEJGXHUzMEI5XHUzMEFGXHU4QTJEXHU1QjlBXCIgfSxcbiAgICB9KTtcblxuICAgIHNldHRpbmdzQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHRoaXMuc2hvd1Rhc2tTZXR0aW5nc1Rvb2x0aXAoaW5zdCwgc2V0dGluZ3NCdXR0b24pO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBNaXNzaW5nIE1ldGhvZCBQbGFjZWhvbGRlcnNcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIHByaXZhdGUgYXN5bmMgZHVwbGljYXRlQW5kU3RhcnRJbnN0YW5jZShpbnN0OiBUYXNrSW5zdGFuY2UpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCB0aGlzLmR1cGxpY2F0ZUluc3RhbmNlKGluc3QpO1xuICB9XG4gIFxuICBwcml2YXRlIGFzeW5jIGR1cGxpY2F0ZUluc3RhbmNlKGluc3Q6IFRhc2tJbnN0YW5jZSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBcdTY1QjBcdTMwNTdcdTMwNDRcdTMwQTRcdTMwRjNcdTMwQjlcdTMwQkZcdTMwRjNcdTMwQjlcdTMwOTJcdTRGNUNcdTYyMTBcbiAgICAgIGNvbnN0IG5ld0luc3RhbmNlOiBUYXNrSW5zdGFuY2UgPSB7XG4gICAgICAgIC4uLmluc3QsXG4gICAgICAgIGluc3RhbmNlSWQ6IHRoaXMuZ2VuZXJhdGVJbnN0YW5jZUlkKGluc3QudGFzay5wYXRoKSxcbiAgICAgICAgc3RhdGU6IFwiaWRsZVwiLFxuICAgICAgICBzdGFydFRpbWU6IHVuZGVmaW5lZCxcbiAgICAgICAgc3RvcFRpbWU6IHVuZGVmaW5lZCxcbiAgICAgIH07XG4gICAgICBcbiAgICAgIC8vIFx1MzBBNFx1MzBGM1x1MzBCOVx1MzBCRlx1MzBGM1x1MzBCOVx1MzBFQVx1MzBCOVx1MzBDOFx1MzA2Qlx1OEZGRFx1NTJBMFxuICAgICAgdGhpcy50YXNrSW5zdGFuY2VzLnB1c2gobmV3SW5zdGFuY2UpO1xuICAgICAgXG4gICAgICAvLyBcdTcyQjZcdTYxNEJcdTMwOTJcdTRGRERcdTVCNThcbiAgICAgIHRoaXMuc2F2ZUluc3RhbmNlU3RhdGUobmV3SW5zdGFuY2UpO1xuICAgICAgXG4gICAgICAvLyBVSVx1MzA5Mlx1NjZGNFx1NjVCMFxuICAgICAgdGhpcy5yZW5kZXJUYXNrTGlzdCgpO1xuICAgICAgXG4gICAgICBuZXcgTm90aWNlKGBcdTMwMEMke2luc3QudGFzay50aXRsZX1cdTMwMERcdTMwOTJcdTg5MDdcdTg4RkRcdTMwNTdcdTMwN0VcdTMwNTdcdTMwNUZgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBkdXBsaWNhdGUgaW5zdGFuY2U6XCIsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoXCJcdTMwQkZcdTMwQjlcdTMwQUZcdTMwNkVcdTg5MDdcdTg4RkRcdTMwNkJcdTU5MzFcdTY1NTdcdTMwNTdcdTMwN0VcdTMwNTdcdTMwNUZcIik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzaG93VGFza0NvbXBsZXRpb25Nb2RhbChpbnN0OiBUYXNrSW5zdGFuY2UpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBcdTY1RTJcdTVCNThcdTMwNkVcdTMwQjNcdTMwRTFcdTMwRjNcdTMwQzhcdTMwQzdcdTMwRkNcdTMwQkZcdTMwOTJcdTUzRDZcdTVGOTdcbiAgICBjb25zdCBleGlzdGluZ0NvbW1lbnQgPSBhd2FpdCB0aGlzLmdldEV4aXN0aW5nVGFza0NvbW1lbnQoaW5zdCk7XG4gICAgXG4gICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIG1vZGFsLmNsYXNzTmFtZSA9IFwidGFzay1tb2RhbC1vdmVybGF5XCI7XG4gICAgY29uc3QgbW9kYWxDb250ZW50ID0gbW9kYWwuY3JlYXRlRWwoXCJkaXZcIiwge1xuICAgICAgY2xzOiBcInRhc2stbW9kYWwtY29udGVudCBjb21wbGV0aW9uLW1vZGFsXCIsXG4gICAgfSk7XG4gICAgXG4gICAgLy8gXHUzMEQ4XHUzMEMzXHUzMEMwXHUzMEZDXG4gICAgY29uc3QgaGVhZGVyID0gbW9kYWxDb250ZW50LmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcIm1vZGFsLWhlYWRlclwiIH0pO1xuICAgIGNvbnN0IGlzQ29tcGxldGVkID0gaW5zdC5zdGF0ZSA9PT0gXCJkb25lXCI7XG4gICAgY29uc3QgaGVhZGVyVGV4dCA9IGV4aXN0aW5nQ29tbWVudFxuICAgICAgPyBgXHUyNzBGXHVGRTBGIFx1MzAwQyR7aW5zdC50YXNrLnRpdGxlfVx1MzAwRFx1MzA2RVx1MzBCM1x1MzBFMVx1MzBGM1x1MzBDOFx1MzA5Mlx1N0RFOFx1OTZDNmBcbiAgICAgIDogYFx1RDgzQ1x1REY4OSBcdTMwNEFcdTc1QjJcdTMwOENcdTY5RDhcdTMwNjdcdTMwNTdcdTMwNUZcdUZGMDFcdTMwMEMke2luc3QudGFzay50aXRsZX1cdTMwMERcdTMwNENcdTVCOENcdTRFODZcdTMwNTdcdTMwN0VcdTMwNTdcdTMwNUZgO1xuICAgIFxuICAgIGhlYWRlci5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogaGVhZGVyVGV4dCB9KTtcbiAgICBcbiAgICAvLyBcdTk1ODlcdTMwNThcdTMwOEJcdTMwRENcdTMwQkZcdTMwRjNcbiAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IGhlYWRlci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG4gICAgICBjbHM6IFwibW9kYWwtY2xvc2UtYnV0dG9uXCIsXG4gICAgICB0ZXh0OiBcIlx1MDBEN1wiLFxuICAgIH0pO1xuICAgIFxuICAgIC8vIFx1MzBENVx1MzBBOVx1MzBGQ1x1MzBFMFxuICAgIGNvbnN0IGZvcm0gPSBtb2RhbENvbnRlbnQuY3JlYXRlRWwoXCJmb3JtXCIsIHsgY2xzOiBcInRhc2stZm9ybVwiIH0pO1xuICAgIFxuICAgIC8vIFx1MzBCM1x1MzBFMVx1MzBGM1x1MzBDOFx1NTE2NVx1NTI5QlxuICAgIGNvbnN0IGNvbW1lbnRHcm91cCA9IGZvcm0uY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwiZm9ybS1ncm91cFwiIH0pO1xuICAgIGNvbW1lbnRHcm91cC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJcdTMwQjNcdTMwRTFcdTMwRjNcdTMwQzg6XCIsIGNsczogXCJmb3JtLWxhYmVsXCIgfSk7XG4gICAgY29uc3QgY29tbWVudElucHV0ID0gY29tbWVudEdyb3VwLmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwge1xuICAgICAgY2xzOiBcImZvcm0tdGV4dGFyZWFcIixcbiAgICAgIHBsYWNlaG9sZGVyOiBcIlx1MzBCRlx1MzBCOVx1MzBBRlx1MzA2RVx1NjMyRlx1MzA4QVx1OEZENFx1MzA4QVx1MzA4NFx1NkMxN1x1MzA2NVx1MzA0RFx1MzA5Mlx1OEExOFx1OTMzMi4uLlwiLFxuICAgICAgdmFsdWU6IGV4aXN0aW5nQ29tbWVudD8uY29tbWVudCB8fCBcIlwiLFxuICAgIH0pO1xuICAgIFxuICAgIC8vIFx1MzBBOFx1MzBDRFx1MzBFQlx1MzBBRVx1MzBGQ1x1MzBFQ1x1MzBEOVx1MzBFQlxuICAgIGNvbnN0IGVuZXJneUdyb3VwID0gZm9ybS5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJmb3JtLWdyb3VwIHNsaWRlci1ncm91cFwiIH0pO1xuICAgIGVuZXJneUdyb3VwLmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIlx1OTZDNlx1NEUyRFx1NUVBNjpcIiwgY2xzOiBcImZvcm0tbGFiZWxcIiB9KTtcbiAgICBjb25zdCBlbmVyZ3lWYWx1ZSA9IGVuZXJneUdyb3VwLmNyZWF0ZUVsKFwic3BhblwiLCB7XG4gICAgICBjbHM6IFwic2xpZGVyLXZhbHVlXCIsXG4gICAgICB0ZXh0OiBleGlzdGluZ0NvbW1lbnQ/LmVuZXJneSB8fCBcIjVcIixcbiAgICB9KTtcbiAgICBjb25zdCBlbmVyZ3lTbGlkZXIgPSBlbmVyZ3lHcm91cC5jcmVhdGVFbChcImlucHV0XCIsIHtcbiAgICAgIHR5cGU6IFwicmFuZ2VcIixcbiAgICAgIGNsczogXCJmb3JtLXNsaWRlclwiLFxuICAgICAgbWluOiBcIjFcIixcbiAgICAgIG1heDogXCIxMFwiLFxuICAgICAgdmFsdWU6IGV4aXN0aW5nQ29tbWVudD8uZW5lcmd5IHx8IFwiNVwiLFxuICAgIH0pO1xuICAgIFxuICAgIGVuZXJneVNsaWRlci5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgZW5lcmd5VmFsdWUudGV4dENvbnRlbnQgPSBlbmVyZ3lTbGlkZXIudmFsdWU7XG4gICAgfSk7XG4gICAgXG4gICAgLy8gXHU3NUIyXHU1MkI0XHU1RUE2XG4gICAgY29uc3QgZm9jdXNHcm91cCA9IGZvcm0uY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwiZm9ybS1ncm91cCBzbGlkZXItZ3JvdXBcIiB9KTtcbiAgICBmb2N1c0dyb3VwLmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIlx1NzVCMlx1NTJCNFx1NUVBNjpcIiwgY2xzOiBcImZvcm0tbGFiZWxcIiB9KTtcbiAgICBjb25zdCBmb2N1c1ZhbHVlID0gZm9jdXNHcm91cC5jcmVhdGVFbChcInNwYW5cIiwge1xuICAgICAgY2xzOiBcInNsaWRlci12YWx1ZVwiLFxuICAgICAgdGV4dDogZXhpc3RpbmdDb21tZW50Py5mb2N1cyB8fCBcIjVcIixcbiAgICB9KTtcbiAgICBjb25zdCBmb2N1c1NsaWRlciA9IGZvY3VzR3JvdXAuY3JlYXRlRWwoXCJpbnB1dFwiLCB7XG4gICAgICB0eXBlOiBcInJhbmdlXCIsXG4gICAgICBjbHM6IFwiZm9ybS1zbGlkZXJcIixcbiAgICAgIG1pbjogXCIxXCIsXG4gICAgICBtYXg6IFwiMTBcIixcbiAgICAgIHZhbHVlOiBleGlzdGluZ0NvbW1lbnQ/LmZvY3VzIHx8IFwiNVwiLFxuICAgIH0pO1xuICAgIFxuICAgIGZvY3VzU2xpZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICBmb2N1c1ZhbHVlLnRleHRDb250ZW50ID0gZm9jdXNTbGlkZXIudmFsdWU7XG4gICAgfSk7XG4gICAgXG4gICAgLy8gXHUzMERDXHUzMEJGXHUzMEYzXHUzMEE4XHUzMEVBXHUzMEEyXG4gICAgY29uc3QgYnV0dG9uR3JvdXAgPSBmb3JtLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcImZvcm0tYnV0dG9uLWdyb3VwXCIgfSk7XG4gICAgY29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uR3JvdXAuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgIGNsczogXCJmb3JtLWJ1dHRvbiBjYW5jZWxcIixcbiAgICAgIHRleHQ6IFwiXHUzMEFEXHUzMEUzXHUzMEYzXHUzMEJCXHUzMEVCXCIsXG4gICAgfSk7XG4gICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IGJ1dHRvbkdyb3VwLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcbiAgICAgIHR5cGU6IFwic3VibWl0XCIsXG4gICAgICBjbHM6IFwiZm9ybS1idXR0b24gY3JlYXRlXCIsXG4gICAgICB0ZXh0OiBcIlx1NEZERFx1NUI1OFwiLFxuICAgIH0pO1xuICAgIFxuICAgIC8vIFx1MzBBNFx1MzBEOVx1MzBGM1x1MzBDOFx1MzBFQVx1MzBCOVx1MzBDQVx1MzBGQ1xuICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG1vZGFsKTtcbiAgICB9KTtcbiAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobW9kYWwpO1xuICAgIH0pO1xuICAgIFxuICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBhc3luYyAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgYXdhaXQgdGhpcy5zYXZlVGFza0NvbW1lbnQoaW5zdCwge1xuICAgICAgICBjb21tZW50OiAoY29tbWVudElucHV0IGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQpLnZhbHVlLFxuICAgICAgICBlbmVyZ3k6IHBhcnNlSW50KGVuZXJneVNsaWRlci52YWx1ZSksXG4gICAgICAgIGZvY3VzOiBwYXJzZUludChmb2N1c1NsaWRlci52YWx1ZSksXG4gICAgICB9KTtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobW9kYWwpO1xuICAgICAgdGhpcy5yZW5kZXJUYXNrTGlzdCgpO1xuICAgIH0pO1xuICAgIFxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobW9kYWwpO1xuICAgIGNvbW1lbnRJbnB1dC5mb2N1cygpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBoYXNDb21tZW50RGF0YShpbnN0OiBUYXNrSW5zdGFuY2UpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29tbWVudCA9IGF3YWl0IHRoaXMuZ2V0RXhpc3RpbmdUYXNrQ29tbWVudChpbnN0KTtcbiAgICAgIHJldHVybiBjb21tZW50ICE9PSBudWxsICYmIChjb21tZW50LmNvbW1lbnQgfHwgY29tbWVudC5lbmVyZ3kgfHwgY29tbWVudC5mb2N1cyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgXG4gIHByaXZhdGUgYXN5bmMgZ2V0RXhpc3RpbmdUYXNrQ29tbWVudChpbnN0OiBUYXNrSW5zdGFuY2UpOiBQcm9taXNlPGFueT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBcdTMwQjNcdTMwRTFcdTMwRjNcdTMwQzhcdTMwQzdcdTMwRkNcdTMwQkZcdTMwOTJsb2NhbFN0b3JhZ2VcdTMwNEJcdTMwODlcdTUzRDZcdTVGOTdcbiAgICAgIGNvbnN0IGRhdGVTdHIgPSB0aGlzLmdldEN1cnJlbnREYXRlU3RyaW5nKCk7XG4gICAgICBjb25zdCBrZXkgPSBgdGFza2NodXRlLWNvbW1lbnQtJHtkYXRlU3RyfS0ke2luc3QuaW5zdGFuY2VJZH1gO1xuICAgICAgY29uc3QgZGF0YSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG4gICAgICByZXR1cm4gZGF0YSA/IEpTT04ucGFyc2UoZGF0YSkgOiBudWxsO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cbiAgXG4gIHByaXZhdGUgYXN5bmMgc2F2ZVRhc2tDb21tZW50KGluc3Q6IFRhc2tJbnN0YW5jZSwgZGF0YTogeyBjb21tZW50OiBzdHJpbmc7IGVuZXJneTogbnVtYmVyOyBmb2N1czogbnVtYmVyIH0pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gXHUzMEIzXHUzMEUxXHUzMEYzXHUzMEM4XHUzMEM3XHUzMEZDXHUzMEJGXHUzMDkybG9jYWxTdG9yYWdlXHUzMDZCXHU0RkREXHU1QjU4XG4gICAgICBjb25zdCBkYXRlU3RyID0gdGhpcy5nZXRDdXJyZW50RGF0ZVN0cmluZygpO1xuICAgICAgY29uc3Qga2V5ID0gYHRhc2tjaHV0ZS1jb21tZW50LSR7ZGF0ZVN0cn0tJHtpbnN0Lmluc3RhbmNlSWR9YDtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgICAgXG4gICAgICBuZXcgTm90aWNlKFwiXHUzMEIzXHUzMEUxXHUzMEYzXHUzMEM4XHUzMDkyXHU0RkREXHU1QjU4XHUzMDU3XHUzMDdFXHUzMDU3XHUzMDVGXCIpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIHNhdmUgY29tbWVudDpcIiwgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZShcIlx1MzBCM1x1MzBFMVx1MzBGM1x1MzBDOFx1MzA2RVx1NEZERFx1NUI1OFx1MzA2Qlx1NTkzMVx1NjU1N1x1MzA1N1x1MzA3RVx1MzA1N1x1MzA1RlwiKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNob3dSb3V0aW5lRWRpdE1vZGFsKHRhc2s6IGFueSwgYnV0dG9uOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIC8vIFx1MzBFMlx1MzBGQ1x1MzBDMFx1MzBFQlx1MzBCM1x1MzBGM1x1MzBDNlx1MzBDQVxuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBtb2RhbC5jbGFzc05hbWUgPSBcInRhc2stbW9kYWwtb3ZlcmxheVwiO1xuICAgIGNvbnN0IG1vZGFsQ29udGVudCA9IG1vZGFsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcInRhc2stbW9kYWwtY29udGVudFwiIH0pO1xuICAgIFxuICAgIC8vIFx1MzBFMlx1MzBGQ1x1MzBDMFx1MzBFQlx1MzBEOFx1MzBDM1x1MzBDMFx1MzBGQ1xuICAgIGNvbnN0IG1vZGFsSGVhZGVyID0gbW9kYWxDb250ZW50LmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcIm1vZGFsLWhlYWRlclwiIH0pO1xuICAgIG1vZGFsSGVhZGVyLmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBgXHUzMDBDJHt0YXNrLnRpdGxlfVx1MzAwRFx1MzA2RVx1MzBFQlx1MzBGQ1x1MzBDMVx1MzBGM1x1OEEyRFx1NUI5QWAgfSk7XG4gICAgXG4gICAgLy8gXHU5NTg5XHUzMDU4XHUzMDhCXHUzMERDXHUzMEJGXHUzMEYzXG4gICAgY29uc3QgY2xvc2VCdXR0b24gPSBtb2RhbEhlYWRlci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG4gICAgICBjbHM6IFwibW9kYWwtY2xvc2UtYnV0dG9uXCIsXG4gICAgICB0ZXh0OiBcIlx1MDBEN1wiLFxuICAgICAgYXR0cjogeyB0aXRsZTogXCJcdTk1ODlcdTMwNThcdTMwOEJcIiB9LFxuICAgIH0pO1xuICAgIFxuICAgIC8vIFx1MzBENVx1MzBBOVx1MzBGQ1x1MzBFMFxuICAgIGNvbnN0IGZvcm0gPSBtb2RhbENvbnRlbnQuY3JlYXRlRWwoXCJmb3JtXCIsIHsgY2xzOiBcInRhc2stZm9ybVwiIH0pO1xuICAgIFxuICAgIC8vIFx1OTU4Qlx1NTlDQlx1NjY0Mlx1NTIzQlx1NTE2NVx1NTI5QlxuICAgIGNvbnN0IHRpbWVHcm91cCA9IGZvcm0uY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwiZm9ybS1ncm91cFwiIH0pO1xuICAgIHRpbWVHcm91cC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJcdTk1OEJcdTU5Q0JcdTRFODhcdTVCOUFcdTY2NDJcdTUyM0I6XCIsIGNsczogXCJmb3JtLWxhYmVsXCIgfSk7XG4gICAgY29uc3QgdGltZUlucHV0ID0gdGltZUdyb3VwLmNyZWF0ZUVsKFwiaW5wdXRcIiwge1xuICAgICAgdHlwZTogXCJ0aW1lXCIsXG4gICAgICBjbHM6IFwiZm9ybS1pbnB1dFwiLFxuICAgICAgdmFsdWU6IHRhc2suc2NoZWR1bGVkVGltZSB8fCBcIjA5OjAwXCIsXG4gICAgfSkgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBcbiAgICAvLyBcdThBQUNcdTY2MEVcbiAgICBjb25zdCBkZXNjR3JvdXAgPSBmb3JtLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcImZvcm0tZ3JvdXBcIiB9KTtcbiAgICBjb25zdCBkZXNjVGV4dCA9IGRlc2NHcm91cC5jcmVhdGVFbChcInBcIiwge1xuICAgICAgY2xzOiBcImZvcm0tZGVzY3JpcHRpb25cIixcbiAgICAgIHRleHQ6IGBcdTZCQ0VcdTY1RTUke3RpbWVJbnB1dC52YWx1ZX1cdTMwNkJcdTMwRUJcdTMwRkNcdTMwQzFcdTMwRjNcdTMwQkZcdTMwQjlcdTMwQUZcdTMwNjhcdTMwNTdcdTMwNjZcdTVCOUZcdTg4NENcdTRFODhcdTVCOUFcdTMwNjdcdTMwNTlcdTMwMDJgLFxuICAgIH0pO1xuICAgIFxuICAgIC8vIFx1NjY0Mlx1NTIzQlx1NTkwOVx1NjZGNFx1NjY0Mlx1MzA2Qlx1OEFBQ1x1NjYwRVx1NjU4N1x1MzA5Mlx1NjZGNFx1NjVCMFxuICAgIHRpbWVJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgZGVzY1RleHQudGV4dENvbnRlbnQgPSBgXHU2QkNFXHU2NUU1JHt0aW1lSW5wdXQudmFsdWV9XHUzMDZCXHUzMEVCXHUzMEZDXHUzMEMxXHUzMEYzXHUzMEJGXHUzMEI5XHUzMEFGXHUzMDY4XHUzMDU3XHUzMDY2XHU1QjlGXHU4ODRDXHU0RTg4XHU1QjlBXHUzMDY3XHUzMDU5XHUzMDAyYDtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBcdTMwRENcdTMwQkZcdTMwRjNcdTMwQThcdTMwRUFcdTMwQTJcbiAgICBjb25zdCBidXR0b25Hcm91cCA9IGZvcm0uY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwiZm9ybS1idXR0b24tZ3JvdXBcIiB9KTtcbiAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBidXR0b25Hcm91cC5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG4gICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgY2xzOiBcImZvcm0tYnV0dG9uIGNhbmNlbFwiLFxuICAgICAgdGV4dDogXCJcdTMwQURcdTMwRTNcdTMwRjNcdTMwQkJcdTMwRUJcIixcbiAgICB9KTtcbiAgICBjb25zdCBzYXZlQnV0dG9uID0gYnV0dG9uR3JvdXAuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuICAgICAgdHlwZTogXCJzdWJtaXRcIixcbiAgICAgIGNsczogXCJmb3JtLWJ1dHRvbiBjcmVhdGVcIixcbiAgICAgIHRleHQ6IFwiXHU0RkREXHU1QjU4XCIsXG4gICAgfSk7XG4gICAgXG4gICAgLy8gXHU2NUUyXHU1QjU4XHUzMDZFXHUzMEVCXHUzMEZDXHUzMEMxXHUzMEYzXHUzMEJGXHUzMEI5XHUzMEFGXHUzMDZFXHU1ODM0XHU1NDA4XHUzMDZFXHUzMDdGXHUzMDBDXHUzMEVCXHUzMEZDXHUzMEMxXHUzMEYzXHUzMDkyXHU1OTE2XHUzMDU5XHUzMDBEXHUzMERDXHUzMEJGXHUzMEYzXHUzMDkyXHU4ODY4XHU3OTNBXG4gICAgbGV0IHJlbW92ZUJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgICBpZiAodGFzay5pc1JvdXRpbmUpIHtcbiAgICAgIHJlbW92ZUJ1dHRvbiA9IGJ1dHRvbkdyb3VwLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcbiAgICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgICAgY2xzOiBcImZvcm0tYnV0dG9uIGNhbmNlbFwiLFxuICAgICAgICB0ZXh0OiBcIlx1MzBFQlx1MzBGQ1x1MzBDMVx1MzBGM1x1MzA5Mlx1NTkxNlx1MzA1OVwiLFxuICAgICAgfSkgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgfVxuICAgIFxuICAgIC8vIFx1MzBBNFx1MzBEOVx1MzBGM1x1MzBDOFx1MzBFQVx1MzBCOVx1MzBDQVx1MzBGQ1xuICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG1vZGFsKTtcbiAgICB9KTtcbiAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobW9kYWwpO1xuICAgIH0pO1xuICAgIFxuICAgIGlmIChyZW1vdmVCdXR0b24pIHtcbiAgICAgIHJlbW92ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBhd2FpdCB0aGlzLnRvZ2dsZVJvdXRpbmUodGFzaywgYnV0dG9uKTtcbiAgICAgICAgaWYgKG1vZGFsLnBhcmVudE5vZGUpIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobW9kYWwpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBhc3luYyAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc3Qgc2NoZWR1bGVkVGltZSA9IHRpbWVJbnB1dC52YWx1ZTtcbiAgICAgIFxuICAgICAgaWYgKCFzY2hlZHVsZWRUaW1lKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJcdTk1OEJcdTU5Q0JcdTY2NDJcdTUyM0JcdTMwOTJcdTUxNjVcdTUyOUJcdTMwNTdcdTMwNjZcdTMwNEZcdTMwNjBcdTMwNTVcdTMwNDRcIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgYXdhaXQgdGhpcy5zZXRSb3V0aW5lVGFzayh0YXNrLCBidXR0b24sIHNjaGVkdWxlZFRpbWUpO1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChtb2RhbCk7XG4gICAgfSk7XG4gICAgXG4gICAgLy8gXHUzMEUyXHUzMEZDXHUzMEMwXHUzMEVCXHUzMDkyXHU4ODY4XHU3OTNBXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtb2RhbCk7XG4gICAgdGltZUlucHV0LmZvY3VzKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHRvZ2dsZVJvdXRpbmUodGFzazogYW55LCBidXR0b246IEhUTUxFbGVtZW50KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFx1MzBCRlx1MzBCOVx1MzBBRlx1NTQwRFx1MzA0Qlx1MzA4OVx1MzBENVx1MzBBMVx1MzBBNFx1MzBFQlx1MzA5Mlx1NjNBMlx1MzA1OVxuICAgICAgY29uc3QgdGFza0ZvbGRlclBhdGggPSB0aGlzLnBsdWdpbi5wYXRoTWFuYWdlci5nZXRUYXNrRm9sZGVyUGF0aCgpO1xuICAgICAgY29uc3QgZmlsZVBhdGggPSBgJHt0YXNrRm9sZGVyUGF0aH0vJHt0YXNrLnRpdGxlfS5tZGA7XG4gICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcbiAgICAgIFxuICAgICAgaWYgKCFmaWxlIHx8ICEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuICAgICAgICBuZXcgTm90aWNlKGBcdTMwQkZcdTMwQjlcdTMwQUZcdTMwRDVcdTMwQTFcdTMwQTRcdTMwRUJcdTMwMEMke3Rhc2sudGl0bGV9Lm1kXHUzMDBEXHUzMDRDXHU4OThCXHUzMDY0XHUzMDRCXHUzMDhBXHUzMDdFXHUzMDVCXHUzMDkzYCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHRhc2suaXNSb3V0aW5lKSB7XG4gICAgICAgIC8vIFx1MzBFQlx1MzBGQ1x1MzBDMVx1MzBGM1x1MzBCRlx1MzBCOVx1MzBBRlx1MzA5Mlx1ODlFM1x1OTY2NFxuICAgICAgICBhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci5wcm9jZXNzRnJvbnRNYXR0ZXIoZmlsZSwgKGZyb250bWF0dGVyKSA9PiB7XG4gICAgICAgICAgY29uc3QgeSA9IHRoaXMuY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICBjb25zdCBtID0gKHRoaXMuY3VycmVudERhdGUuZ2V0TW9udGgoKSArIDEpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpO1xuICAgICAgICAgIGNvbnN0IGQgPSB0aGlzLmN1cnJlbnREYXRlLmdldERhdGUoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcbiAgICAgICAgICBmcm9udG1hdHRlci5yb3V0aW5lX2VuZCA9IGAke3l9LSR7bX0tJHtkfWA7XG4gICAgICAgICAgZnJvbnRtYXR0ZXIuaXNSb3V0aW5lID0gZmFsc2U7XG4gICAgICAgICAgZGVsZXRlIGZyb250bWF0dGVyLlx1OTU4Qlx1NTlDQlx1NjY0Mlx1NTIzQjtcbiAgICAgICAgICByZXR1cm4gZnJvbnRtYXR0ZXI7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU3MkI2XHU2MTRCXHUzMEVBXHUzMEJCXHUzMEMzXHUzMEM4XG4gICAgICAgIHRhc2suaXNSb3V0aW5lID0gZmFsc2U7XG4gICAgICAgIHRhc2suc2NoZWR1bGVkVGltZSA9IG51bGw7XG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKFwidGl0bGVcIiwgXCJcdTMwRUJcdTMwRkNcdTMwQzFcdTMwRjNcdTMwQkZcdTMwQjlcdTMwQUZcdTMwNkJcdThBMkRcdTVCOUFcIik7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTMwQkZcdTMwQjlcdTMwQUZcdTYwQzVcdTU4MzFcdTMwOTJcdTUxOERcdTUzRDZcdTVGOTdcdTMwNTdcdTMwMDFVSVx1MzA5Mlx1NjcwMFx1NjVCMFx1NTMxNlxuICAgICAgICBhd2FpdCB0aGlzLmxvYWRUYXNrcygpO1xuICAgICAgICBuZXcgTm90aWNlKGBcdTMwMEMke3Rhc2sudGl0bGV9XHUzMDBEXHUzMDkyXHUzMEVCXHUzMEZDXHUzMEMxXHUzMEYzXHUzMEJGXHUzMEI5XHUzMEFGXHUzMDRCXHUzMDg5XHU4OUUzXHU5NjY0XHUzMDU3XHUzMDdFXHUzMDU3XHUzMDVGYCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBcdTMwRUJcdTMwRkNcdTMwQzFcdTMwRjNcdTMwQkZcdTMwQjlcdTMwQUZcdTMwNkJcdThBMkRcdTVCOUFcdUZGMDhcdTY2NDJcdTUyM0JcdTUxNjVcdTUyOUJcdTMwRERcdTMwQzNcdTMwRDdcdTMwQTJcdTMwQzNcdTMwRDdcdTMwOTJcdTg4NjhcdTc5M0FcdUZGMDlcbiAgICAgICAgdGhpcy5zaG93Um91dGluZUVkaXRNb2RhbCh0YXNrLCBidXR0b24pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBuZXcgTm90aWNlKFwiXHUzMEVCXHUzMEZDXHUzMEMxXHUzMEYzXHUzMEJGXHUzMEI5XHUzMEFGXHUzMDZFXHU4QTJEXHU1QjlBXHUzMDZCXHU1OTMxXHU2NTU3XHUzMDU3XHUzMDdFXHUzMDU3XHUzMDVGXCIpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2hvd1Rhc2tTZXR0aW5nc1Rvb2x0aXAoaW5zdDogVGFza0luc3RhbmNlLCBidXR0b246IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgLy8gXHU2NUUyXHU1QjU4XHUzMDZFXHUzMEM0XHUzMEZDXHUzMEVCXHUzMEMxXHUzMEMzXHUzMEQ3XHUzMDkyXHU1MjRBXHU5NjY0XG4gICAgY29uc3QgZXhpc3RpbmdUb29sdGlwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrLXNldHRpbmdzLXRvb2x0aXBcIik7XG4gICAgaWYgKGV4aXN0aW5nVG9vbHRpcCkge1xuICAgICAgZXhpc3RpbmdUb29sdGlwLnJlbW92ZSgpO1xuICAgIH1cbiAgICBcbiAgICAvLyBcdTMwQzRcdTMwRkNcdTMwRUJcdTMwQzFcdTMwQzNcdTMwRDdcdTMwQjNcdTMwRjNcdTMwQzZcdTMwQ0FcdTMwOTJcdTRGNUNcdTYyMTBcbiAgICBjb25zdCB0b29sdGlwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0b29sdGlwLmNsYXNzTmFtZSA9IFwidGFzay1zZXR0aW5ncy10b29sdGlwXCI7XG4gICAgXG4gICAgLy8gXHUzMEQ4XHUzMEMzXHUzMEMwXHUzMEZDXHU5MEU4XHU1MjA2XHVGRjA4XHUzMEQwXHUzMEM0XHUzMERDXHUzMEJGXHUzMEYzXHU3NTI4XHVGRjA5XG4gICAgY29uc3QgdG9vbHRpcEhlYWRlciA9IHRvb2x0aXAuY3JlYXRlRWwoXCJkaXZcIiwge1xuICAgICAgY2xzOiBcInRvb2x0aXAtaGVhZGVyXCIsXG4gICAgfSk7XG4gICAgXG4gICAgLy8gXHUzMEQwXHUzMEM0XHUzMERDXHUzMEJGXHUzMEYzXHUzMDkyXHU4RkZEXHU1MkEwXG4gICAgY29uc3QgY2xvc2VCdXR0b24gPSB0b29sdGlwSGVhZGVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcbiAgICAgIGNsczogXCJ0b29sdGlwLWNsb3NlLWJ1dHRvblwiLFxuICAgICAgdGV4dDogXCJcdTAwRDdcIixcbiAgICAgIGF0dHI6IHsgdGl0bGU6IFwiXHU5NTg5XHUzMDU4XHUzMDhCXCIgfSxcbiAgICB9KTtcbiAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0b29sdGlwLnJlbW92ZSgpO1xuICAgIH0pO1xuICAgIFxuICAgIC8vIFx1MzAwQ1x1NjcyQVx1NUI5Rlx1ODg0Q1x1MzA2Qlx1NjIzQlx1MzA1OVx1MzAwRFx1OTgwNVx1NzZFRVx1MzA5Mlx1OEZGRFx1NTJBMFxuICAgIGNvbnN0IHJlc2V0SXRlbSA9IHRvb2x0aXAuY3JlYXRlRWwoXCJkaXZcIiwge1xuICAgICAgY2xzOiBcInRvb2x0aXAtaXRlbVwiLFxuICAgICAgdGV4dDogXCJcdTIxQTlcdUZFMEYgXHU2NzJBXHU1QjlGXHU4ODRDXHUzMDZCXHU2MjNCXHUzMDU5XCIsXG4gICAgfSk7XG4gICAgaWYgKGluc3Quc3RhdGUgPT09IFwiaWRsZVwiKSB7XG4gICAgICByZXNldEl0ZW0uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xuICAgICAgcmVzZXRJdGVtLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsIFwiXHUzMDUzXHUzMDZFXHUzMEJGXHUzMEI5XHUzMEFGXHUzMDZGXHU2NzJBXHU1QjlGXHU4ODRDXHUzMDY3XHUzMDU5XCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNldEl0ZW0uc2V0QXR0cmlidXRlKFwidGl0bGVcIiwgXCJcdTMwQkZcdTMwQjlcdTMwQUZcdTMwOTJcdTVCOUZcdTg4NENcdTUyNERcdTMwNkVcdTcyQjZcdTYxNEJcdTMwNkJcdTYyM0JcdTMwNTdcdTMwN0VcdTMwNTlcIik7XG4gICAgfVxuICAgIHJlc2V0SXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0b29sdGlwLnJlbW92ZSgpO1xuICAgICAgaWYgKGluc3Quc3RhdGUgIT09IFwiaWRsZVwiKSB7XG4gICAgICAgIGF3YWl0IHRoaXMucmVzZXRUYXNrVG9JZGxlKGluc3QpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIFx1MzAwQ1x1MzBCRlx1MzBCOVx1MzBBRlx1MzA5Mlx1NzlGQlx1NTJENVx1MzAwRFx1OTgwNVx1NzZFRVx1MzA5Mlx1OEZGRFx1NTJBMFxuICAgIGNvbnN0IG1vdmVJdGVtID0gdG9vbHRpcC5jcmVhdGVFbChcImRpdlwiLCB7XG4gICAgICBjbHM6IFwidG9vbHRpcC1pdGVtXCIsXG4gICAgICB0ZXh0OiBcIlx1RDgzRFx1RENDNSBcdTMwQkZcdTMwQjlcdTMwQUZcdTMwOTJcdTc5RkJcdTUyRDVcIixcbiAgICB9KTtcbiAgICBtb3ZlSXRlbS5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLCBcIlx1MzBCRlx1MzBCOVx1MzBBRlx1MzA5Mlx1NTIyNVx1MzA2RVx1NjVFNVx1NEVEOFx1MzA2Qlx1NzlGQlx1NTJENVx1MzA1N1x1MzA3RVx1MzA1OVwiKTtcbiAgICBtb3ZlSXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0b29sdGlwLnJlbW92ZSgpO1xuICAgICAgdGhpcy5zaG93VGFza01vdmVEYXRlUGlja2VyKGluc3QsIGJ1dHRvbik7XG4gICAgfSk7XG4gICAgXG4gICAgLy8gXHUzMDBDXHUzMEJGXHUzMEI5XHUzMEFGXHUzMDkyXHU4OTA3XHU4OEZEXHUzMDBEXHU5ODA1XHU3NkVFXHUzMDkyXHU4RkZEXHU1MkEwXG4gICAgY29uc3QgZHVwbGljYXRlSXRlbSA9IHRvb2x0aXAuY3JlYXRlRWwoXCJkaXZcIiwge1xuICAgICAgY2xzOiBcInRvb2x0aXAtaXRlbVwiLFxuICAgICAgdGV4dDogXCJcdUQ4M0RcdURDQzQgXHUzMEJGXHUzMEI5XHUzMEFGXHUzMDkyXHU4OTA3XHU4OEZEXCIsXG4gICAgfSk7XG4gICAgZHVwbGljYXRlSXRlbS5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLCBcIlx1NTQwQ1x1MzA1OFx1MzBCRlx1MzBCOVx1MzBBRlx1MzA5Mlx1MzA1OVx1MzA1MFx1NEUwQlx1MzA2Qlx1OEZGRFx1NTJBMFx1MzA1N1x1MzA3RVx1MzA1OVwiKTtcbiAgICBkdXBsaWNhdGVJdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHRvb2x0aXAucmVtb3ZlKCk7XG4gICAgICBhd2FpdCB0aGlzLmR1cGxpY2F0ZUluc3RhbmNlKGluc3QpO1xuICAgIH0pO1xuICAgIFxuICAgIC8vIFx1NTI0QVx1OTY2NFx1OTgwNVx1NzZFRVx1MzA5Mlx1OEZGRFx1NTJBMFxuICAgIGNvbnN0IGRlbGV0ZUl0ZW0gPSB0b29sdGlwLmNyZWF0ZUVsKFwiZGl2XCIsIHtcbiAgICAgIGNsczogXCJ0b29sdGlwLWl0ZW0gZGVsZXRlLWl0ZW1cIixcbiAgICAgIHRleHQ6IFwiXHVEODNEXHVEREQxXHVGRTBGIFx1MzBCRlx1MzBCOVx1MzBBRlx1MzA5Mlx1NTI0QVx1OTY2NFwiLFxuICAgIH0pO1xuICAgIGRlbGV0ZUl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jIChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdG9vbHRpcC5yZW1vdmUoKTtcbiAgICAgIC8vIFx1NUM2NVx1NkI3NFx1MzA2RVx1NUI1OFx1NTcyOFx1MzA2N1x1NTIyNFx1NUI5QVxuICAgICAgY29uc3QgaGFzSGlzdG9yeSA9IGF3YWl0IHRoaXMuaGFzRXhlY3V0aW9uSGlzdG9yeShpbnN0LnRhc2sucGF0aCk7XG4gICAgICAvLyBcdTdENzFcdTRFMDBcdTMwNTVcdTMwOENcdTMwNUZcdTUyNEFcdTk2NjRcdTUxRTZcdTc0MDZcdTMwOTJcdTRGN0ZcdTc1MjhcbiAgICAgIGlmIChpbnN0LnRhc2suaXNSb3V0aW5lIHx8IGhhc0hpc3RvcnkpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5kZWxldGVSb3V0aW5lVGFzayhpbnN0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF3YWl0IHRoaXMuZGVsZXRlTm9uUm91dGluZVRhc2soaW5zdCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gXHUzMERDXHUzMEJGXHUzMEYzXHUzMDZFXHU0RjREXHU3RjZFXHUzMDkyXHU1M0Q2XHU1Rjk3XHUzMDU3XHUzMDY2XHUzMEM0XHUzMEZDXHUzMEVCXHUzMEMxXHUzMEMzXHUzMEQ3XHUzMDkyXHU5MTREXHU3RjZFXG4gICAgY29uc3QgYnV0dG9uUmVjdCA9IGJ1dHRvbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBjb25zdCB3aW5kb3dIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgY29uc3Qgd2luZG93V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICBjb25zdCB0b29sdGlwSGVpZ2h0ID0gMjUwOyAvLyBcdTYzQThcdTVCOUFcdTMwNTVcdTMwOENcdTMwOEJcdTMwQzRcdTMwRkNcdTMwRUJcdTMwQzFcdTMwQzNcdTMwRDdcdTMwNkVcdTlBRDhcdTMwNTVcbiAgICBjb25zdCB0b29sdGlwV2lkdGggPSAyMDA7IC8vIFx1NjNBOFx1NUI5QVx1MzA1NVx1MzA4Q1x1MzA4Qlx1MzBDNFx1MzBGQ1x1MzBFQlx1MzBDMVx1MzBDM1x1MzBEN1x1MzA2RVx1NUU0NVxuICAgIFxuICAgIHRvb2x0aXAuc3R5bGUucG9zaXRpb24gPSBcImZpeGVkXCI7IC8vIGFic29sdXRlXHUzMDRCXHUzMDg5Zml4ZWRcdTMwNkJcdTU5MDlcdTY2RjRcbiAgICB0b29sdGlwLnN0eWxlLnpJbmRleCA9IFwiMTAwMDBcIjtcbiAgICBcbiAgICAvLyBcdTc1M0JcdTk3NjJcdTRFMEJcdTkwRThcdTMwNkJcdThGRDFcdTMwNDRcdTU4MzRcdTU0MDhcdTMwNkZcdTRFMEFcdTU0MTFcdTMwNERcdTMwNkJcdTg4NjhcdTc5M0FcbiAgICBpZiAoYnV0dG9uUmVjdC5ib3R0b20gKyB0b29sdGlwSGVpZ2h0ID4gd2luZG93SGVpZ2h0KSB7XG4gICAgICB0b29sdGlwLnN0eWxlLmJvdHRvbSA9IGAke3dpbmRvd0hlaWdodCAtIGJ1dHRvblJlY3QudG9wICsgNX1weGA7XG4gICAgICB0b29sdGlwLnN0eWxlLnRvcCA9IFwiYXV0b1wiO1xuICAgIH0gZWxzZSB7XG4gICAgICB0b29sdGlwLnN0eWxlLnRvcCA9IGAke2J1dHRvblJlY3QuYm90dG9tICsgNX1weGA7XG4gICAgICB0b29sdGlwLnN0eWxlLmJvdHRvbSA9IFwiYXV0b1wiO1xuICAgIH1cbiAgICBcbiAgICAvLyBcdTc1M0JcdTk3NjJcdTUzRjNcdTdBRUZcdTMwNkJcdThGRDFcdTMwNDRcdTU4MzRcdTU0MDhcdTMwNkZcdTVERTZcdTVCQzRcdTMwNUJcbiAgICBpZiAoYnV0dG9uUmVjdC5sZWZ0ICsgdG9vbHRpcFdpZHRoID4gd2luZG93V2lkdGgpIHtcbiAgICAgIHRvb2x0aXAuc3R5bGUucmlnaHQgPSBgJHt3aW5kb3dXaWR0aCAtIGJ1dHRvblJlY3QucmlnaHR9cHhgO1xuICAgICAgdG9vbHRpcC5zdHlsZS5sZWZ0ID0gXCJhdXRvXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRvb2x0aXAuc3R5bGUubGVmdCA9IGAke2J1dHRvblJlY3QubGVmdH1weGA7XG4gICAgICB0b29sdGlwLnN0eWxlLnJpZ2h0ID0gXCJhdXRvXCI7XG4gICAgfVxuICAgIFxuICAgIC8vIFx1NjcwMFx1NUMwRlx1NUU0NVx1MzA5Mlx1OEEyRFx1NUI5QVxuICAgIHRvb2x0aXAuc3R5bGUubWluV2lkdGggPSBcIjE4MHB4XCI7XG4gICAgdG9vbHRpcC5zdHlsZS5tYXhXaWR0aCA9IFwiMjUwcHhcIjtcbiAgICBcbiAgICAvLyBcdTMwQzlcdTMwQURcdTMwRTVcdTMwRTFcdTMwRjNcdTMwQzhcdTMwNkJcdThGRkRcdTUyQTBcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRvb2x0aXApO1xuICAgIFxuICAgIC8vIFx1MzBBRlx1MzBFQVx1MzBDM1x1MzBBRlx1NTkxNlx1MzA2N1x1OTU4OVx1MzA1OFx1MzA4QlxuICAgIGNvbnN0IGNsb3NlVG9vbHRpcCA9IChlOiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICBpZiAoIXRvb2x0aXAuY29udGFpbnMoZS50YXJnZXQgYXMgTm9kZSkgJiYgZS50YXJnZXQgIT09IGJ1dHRvbikge1xuICAgICAgICB0b29sdGlwLnJlbW92ZSgpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VUb29sdGlwKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlVG9vbHRpcCk7XG4gICAgfSwgMTAwKTtcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gVGFzayBTdGF0ZSBNYW5hZ2VtZW50IE1ldGhvZHNcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIGFzeW5jIHN0YXJ0SW5zdGFuY2UoaW5zdDogVGFza0luc3RhbmNlKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFN0b3AgY3VycmVudCBpbnN0YW5jZSBpZiBhbnlcbiAgICAgIGlmICh0aGlzLmN1cnJlbnRJbnN0YW5jZSAmJiB0aGlzLmN1cnJlbnRJbnN0YW5jZS5zdGF0ZSA9PT0gXCJydW5uaW5nXCIpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zdG9wSW5zdGFuY2UodGhpcy5jdXJyZW50SW5zdGFuY2UpO1xuICAgICAgfVxuXG4gICAgICAvLyBTdGFydCB0aGUgbmV3IGluc3RhbmNlXG4gICAgICBpbnN0LnN0YXRlID0gXCJydW5uaW5nXCI7XG4gICAgICBpbnN0LnN0YXJ0VGltZSA9IG5ldyBEYXRlKCk7XG4gICAgICB0aGlzLmN1cnJlbnRJbnN0YW5jZSA9IGluc3Q7XG5cbiAgICAgIC8vIFNhdmUgc3RhdGVcbiAgICAgIHRoaXMuc2F2ZUluc3RhbmNlU3RhdGUoaW5zdCk7XG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSBVSVxuICAgICAgdGhpcy5yZW5kZXJUYXNrTGlzdCgpO1xuICAgICAgXG4gICAgICAvLyBTdGFydCBnbG9iYWwgdGltZXIgaWYgbm90IHJ1bm5pbmdcbiAgICAgIGlmICghdGhpcy5nbG9iYWxUaW1lckludGVydmFsKSB7XG4gICAgICAgIHRoaXMuc3RhcnRHbG9iYWxUaW1lcigpO1xuICAgICAgfVxuXG4gICAgICBuZXcgTm90aWNlKGBcdTk1OEJcdTU5Q0I6ICR7aW5zdC50YXNrLm5hbWV9YCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gc3RhcnQgaW5zdGFuY2U6XCIsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoXCJcdTMwQkZcdTMwQjlcdTMwQUZcdTMwNkVcdTk1OEJcdTU5Q0JcdTMwNkJcdTU5MzFcdTY1NTdcdTMwNTdcdTMwN0VcdTMwNTdcdTMwNUZcIik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgc3RvcEluc3RhbmNlKGluc3Q6IFRhc2tJbnN0YW5jZSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoaW5zdC5zdGF0ZSAhPT0gXCJydW5uaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpbnN0LnN0YXRlID0gXCJkb25lXCI7XG4gICAgICBpbnN0LnN0b3BUaW1lID0gbmV3IERhdGUoKTtcbiAgICAgIFxuICAgICAgaWYgKGluc3Quc3RhcnRUaW1lKSB7XG4gICAgICAgIGNvbnN0IGR1cmF0aW9uID0gdGhpcy5jYWxjdWxhdGVDcm9zc0RheUR1cmF0aW9uKGluc3Quc3RhcnRUaW1lLCBpbnN0LnN0b3BUaW1lKTtcbiAgICAgICAgaW5zdC5hY3R1YWxNaW51dGVzID0gTWF0aC5mbG9vcihkdXJhdGlvbiAvICgxMDAwICogNjApKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2xlYXIgY3VycmVudCBpbnN0YW5jZSBpZiB0aGlzIGlzIGl0XG4gICAgICBpZiAodGhpcy5jdXJyZW50SW5zdGFuY2UgPT09IGluc3QpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50SW5zdGFuY2UgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICAvLyBTYXZlIHN0YXRlXG4gICAgICB0aGlzLnNhdmVJbnN0YW5jZVN0YXRlKGluc3QpO1xuICAgICAgXG4gICAgICAvLyBTYXZlIHRvIGxvZ1xuICAgICAgYXdhaXQgdGhpcy5zYXZlVGFza0xvZyhpbnN0KTtcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIFVJXG4gICAgICB0aGlzLnJlbmRlclRhc2tMaXN0KCk7XG5cbiAgICAgIG5ldyBOb3RpY2UoYFx1NUI4Q1x1NEU4NjogJHtpbnN0LnRhc2submFtZX0gKCR7aW5zdC5hY3R1YWxNaW51dGVzIHx8IDB9XHU1MjA2KWApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIHN0b3AgaW5zdGFuY2U6XCIsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoXCJcdTMwQkZcdTMwQjlcdTMwQUZcdTMwNkVcdTUwNUNcdTZCNjJcdTMwNkJcdTU5MzFcdTY1NTdcdTMwNTdcdTMwN0VcdTMwNTdcdTMwNUZcIik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVDcm9zc0RheUR1cmF0aW9uKHN0YXJ0VGltZTogRGF0ZSwgc3RvcFRpbWU6IERhdGUpOiBudW1iZXIge1xuICAgIGlmICghc3RhcnRUaW1lIHx8ICFzdG9wVGltZSkgcmV0dXJuIDA7XG5cbiAgICBsZXQgZHVyYXRpb24gPSBzdG9wVGltZS5nZXRUaW1lKCkgLSBzdGFydFRpbWUuZ2V0VGltZSgpO1xuXG4gICAgLy8gSWYgbmVnYXRpdmUsIGl0J3MgYSBjcm9zcy1kYXkgdGFza1xuICAgIGlmIChkdXJhdGlvbiA8IDApIHtcbiAgICAgIGR1cmF0aW9uICs9IDI0ICogNjAgKiA2MCAqIDEwMDA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGR1cmF0aW9uO1xuICB9XG5cbiAgcHJpdmF0ZSBzYXZlSW5zdGFuY2VTdGF0ZShpbnN0OiBUYXNrSW5zdGFuY2UpOiB2b2lkIHtcbiAgICBjb25zdCBzdGF0ZUtleSA9IGB0YXNrY2h1dGUtaW5zdGFuY2Utc3RhdGUtJHtpbnN0Lmluc3RhbmNlSWR9YDtcbiAgICBjb25zdCBzdGF0ZSA9IHtcbiAgICAgIHN0YXRlOiBpbnN0LnN0YXRlLFxuICAgICAgc3RhcnRUaW1lOiBpbnN0LnN0YXJ0VGltZT8udG9JU09TdHJpbmcoKSxcbiAgICAgIHN0b3BUaW1lOiBpbnN0LnN0b3BUaW1lPy50b0lTT1N0cmluZygpLFxuICAgICAgcGF1c2VkRHVyYXRpb246IGluc3QucGF1c2VkRHVyYXRpb24sXG4gICAgICBhY3R1YWxNaW51dGVzOiBpbnN0LmFjdHVhbE1pbnV0ZXMsXG4gICAgICBjb21tZW50OiBpbnN0LmNvbW1lbnQsXG4gICAgICBmb2N1c0xldmVsOiBpbnN0LmZvY3VzTGV2ZWwsXG4gICAgICBlbmVyZ3lMZXZlbDogaW5zdC5lbmVyZ3lMZXZlbCxcbiAgICB9O1xuXG4gICAgdHJ5IHtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHN0YXRlS2V5LCBKU09OLnN0cmluZ2lmeShzdGF0ZSkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIHNhdmUgaW5zdGFuY2Ugc3RhdGU6XCIsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNhdmVUYXNrTG9nKGluc3Q6IFRhc2tJbnN0YW5jZSk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIEltcGxlbWVudGF0aW9uIGZvciBzYXZpbmcgdGFzayBsb2dcbiAgICAvLyBUaGlzIHdvdWxkIGludGVyYWN0IHdpdGggdGhlIGxvZyBzeXN0ZW1cbiAgICBjb25zb2xlLmxvZyhcIlNhdmluZyB0YXNrIGxvZyBmb3I6XCIsIGluc3QudGFzay5uYW1lKTtcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gVGltZXIgTWFuYWdlbWVudCBNZXRob2RzXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICBwcml2YXRlIHN0YXJ0R2xvYmFsVGltZXIoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuZ2xvYmFsVGltZXJJbnRlcnZhbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmdsb2JhbFRpbWVySW50ZXJ2YWwpO1xuICAgIH1cblxuICAgIHRoaXMuZ2xvYmFsVGltZXJJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIHRoaXMudXBkYXRlQWxsVGltZXJzKCk7XG4gICAgfSwgMTAwMCk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZUFsbFRpbWVycygpOiB2b2lkIHtcbiAgICBjb25zdCBydW5uaW5nSW5zdGFuY2VzID0gdGhpcy50YXNrSW5zdGFuY2VzLmZpbHRlcihpbnN0ID0+IGluc3Quc3RhdGUgPT09IFwicnVubmluZ1wiKTtcbiAgICBcbiAgICBpZiAocnVubmluZ0luc3RhbmNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuc3RvcEdsb2JhbFRpbWVyKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcnVubmluZ0luc3RhbmNlcy5mb3JFYWNoKGluc3QgPT4ge1xuICAgICAgY29uc3QgdGltZXJFbCA9IHRoaXMudGFza0xpc3QucXVlcnlTZWxlY3RvcihgW2RhdGEtdGFzay1wYXRoPVwiJHtpbnN0LnRhc2sucGF0aH1cIl0gLnRhc2stdGltZXJgKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgIGlmICh0aW1lckVsKSB7XG4gICAgICAgIHRoaXMudXBkYXRlVGltZXJEaXNwbGF5KHRpbWVyRWwsIGluc3QpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVUaW1lckRpc3BsYXkodGltZXJFbDogSFRNTEVsZW1lbnQsIGluc3Q6IFRhc2tJbnN0YW5jZSk6IHZvaWQge1xuICAgIGlmICghaW5zdC5zdGFydFRpbWUpIHJldHVybjtcblxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgZWxhcHNlZCA9IG5vdy5nZXRUaW1lKCkgLSBpbnN0LnN0YXJ0VGltZS5nZXRUaW1lKCk7XG4gICAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3IoZWxhcHNlZCAvICgxMDAwICogNjApKTtcbiAgICBjb25zdCBzZWNvbmRzID0gTWF0aC5mbG9vcigoZWxhcHNlZCAlICgxMDAwICogNjApKSAvIDEwMDApO1xuICAgIFxuICAgIHRpbWVyRWwudGV4dENvbnRlbnQgPSBgJHttaW51dGVzfToke3NlY29uZHMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIil9YDtcbiAgfVxuXG4gIHByaXZhdGUgc3RvcEdsb2JhbFRpbWVyKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmdsb2JhbFRpbWVySW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5nbG9iYWxUaW1lckludGVydmFsKTtcbiAgICAgIHRoaXMuZ2xvYmFsVGltZXJJbnRlcnZhbCA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBFdmVudCBIYW5kbGVyIE1ldGhvZHNcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIHByaXZhdGUgc2V0dXBFdmVudExpc3RlbmVycygpOiB2b2lkIHtcbiAgICAvLyBLZXlib2FyZCBzaG9ydGN1dCBsaXN0ZW5lclxuICAgIHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgXCJrZXlkb3duXCIsIChlKSA9PiB7XG4gICAgICB0aGlzLmhhbmRsZUtleWJvYXJkU2hvcnRjdXQoZSk7XG4gICAgfSk7XG5cbiAgICAvLyBDbGljayBsaXN0ZW5lciBmb3IgY2xlYXJpbmcgc2VsZWN0aW9uXG4gICAgdGhpcy5yZWdpc3RlckRvbUV2ZW50KHRoaXMuY29udGFpbmVyRWwsIFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIGlmICghZS50YXJnZXQuY2xvc2VzdChcIi50YXNrLWl0ZW1cIikpIHtcbiAgICAgICAgdGhpcy5jbGVhclRhc2tTZWxlY3Rpb24oKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIEZpbGUgcmVuYW1lIGV2ZW50IGxpc3RlbmVyXG4gICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgdGhpcy5hcHAudmF1bHQub24oXCJyZW5hbWVcIiwgYXN5bmMgKGZpbGUsIG9sZFBhdGgpID0+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVGaWxlUmVuYW1lKGZpbGUsIG9sZFBhdGgpO1xuICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cFBsYXlTdG9wQnV0dG9uKGJ1dHRvbjogSFRNTEVsZW1lbnQsIGluc3Q6IFRhc2tJbnN0YW5jZSk6IHZvaWQge1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBcbiAgICAgIGlmIChpbnN0LnN0YXRlID09PSBcInJ1bm5pbmdcIikge1xuICAgICAgICBhd2FpdCB0aGlzLnN0b3BJbnN0YW5jZShpbnN0KTtcbiAgICAgIH0gZWxzZSBpZiAoaW5zdC5zdGF0ZSA9PT0gXCJpZGxlXCIpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zdGFydEluc3RhbmNlKGluc3QpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cFRhc2tJdGVtRXZlbnRMaXN0ZW5lcnModGFza0l0ZW06IEhUTUxFbGVtZW50LCBpbnN0OiBUYXNrSW5zdGFuY2UpOiB2b2lkIHtcbiAgICAvLyBDb250ZXh0IG1lbnVcbiAgICB0YXNrSXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY29udGV4dG1lbnVcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuc2hvd1Rhc2tDb250ZXh0TWVudShlLCBpbnN0KTtcbiAgICB9KTtcblxuICAgIC8vIERyYWcgYW5kIGRyb3BcbiAgICB0aGlzLnNldHVwVGFza0l0ZW1EcmFnRHJvcCh0YXNrSXRlbSwgaW5zdCk7XG4gIH1cblxuICBwcml2YXRlIHNldHVwVGFza0l0ZW1EcmFnRHJvcCh0YXNrSXRlbTogSFRNTEVsZW1lbnQsIGluc3Q6IFRhc2tJbnN0YW5jZSk6IHZvaWQge1xuICAgIHRhc2tJdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnb3ZlclwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5oYW5kbGVEcmFnT3ZlcihlLCB0YXNrSXRlbSwgaW5zdCk7XG4gICAgfSk7XG5cbiAgICB0YXNrSXRlbS5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ2xlYXZlXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2xlYXJEcmFnb3ZlckNsYXNzZXModGFza0l0ZW0pO1xuICAgIH0pO1xuXG4gICAgdGFza0l0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImRyb3BcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuaGFuZGxlRHJvcChlLCB0YXNrSXRlbSwgaW5zdCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHNldHVwRHJhZ0V2ZW50cyhkcmFnSGFuZGxlOiBIVE1MRWxlbWVudCwgdGFza0l0ZW06IEhUTUxFbGVtZW50LCBzbG90OiBzdHJpbmcsIGlkeDogbnVtYmVyKTogdm9pZCB7XG4gICAgZHJhZ0hhbmRsZS5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ3N0YXJ0XCIsIChlKSA9PiB7XG4gICAgICBlLmRhdGFUcmFuc2Zlci5zZXREYXRhKFwidGV4dC9wbGFpblwiLCBgJHtzbG90ID8/IFwibm9uZVwifTo6JHtpZHh9YCk7XG4gICAgICB0YXNrSXRlbS5jbGFzc0xpc3QuYWRkKFwiZHJhZ2dpbmdcIik7XG4gICAgfSk7XG5cbiAgICBkcmFnSGFuZGxlLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnZW5kXCIsICgpID0+IHtcbiAgICAgIHRhc2tJdGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJkcmFnZ2luZ1wiKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0dXBUaW1lU2xvdERyYWdIYW5kbGVycyhoZWFkZXI6IEhUTUxFbGVtZW50LCBzbG90OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBoZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBoZWFkZXIuY2xhc3NMaXN0LmFkZChcImRyYWdvdmVyXCIpO1xuICAgIH0pO1xuXG4gICAgaGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnbGVhdmVcIiwgKCkgPT4ge1xuICAgICAgaGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoXCJkcmFnb3ZlclwiKTtcbiAgICB9KTtcblxuICAgIGhlYWRlci5hZGRFdmVudExpc3RlbmVyKFwiZHJvcFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoXCJkcmFnb3ZlclwiKTtcbiAgICAgIHRoaXMuaGFuZGxlU2xvdERyb3AoZSwgc2xvdCk7XG4gICAgfSk7XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIENvbW1hbmQgTWV0aG9kcyAoZm9yIGV4dGVybmFsIGNvbW1hbmRzKVxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgZHVwbGljYXRlU2VsZWN0ZWRUYXNrKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnNlbGVjdGVkVGFza0luc3RhbmNlKSB7XG4gICAgICB0aGlzLmR1cGxpY2F0ZVRhc2sodGhpcy5zZWxlY3RlZFRhc2tJbnN0YW5jZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ldyBOb3RpY2UoXCJcdTMwQkZcdTMwQjlcdTMwQUZcdTMwNENcdTkwNzhcdTYyOUVcdTMwNTVcdTMwOENcdTMwNjZcdTMwNDRcdTMwN0VcdTMwNUJcdTMwOTNcIik7XG4gICAgfVxuICB9XG5cbiAgZGVsZXRlU2VsZWN0ZWRUYXNrKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnNlbGVjdGVkVGFza0luc3RhbmNlKSB7XG4gICAgICB0aGlzLmRlbGV0ZVRhc2sodGhpcy5zZWxlY3RlZFRhc2tJbnN0YW5jZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ldyBOb3RpY2UoXCJcdTMwQkZcdTMwQjlcdTMwQUZcdTMwNENcdTkwNzhcdTYyOUVcdTMwNTVcdTMwOENcdTMwNjZcdTMwNDRcdTMwN0VcdTMwNUJcdTMwOTNcIik7XG4gICAgfVxuICB9XG5cbiAgcmVzZXRTZWxlY3RlZFRhc2soKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRUYXNrSW5zdGFuY2UpIHtcbiAgICAgIHRoaXMucmVzZXRUYXNrKHRoaXMuc2VsZWN0ZWRUYXNrSW5zdGFuY2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXcgTm90aWNlKFwiXHUzMEJGXHUzMEI5XHUzMEFGXHUzMDRDXHU5MDc4XHU2MjlFXHUzMDU1XHUzMDhDXHUzMDY2XHUzMDQ0XHUzMDdFXHUzMDVCXHUzMDkzXCIpO1xuICAgIH1cbiAgfVxuXG4gIHNob3dUb2RheVRhc2tzKCk6IHZvaWQge1xuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICB0aGlzLmN1cnJlbnREYXRlID0gbmV3IERhdGUodG9kYXkuZ2V0RnVsbFllYXIoKSwgdG9kYXkuZ2V0TW9udGgoKSwgdG9kYXkuZ2V0RGF0ZSgpKTtcbiAgICB0aGlzLmxvYWRUYXNrcygpLnRoZW4oKCkgPT4ge1xuICAgICAgbmV3IE5vdGljZShgXHU0RUNBXHU2NUU1XHUzMDZFXHUzMEJGXHUzMEI5XHUzMEFGXHUzMDkyXHU4ODY4XHU3OTNBXHUzMDU3XHUzMDdFXHUzMDU3XHUzMDVGYCk7XG4gICAgfSk7XG4gIH1cblxuICByZW9yZ2FuaXplSWRsZVRhc2tzKCk6IHZvaWQge1xuICAgIHRoaXMubW92ZUlkbGVUYXNrc1RvQ3VycmVudFRpbWUoKTtcbiAgICBuZXcgTm90aWNlKFwiXHUzMEEyXHUzMEE0XHUzMEM5XHUzMEVCXHUzMEJGXHUzMEI5XHUzMEFGXHUzMDkyXHU2NTc0XHU3NDA2XHUzMDU3XHUzMDdFXHUzMDU3XHUzMDVGXCIpO1xuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBVdGlsaXR5IE1ldGhvZHNcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIHByaXZhdGUgZ2V0VGltZVNsb3RLZXlzKCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gW1wiMDowMC04OjAwXCIsIFwiODowMC0xMjowMFwiLCBcIjEyOjAwLTE2OjAwXCIsIFwiMTY6MDAtMDowMFwiXTtcbiAgfVxuXG4gIHByaXZhdGUgc29ydFRhc2tJbnN0YW5jZXNCeVRpbWVPcmRlcigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy51c2VPcmRlckJhc2VkU29ydCkge1xuICAgICAgdGhpcy50YXNrSW5zdGFuY2VzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgLy8gSW1wbGVtZW50YXRpb24gb2Ygb3JkZXItYmFzZWQgc29ydFxuICAgICAgICByZXR1cm4gMDsgLy8gU2ltcGxpZmllZFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhcHBseVJlc3BvbnNpdmVDbGFzc2VzKCk6IHZvaWQge1xuICAgIC8vIEFwcGx5IHJlc3BvbnNpdmUgY2xhc3NlcyBiYXNlZCBvbiBwYW5lIHdpZHRoXG4gICAgY29uc3Qgd2lkdGggPSB0aGlzLmNvbnRhaW5lckVsLmNsaWVudFdpZHRoO1xuICAgIGNvbnN0IGNsYXNzTGlzdCA9IHRoaXMuY29udGFpbmVyRWwuY2xhc3NMaXN0O1xuICAgIFxuICAgIGNsYXNzTGlzdC5yZW1vdmUoXCJuYXJyb3dcIiwgXCJtZWRpdW1cIiwgXCJ3aWRlXCIpO1xuICAgIFxuICAgIGlmICh3aWR0aCA8IDQwMCkge1xuICAgICAgY2xhc3NMaXN0LmFkZChcIm5hcnJvd1wiKTtcbiAgICB9IGVsc2UgaWYgKHdpZHRoIDwgNjAwKSB7XG4gICAgICBjbGFzc0xpc3QuYWRkKFwibWVkaXVtXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjbGFzc0xpc3QuYWRkKFwid2lkZVwiKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNldHVwUmVzaXplT2JzZXJ2ZXIoKTogdm9pZCB7XG4gICAgY29uc3QgcmVzaXplT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKCkgPT4ge1xuICAgICAgdGhpcy5hcHBseVJlc3BvbnNpdmVDbGFzc2VzKCk7XG4gICAgfSk7XG4gICAgXG4gICAgcmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLmNvbnRhaW5lckVsKTtcbiAgfVxuXG4gIHByaXZhdGUgaW5pdGlhbGl6ZU5hdmlnYXRpb25FdmVudExpc3RlbmVycygpOiB2b2lkIHtcbiAgICAvLyBOYXZpZ2F0aW9uIHRvZ2dsZVxuICAgIGNvbnN0IGRyYXdlclRvZ2dsZSA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcihcIi5kcmF3ZXItdG9nZ2xlXCIpIGFzIEhUTUxFbGVtZW50O1xuICAgIGlmIChkcmF3ZXJUb2dnbGUpIHtcbiAgICAgIGRyYXdlclRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLnRvZ2dsZU5hdmlnYXRpb24oKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIE92ZXJsYXkgY2xpY2sgdG8gY2xvc2VcbiAgICBpZiAodGhpcy5uYXZpZ2F0aW9uT3ZlcmxheSkge1xuICAgICAgdGhpcy5uYXZpZ2F0aW9uT3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLmNsb3NlTmF2aWdhdGlvbigpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzY2hlZHVsZUJvdW5kYXJ5Q2hlY2soKTogdm9pZCB7XG4gICAgLy8gU2NoZWR1bGUgYm91bmRhcnkgY2hlY2sgZm9yIGlkbGUtdGFzay1hdXRvLW1vdmUgZmVhdHVyZVxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgbmV4dEhvdXIgPSBuZXcgRGF0ZShub3cpO1xuICAgIG5leHRIb3VyLnNldEhvdXJzKG5leHRIb3VyLmdldEhvdXJzKCkgKyAxLCAwLCAwLCAwKTtcbiAgICBcbiAgICBjb25zdCBtc1VudGlsTmV4dEhvdXIgPSBuZXh0SG91ci5nZXRUaW1lKCkgLSBub3cuZ2V0VGltZSgpO1xuICAgIFxuICAgIHRoaXMuYm91bmRhcnlDaGVja1RpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuY2hlY2tCb3VuZGFyeVRhc2tzKCk7XG4gICAgICB0aGlzLnNjaGVkdWxlQm91bmRhcnlDaGVjaygpOyAvLyBSZXNjaGVkdWxlXG4gICAgfSwgbXNVbnRpbE5leHRIb3VyKTtcbiAgfVxuXG4gIHByaXZhdGUgY2hlY2tCb3VuZGFyeVRhc2tzKCk6IHZvaWQge1xuICAgIC8vIE1vdmUgaWRsZSB0YXNrcyB0aGF0IGhhdmUgcGFzc2VkIHRoZWlyIHNjaGVkdWxlZCB0aW1lXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBjdXJyZW50SG91ciA9IG5vdy5nZXRIb3VycygpO1xuICAgIGNvbnN0IGN1cnJlbnRTbG90ID0gYCR7Y3VycmVudEhvdXIudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIil9OjAwYDtcbiAgICBcbiAgICAvLyBJbXBsZW1lbnRhdGlvbiB3b3VsZCBnbyBoZXJlXG4gICAgY29uc29sZS5sb2coXCJDaGVja2luZyBib3VuZGFyeSB0YXNrcyBmb3JcIiwgY3VycmVudFNsb3QpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVUb3RhbFRhc2tzQ291bnQoKTogdm9pZCB7XG4gICAgLy8gVXBkYXRlIHRhc2sgY291bnQgZm9yIGhlYXRtYXBcbiAgICBjb25zdCBjb21wbGV0ZWRUYXNrcyA9IHRoaXMudGFza0luc3RhbmNlcy5maWx0ZXIoaW5zdCA9PiBpbnN0LnN0YXRlID09PSBcImRvbmVcIik7XG4gICAgLy8gSW1wbGVtZW50YXRpb24gd291bGQgc2F2ZSB0aGlzIHRvIHRoZSBhcHByb3ByaWF0ZSBkYXRhIHN0cnVjdHVyZVxuICB9XG5cbiAgcHJpdmF0ZSBjbGVhbnVwQXV0b2NvbXBsZXRlSW5zdGFuY2VzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmF1dG9jb21wbGV0ZUluc3RhbmNlcykge1xuICAgICAgdGhpcy5hdXRvY29tcGxldGVJbnN0YW5jZXMuZm9yRWFjaCgoaW5zdGFuY2UpID0+IHtcbiAgICAgICAgaWYgKGluc3RhbmNlICYmIGluc3RhbmNlLmNsZWFudXApIHtcbiAgICAgICAgICBpbnN0YW5jZS5jbGVhbnVwKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdGhpcy5hdXRvY29tcGxldGVJbnN0YW5jZXMgPSBbXTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNsZWFudXBUaW1lcnMoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuZ2xvYmFsVGltZXJJbnRlcnZhbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmdsb2JhbFRpbWVySW50ZXJ2YWwpO1xuICAgICAgdGhpcy5nbG9iYWxUaW1lckludGVydmFsID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5ib3VuZGFyeUNoZWNrVGltZW91dCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuYm91bmRhcnlDaGVja1RpbWVvdXQpO1xuICAgICAgdGhpcy5ib3VuZGFyeUNoZWNrVGltZW91dCA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucmVuZGVyRGVib3VuY2VUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmVuZGVyRGVib3VuY2VUaW1lcik7XG4gICAgICB0aGlzLnJlbmRlckRlYm91bmNlVGltZXIgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXBwbHlTdHlsZXMoKTogdm9pZCB7XG4gICAgLy8gQ3JlYXRlIGFuZCBpbmplY3QgZHluYW1pYyBzdHlsZXNcbiAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgICBzdHlsZS50ZXh0Q29udGVudCA9IFRBU0tDSFVURV9GVUxMX0NTUztcbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gUGxhY2Vob2xkZXIgTWV0aG9kcyAodG8gYmUgaW1wbGVtZW50ZWQpXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG4gIHByaXZhdGUgaGFuZGxlTmF2aWdhdGlvbkl0ZW1DbGljayhzZWN0aW9uOiAncm91dGluZScgfCAncmV2aWV3JyB8ICdsb2cnIHwgJ3Byb2plY3QnKTogdm9pZCB7XG4gICAgbmV3IE5vdGljZShgJHtzZWN0aW9ufSBcdTZBNUZcdTgwRkRcdTMwNkZcdTVCOUZcdTg4QzVcdTRFMkRcdTMwNjdcdTMwNTlgKTtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlS2V5Ym9hcmRTaG9ydGN1dChlOiBLZXlib2FyZEV2ZW50KTogdm9pZCB7XG4gICAgLy8gSW1wbGVtZW50IGtleWJvYXJkIHNob3J0Y3V0c1xuICB9XG5cbiAgcHJpdmF0ZSBzZWxlY3RUYXNrRm9yS2V5Ym9hcmQoaW5zdDogVGFza0luc3RhbmNlLCB0YXNrSXRlbTogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICB0aGlzLnNlbGVjdGVkVGFza0luc3RhbmNlID0gaW5zdDtcbiAgICBcbiAgICAvLyBDbGVhciBwcmV2aW91cyBzZWxlY3Rpb25zXG4gICAgdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRhc2staXRlbS5rZXlib2FyZC1zZWxlY3RlZFwiKVxuICAgICAgLmZvckVhY2goZWwgPT4gZWwuY2xhc3NMaXN0LnJlbW92ZShcImtleWJvYXJkLXNlbGVjdGVkXCIpKTtcbiAgICBcbiAgICAvLyBBZGQgc2VsZWN0aW9uIHRvIGN1cnJlbnQgaXRlbVxuICAgIHRhc2tJdGVtLmNsYXNzTGlzdC5hZGQoXCJrZXlib2FyZC1zZWxlY3RlZFwiKTtcbiAgfVxuXG4gIHByaXZhdGUgY2xlYXJUYXNrU2VsZWN0aW9uKCk6IHZvaWQge1xuICAgIHRoaXMuc2VsZWN0ZWRUYXNrSW5zdGFuY2UgPSBudWxsO1xuICAgIHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbChcIi50YXNrLWl0ZW0ua2V5Ym9hcmQtc2VsZWN0ZWRcIilcbiAgICAgIC5mb3JFYWNoKGVsID0+IGVsLmNsYXNzTGlzdC5yZW1vdmUoXCJrZXlib2FyZC1zZWxlY3RlZFwiKSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGRlbGV0ZVRhc2soaW5zdDogVGFza0luc3RhbmNlKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCFpbnN0KSByZXR1cm47XG4gICAgXG4gICAgLy8gXHU5NzVFXHUzMEVCXHUzMEZDXHUzMEMxXHUzMEYzXHUzMEJGXHUzMEI5XHUzMEFGXHUzMDZFXHU1MjRBXHU5NjY0XHU1MUU2XHU3NDA2XG4gICAgaWYgKCFpbnN0LnRhc2suaXNSb3V0aW5lKSB7XG4gICAgICBhd2FpdCB0aGlzLmRlbGV0ZU5vblJvdXRpbmVUYXNrKGluc3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBcdTMwRUJcdTMwRkNcdTMwQzFcdTMwRjNcdTMwQkZcdTMwQjlcdTMwQUZcdTMwNkVcdTUyNEFcdTk2NjRcdTUxRTZcdTc0MDZcbiAgICAgIGF3YWl0IHRoaXMuZGVsZXRlUm91dGluZVRhc2soaW5zdCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBkZWxldGVOb25Sb3V0aW5lVGFzayhpbnN0OiBUYXNrSW5zdGFuY2UpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBcdTk3NUVcdTMwRUJcdTMwRkNcdTMwQzFcdTMwRjNcdTMwQkZcdTMwQjlcdTMwQUZcdTMwNkVcdTUyNEFcdTk2NjRcdTMwNkZkZWxldGVJbnN0YW5jZVx1MzBFMVx1MzBCRFx1MzBDM1x1MzBDOVx1MzA2Qlx1N0Q3MVx1NEUwMFxuICAgIGF3YWl0IHRoaXMuZGVsZXRlSW5zdGFuY2UoaW5zdCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGRlbGV0ZVJvdXRpbmVUYXNrKGluc3Q6IFRhc2tJbnN0YW5jZSk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIFx1MzBFQlx1MzBGQ1x1MzBDMVx1MzBGM1x1MzBCRlx1MzBCOVx1MzBBRlx1MzA2RVx1NTI0QVx1OTY2NFx1MzA4MmRlbGV0ZUluc3RhbmNlXHUzMEUxXHUzMEJEXHUzMEMzXHUzMEM5XHUzMDZCXHU3RDcxXHU0RTAwXG4gICAgLy8gXHUzMDVGXHUzMDYwXHUzMDU3XHUzMDAxaGlkZGVuIHJvdXRpbmVzXHUzMDZCXHU4RkZEXHU1MkEwXHUzMDU5XHUzMDhCXHU1MUU2XHU3NDA2XHUzMDRDXHU1RkM1XHU4OTgxXG4gICAgY29uc3QgZGF0ZVN0ciA9IHRoaXMuZ2V0Q3VycmVudERhdGVTdHJpbmcoKTtcbiAgICBjb25zdCBoaWRkZW5LZXkgPSBgdGFza2NodXRlLWhpZGRlbi1yb3V0aW5lcy0ke2RhdGVTdHJ9YDtcbiAgICBjb25zdCBoaWRkZW5Sb3V0aW5lcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oaGlkZGVuS2V5KSB8fCAnW10nKTtcbiAgICBcbiAgICAvLyBcdTg5MDdcdTg4RkRcdTMwQkZcdTMwQjlcdTMwQUZcdTMwNEJcdTMwQzFcdTMwQTdcdTMwQzNcdTMwQUZcbiAgICBjb25zdCBpc0R1cGxpY2F0ZWQgPSB0aGlzLmlzRHVwbGljYXRlZFRhc2soaW5zdCk7XG4gICAgXG4gICAgY29uc3QgYWxyZWFkeUhpZGRlbiA9IGhpZGRlblJvdXRpbmVzLnNvbWUoKGg6IGFueSkgPT4ge1xuICAgICAgaWYgKGlzRHVwbGljYXRlZCkge1xuICAgICAgICByZXR1cm4gaC5pbnN0YW5jZUlkID09PSBpbnN0Lmluc3RhbmNlSWQ7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGggPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBoID09PSBpbnN0LnRhc2sucGF0aDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBoLnBhdGggPT09IGluc3QudGFzay5wYXRoICYmICFoLmluc3RhbmNlSWQ7XG4gICAgfSk7XG4gICAgXG4gICAgaWYgKCFhbHJlYWR5SGlkZGVuKSB7XG4gICAgICBpZiAoaXNEdXBsaWNhdGVkKSB7XG4gICAgICAgIGhpZGRlblJvdXRpbmVzLnB1c2goe1xuICAgICAgICAgIHBhdGg6IGluc3QudGFzay5wYXRoLFxuICAgICAgICAgIGluc3RhbmNlSWQ6IGluc3QuaW5zdGFuY2VJZFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGhpZGRlblJvdXRpbmVzLnB1c2goe1xuICAgICAgICAgIHBhdGg6IGluc3QudGFzay5wYXRoLFxuICAgICAgICAgIGluc3RhbmNlSWQ6IG51bGxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShoaWRkZW5LZXksIEpTT04uc3RyaW5naWZ5KGhpZGRlblJvdXRpbmVzKSk7XG4gICAgfVxuICAgIFxuICAgIC8vIFx1NUI5Rlx1ODg0Q1x1NUM2NVx1NkI3NFx1MzA0Qlx1MzA4OVx1NTI0QVx1OTY2NFxuICAgIGlmIChpbnN0Lmluc3RhbmNlSWQpIHtcbiAgICAgIGF3YWl0IHRoaXMuZGVsZXRlVGFza0xvZ3NCeUluc3RhbmNlSWQoaW5zdC50YXNrLnBhdGgsIGluc3QuaW5zdGFuY2VJZCk7XG4gICAgfVxuICAgIFxuICAgIC8vIGRlbGV0ZUluc3RhbmNlXHUzMDkyXHU1NDdDXHUzMDc2XG4gICAgYXdhaXQgdGhpcy5kZWxldGVJbnN0YW5jZShpbnN0KTtcbiAgfVxuXG4gIHByaXZhdGUgaXNEdXBsaWNhdGVkVGFzayhpbnN0OiBUYXNrSW5zdGFuY2UpOiBib29sZWFuIHtcbiAgICBjb25zdCBkYXRlU3RyID0gdGhpcy5nZXRDdXJyZW50RGF0ZVN0cmluZygpO1xuICAgIGNvbnN0IGR1cGxpY2F0aW9uS2V5ID0gYHRhc2tjaHV0ZS1kdXBsaWNhdGVkLWluc3RhbmNlcy0ke2RhdGVTdHJ9YDtcbiAgICBjb25zdCBkdXBsaWNhdGVkSW5zdGFuY2VzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShkdXBsaWNhdGlvbktleSkgfHwgJ1tdJyk7XG4gICAgcmV0dXJuIGR1cGxpY2F0ZWRJbnN0YW5jZXMuc29tZSgoZDogYW55KSA9PiBkLmluc3RhbmNlSWQgPT09IGluc3QuaW5zdGFuY2VJZCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGRlbGV0ZVRhc2tMb2dzQnlJbnN0YW5jZUlkKHRhc2tQYXRoOiBzdHJpbmcsIGluc3RhbmNlSWQ6IHN0cmluZyk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGxvZ0RhdGFQYXRoID0gdGhpcy5wbHVnaW4ucGF0aE1hbmFnZXIuZ2V0TG9nRGF0YVBhdGgoKTtcbiAgICAgIGNvbnN0IFt5ZWFyLCBtb250aF0gPSB0aGlzLmdldEN1cnJlbnREYXRlU3RyaW5nKCkuc3BsaXQoJy0nKTtcbiAgICAgIGNvbnN0IG1vbnRoU3RyaW5nID0gYCR7eWVhcn0tJHttb250aH1gO1xuICAgICAgY29uc3QgbG9nUGF0aCA9IGAke2xvZ0RhdGFQYXRofS8ke21vbnRoU3RyaW5nfS10YXNrcy5qc29uYDtcbiAgICAgIFxuICAgICAgY29uc3QgbG9nRmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChsb2dQYXRoKTtcbiAgICAgIGlmICghbG9nRmlsZSB8fCAhKGxvZ0ZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGxvZ0ZpbGUpO1xuICAgICAgY29uc3QgbW9udGhseUxvZyA9IEpTT04ucGFyc2UoY29udGVudCk7XG4gICAgICBcbiAgICAgIGxldCBkZWxldGVkQ291bnQgPSAwO1xuICAgICAgZm9yIChjb25zdCBkYXRlS2V5IGluIG1vbnRobHlMb2cudGFza0V4ZWN1dGlvbnMpIHtcbiAgICAgICAgY29uc3QgZGF5RXhlY3V0aW9ucyA9IG1vbnRobHlMb2cudGFza0V4ZWN1dGlvbnNbZGF0ZUtleV07XG4gICAgICAgIGNvbnN0IGJlZm9yZUxlbmd0aCA9IGRheUV4ZWN1dGlvbnMubGVuZ3RoO1xuICAgICAgICBtb250aGx5TG9nLnRhc2tFeGVjdXRpb25zW2RhdGVLZXldID0gZGF5RXhlY3V0aW9ucy5maWx0ZXIoXG4gICAgICAgICAgKGV4ZWM6IGFueSkgPT4gZXhlYy5pbnN0YW5jZUlkICE9PSBpbnN0YW5jZUlkXG4gICAgICAgICk7XG4gICAgICAgIGRlbGV0ZWRDb3VudCArPSBiZWZvcmVMZW5ndGggLSBtb250aGx5TG9nLnRhc2tFeGVjdXRpb25zW2RhdGVLZXldLmxlbmd0aDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGRlbGV0ZWRDb3VudCA+IDApIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGxvZ0ZpbGUsIEpTT04uc3RyaW5naWZ5KG1vbnRobHlMb2csIG51bGwsIDIpKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIGRlbGV0ZWRDb3VudDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGRlbGV0ZSB0YXNrIGxvZ3M6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzaG93VGFza0NvbnRleHRNZW51KGU6IE1vdXNlRXZlbnQsIGluc3Q6IFRhc2tJbnN0YW5jZSk6IHZvaWQge1xuICAgIG5ldyBOb3RpY2UoXCJcdTMwQjNcdTMwRjNcdTMwQzZcdTMwQURcdTMwQjlcdTMwQzhcdTMwRTFcdTMwQ0JcdTMwRTVcdTMwRkNcdTMwNkZcdTVCOUZcdTg4QzVcdTRFMkRcdTMwNjdcdTMwNTlcIik7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZURyYWdPdmVyKGU6IERyYWdFdmVudCwgdGFza0l0ZW06IEhUTUxFbGVtZW50LCBpbnN0OiBUYXNrSW5zdGFuY2UpOiB2b2lkIHtcbiAgICAvLyBIYW5kbGUgZHJhZyBvdmVyIGxvZ2ljXG4gIH1cblxuICBwcml2YXRlIGNsZWFyRHJhZ292ZXJDbGFzc2VzKHRhc2tJdGVtOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIHRhc2tJdGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJkcmFnb3ZlclwiLCBcImRyYWdvdmVyLWJvdHRvbVwiLCBcImRyYWdvdmVyLWludmFsaWRcIik7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZURyb3AoZTogRHJhZ0V2ZW50LCB0YXNrSXRlbTogSFRNTEVsZW1lbnQsIGluc3Q6IFRhc2tJbnN0YW5jZSk6IHZvaWQge1xuICAgIC8vIEhhbmRsZSBkcm9wIGxvZ2ljXG4gIH1cblxuICBwcml2YXRlIGhhbmRsZVNsb3REcm9wKGU6IERyYWdFdmVudCwgc2xvdDogc3RyaW5nKTogdm9pZCB7XG4gICAgLy8gSGFuZGxlIHNsb3QgZHJvcCBsb2dpY1xuICB9XG5cbiAgcHJpdmF0ZSB0b2dnbGVOYXZpZ2F0aW9uKCk6IHZvaWQge1xuICAgIHRoaXMubmF2aWdhdGlvblN0YXRlLmlzT3BlbiA9ICF0aGlzLm5hdmlnYXRpb25TdGF0ZS5pc09wZW47XG4gICAgXG4gICAgaWYgKHRoaXMubmF2aWdhdGlvblN0YXRlLmlzT3Blbikge1xuICAgICAgdGhpcy5vcGVuTmF2aWdhdGlvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNsb3NlTmF2aWdhdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgb3Blbk5hdmlnYXRpb24oKTogdm9pZCB7XG4gICAgdGhpcy5uYXZpZ2F0aW9uUGFuZWwuY2xhc3NMaXN0LnJlbW92ZShcIm5hdmlnYXRpb24tcGFuZWwtaGlkZGVuXCIpO1xuICAgIHRoaXMubmF2aWdhdGlvbk92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZShcIm5hdmlnYXRpb24tb3ZlcmxheS1oaWRkZW5cIik7XG4gIH1cblxuICBwcml2YXRlIGNsb3NlTmF2aWdhdGlvbigpOiB2b2lkIHtcbiAgICB0aGlzLm5hdmlnYXRpb25QYW5lbC5jbGFzc0xpc3QuYWRkKFwibmF2aWdhdGlvbi1wYW5lbC1oaWRkZW5cIik7XG4gICAgdGhpcy5uYXZpZ2F0aW9uT3ZlcmxheS5jbGFzc0xpc3QuYWRkKFwibmF2aWdhdGlvbi1vdmVybGF5LWhpZGRlblwiKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2V0Um91dGluZVRhc2sodGFzazogYW55LCBidXR0b246IEhUTUxFbGVtZW50LCBzY2hlZHVsZWRUaW1lOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdGFza0ZvbGRlclBhdGggPSB0aGlzLnBsdWdpbi5wYXRoTWFuYWdlci5nZXRUYXNrRm9sZGVyUGF0aCgpO1xuICAgICAgY29uc3QgZmlsZVBhdGggPSBgJHt0YXNrRm9sZGVyUGF0aH0vJHt0YXNrLnRpdGxlfS5tZGA7XG4gICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcbiAgICAgIFxuICAgICAgaWYgKCFmaWxlIHx8ICEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuICAgICAgICBuZXcgTm90aWNlKGBcdTMwQkZcdTMwQjlcdTMwQUZcdTMwRDVcdTMwQTFcdTMwQTRcdTMwRUJcdTMwMEMke3Rhc2sudGl0bGV9Lm1kXHUzMDBEXHUzMDRDXHU4OThCXHUzMDY0XHUzMDRCXHUzMDhBXHUzMDdFXHUzMDVCXHUzMDkzYCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gXHUzMEVCXHUzMEZDXHUzMEMxXHUzMEYzXHUzMEJGXHUzMEI5XHUzMEFGXHUzMDY4XHUzMDU3XHUzMDY2XHU4QTJEXHU1QjlBXG4gICAgICBhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci5wcm9jZXNzRnJvbnRNYXR0ZXIoZmlsZSwgKGZyb250bWF0dGVyKSA9PiB7XG4gICAgICAgIGZyb250bWF0dGVyLmlzUm91dGluZSA9IHRydWU7XG4gICAgICAgIGZyb250bWF0dGVyLlx1OTU4Qlx1NTlDQlx1NjY0Mlx1NTIzQiA9IHNjaGVkdWxlZFRpbWU7XG4gICAgICAgIGZyb250bWF0dGVyLnJvdXRpbmVfdHlwZSA9IFwiZGFpbHlcIjtcbiAgICAgICAgY29uc3QgeSA9IHRoaXMuY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgY29uc3QgbSA9ICh0aGlzLmN1cnJlbnREYXRlLmdldE1vbnRoKCkgKyAxKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcbiAgICAgICAgY29uc3QgZCA9IHRoaXMuY3VycmVudERhdGUuZ2V0RGF0ZSgpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpO1xuICAgICAgICBmcm9udG1hdHRlci5yb3V0aW5lX3N0YXJ0ID0gYCR7eX0tJHttfS0ke2R9YDtcbiAgICAgICAgZGVsZXRlIGZyb250bWF0dGVyLnJvdXRpbmVfZW5kO1xuICAgICAgICByZXR1cm4gZnJvbnRtYXR0ZXI7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gXHU3MkI2XHU2MTRCXHU2NkY0XHU2NUIwXG4gICAgICB0YXNrLmlzUm91dGluZSA9IHRydWU7XG4gICAgICB0YXNrLnNjaGVkdWxlZFRpbWUgPSBzY2hlZHVsZWRUaW1lO1xuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gICAgICBidXR0b24uc2V0QXR0cmlidXRlKFwidGl0bGVcIiwgYFx1MzBFQlx1MzBGQ1x1MzBDMVx1MzBGM1x1MzBCRlx1MzBCOVx1MzBBRlx1RkYwOCR7c2NoZWR1bGVkVGltZX1cdTk1OEJcdTU5Q0JcdTRFODhcdTVCOUFcdUZGMDlgKTtcbiAgICAgIFxuICAgICAgLy8gXHUzMEJGXHUzMEI5XHUzMEFGXHU2MEM1XHU1ODMxXHUzMDkyXHU1MThEXHU1M0Q2XHU1Rjk3XHUzMDU3XHUzMDAxVUlcdTMwOTJcdTY3MDBcdTY1QjBcdTUzMTZcbiAgICAgIGF3YWl0IHRoaXMubG9hZFRhc2tzKCk7XG4gICAgICBuZXcgTm90aWNlKGBcdTMwMEMke3Rhc2sudGl0bGV9XHUzMDBEXHUzMDkyXHUzMEVCXHUzMEZDXHUzMEMxXHUzMEYzXHUzMEJGXHUzMEI5XHUzMEFGXHUzMDZCXHU4QTJEXHU1QjlBXHUzMDU3XHUzMDdFXHUzMDU3XHUzMDVGXHVGRjA4JHtzY2hlZHVsZWRUaW1lfVx1OTU4Qlx1NTlDQlx1NEU4OFx1NUI5QVx1RkYwOWApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIHNldCByb3V0aW5lIHRhc2s6XCIsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoXCJcdTMwRUJcdTMwRkNcdTMwQzFcdTMwRjNcdTMwQkZcdTMwQjlcdTMwQUZcdTMwNkVcdThBMkRcdTVCOUFcdTMwNkJcdTU5MzFcdTY1NTdcdTMwNTdcdTMwN0VcdTMwNTdcdTMwNUZcIik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBkZWxldGVJbnN0YW5jZVdpdGhDb25maXJtKGluc3Q6IFRhc2tJbnN0YW5jZSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGNvbmZpcm1lZCA9IGF3YWl0IHRoaXMuc2hvd0RlbGV0ZUNvbmZpcm1EaWFsb2coaW5zdCk7XG4gICAgaWYgKGNvbmZpcm1lZCkge1xuICAgICAgYXdhaXQgdGhpcy5kZWxldGVJbnN0YW5jZShpbnN0KTtcbiAgICB9XG4gIH1cbiAgXG4gIHByaXZhdGUgc2hvd0RlbGV0ZUNvbmZpcm1EaWFsb2coaW5zdDogVGFza0luc3RhbmNlKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBtb2RhbC5jbGFzc05hbWUgPSBcInRhc2stbW9kYWwtb3ZlcmxheVwiO1xuICAgICAgY29uc3QgbW9kYWxDb250ZW50ID0gbW9kYWwuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwidGFzay1tb2RhbC1jb250ZW50XCIgfSk7XG4gICAgICBcbiAgICAgIG1vZGFsQ29udGVudC5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJcdTMwQkZcdTMwQjlcdTMwQUZcdTMwNkVcdTUyNEFcdTk2NjRcdTc4QkFcdThBOERcIiB9KTtcbiAgICAgIG1vZGFsQ29udGVudC5jcmVhdGVFbChcInBcIiwge1xuICAgICAgICB0ZXh0OiBgXHUzMDBDJHtpbnN0LnRhc2sudGl0bGV9XHUzMDBEXHUzMDkyXHU1MjRBXHU5NjY0XHUzMDU3XHUzMDY2XHUzMDgyXHUzMDg4XHUzMDhEXHUzMDU3XHUzMDQ0XHUzMDY3XHUzMDU5XHUzMDRCXHVGRjFGYCxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBtb2RhbENvbnRlbnQuY3JlYXRlRWwoXCJkaXZcIiwge1xuICAgICAgICBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGNvbmZpcm1CdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuICAgICAgICB0ZXh0OiBcIlx1NTI0QVx1OTY2NFwiLFxuICAgICAgICBjbHM6IFwibW9kLWN0YVwiLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG4gICAgICAgIHRleHQ6IFwiXHUzMEFEXHUzMEUzXHUzMEYzXHUzMEJCXHUzMEVCXCIsXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uZmlybUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBtb2RhbC5yZW1vdmUoKTtcbiAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgbW9kYWwucmVtb3ZlKCk7XG4gICAgICAgIHJlc29sdmUoZmFsc2UpO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobW9kYWwpO1xuICAgIH0pO1xuICB9XG4gIFxuICBwcml2YXRlIGFzeW5jIGRlbGV0ZUluc3RhbmNlKGluc3Q6IFRhc2tJbnN0YW5jZSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBcdTMwQTRcdTMwRjNcdTMwQjlcdTMwQkZcdTMwRjNcdTMwQjlcdTMwOTJcdTMwRUFcdTMwQjlcdTMwQzhcdTMwNEJcdTMwODlcdTUyNEFcdTk2NjRcbiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy50YXNrSW5zdGFuY2VzLmluZGV4T2YoaW5zdCk7XG4gICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICB0aGlzLnRhc2tJbnN0YW5jZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gXHU1MjRBXHU5NjY0XHU3MkI2XHU2MTRCXHUzMDkyXHU0RkREXHU1QjU4XG4gICAgICBjb25zdCBkYXRlU3RyID0gdGhpcy5nZXRDdXJyZW50RGF0ZVN0cmluZygpO1xuICAgICAgY29uc3QgZGVsZXRlZEluc3RhbmNlcyA9IHRoaXMuZ2V0RGVsZXRlZEluc3RhbmNlcyhkYXRlU3RyKTtcbiAgICAgIGRlbGV0ZWRJbnN0YW5jZXMucHVzaCh7XG4gICAgICAgIGluc3RhbmNlSWQ6IGluc3QuaW5zdGFuY2VJZCxcbiAgICAgICAgcGF0aDogaW5zdC50YXNrLnBhdGgsXG4gICAgICAgIGRlbGV0aW9uVHlwZTogaW5zdC50YXNrLmlzUm91dGluZSA/IFwidG9kYXlcIiA6IFwicGVybWFuZW50XCIsXG4gICAgICAgIGRlbGV0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgfSk7XG4gICAgICB0aGlzLnNhdmVEZWxldGVkSW5zdGFuY2VzKGRhdGVTdHIsIGRlbGV0ZWRJbnN0YW5jZXMpO1xuICAgICAgXG4gICAgICAvLyBcdTk3NUVcdTMwRUJcdTMwRkNcdTMwQzFcdTMwRjNcdTMwQkZcdTMwQjlcdTMwQUZcdTMwNkVcdTU4MzRcdTU0MDhcdTMwMDFcdTU0MENcdTMwNThcdTMwRDFcdTMwQjlcdTMwNkVcdTRFRDZcdTMwNkVcdTMwQTRcdTMwRjNcdTMwQjlcdTMwQkZcdTMwRjNcdTMwQjlcdTMwNENcdTMwNkFcdTMwNTFcdTMwOENcdTMwNzBcdTMwRDVcdTMwQTFcdTMwQTRcdTMwRUJcdTMwODJcdTUyNEFcdTk2NjRcbiAgICAgIGlmICghaW5zdC50YXNrLmlzUm91dGluZSkge1xuICAgICAgICBjb25zdCBzYW1lUGF0aEluc3RhbmNlcyA9IHRoaXMudGFza0luc3RhbmNlcy5maWx0ZXIoXG4gICAgICAgICAgKGkpID0+IGkudGFzay5wYXRoID09PSBpbnN0LnRhc2sucGF0aFxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgaWYgKHNhbWVQYXRoSW5zdGFuY2VzLmxlbmd0aCA9PT0gMCAmJiBpbnN0LnRhc2suZmlsZSkge1xuICAgICAgICAgIC8vIFx1NjcwMFx1NUY4Q1x1MzA2RVx1MzBBNFx1MzBGM1x1MzBCOVx1MzBCRlx1MzBGM1x1MzBCOVx1MzA2RVx1NTgzNFx1NTQwOFx1MzAwMVx1MzBENVx1MzBBMVx1MzBBNFx1MzBFQlx1MzA4Mlx1NTI0QVx1OTY2NFxuICAgICAgICAgIHRoaXMudGFza3MgPSB0aGlzLnRhc2tzLmZpbHRlcigodCkgPT4gdC5wYXRoICE9PSBpbnN0LnRhc2sucGF0aCk7XG4gICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuZGVsZXRlKGluc3QudGFzay5maWxlKTtcbiAgICAgICAgICBuZXcgTm90aWNlKGBcdTMwMEMke2luc3QudGFzay50aXRsZX1cdTMwMERcdTMwOTJcdTVCOENcdTUxNjhcdTMwNkJcdTUyNEFcdTk2NjRcdTMwNTdcdTMwN0VcdTMwNTdcdTMwNUZcdTMwMDJgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXcgTm90aWNlKGBcdTMwMEMke2luc3QudGFzay50aXRsZX1cdTMwMERcdTMwOTJcdTY3MkNcdTY1RTVcdTMwNkVcdTMwRUFcdTMwQjlcdTMwQzhcdTMwNEJcdTMwODlcdTUyNEFcdTk2NjRcdTMwNTdcdTMwN0VcdTMwNTdcdTMwNUZcdTMwMDJgKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZShgXHUzMDBDJHtpbnN0LnRhc2sudGl0bGV9XHUzMDBEXHUzMDkyXHU2NzJDXHU2NUU1XHUzMDZFXHUzMEVBXHUzMEI5XHUzMEM4XHUzMDRCXHUzMDg5XHU1MjRBXHU5NjY0XHUzMDU3XHUzMDdFXHUzMDU3XHUzMDVGXHUzMDAyYCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFVJXHUzMDkyXHU2NkY0XHU2NUIwXG4gICAgICB0aGlzLnJlbmRlclRhc2tMaXN0KCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gZGVsZXRlIGluc3RhbmNlOlwiLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKFwiXHUzMEJGXHUzMEI5XHUzMEFGXHUzMDZFXHU1MjRBXHU5NjY0XHUzMDZCXHU1OTMxXHU2NTU3XHUzMDU3XHUzMDdFXHUzMDU3XHUzMDVGXCIpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcmVzZXRUYXNrVG9JZGxlKGluc3Q6IFRhc2tJbnN0YW5jZSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBcdTcyQjZcdTYxNEJcdTMwOTJpZGxlXHUzMDZCXHUzMEVBXHUzMEJCXHUzMEMzXHUzMEM4XG4gICAgICBpbnN0LnN0YXRlID0gXCJpZGxlXCI7XG4gICAgICBpbnN0LnN0YXJ0VGltZSA9IHVuZGVmaW5lZDtcbiAgICAgIGluc3Quc3RvcFRpbWUgPSB1bmRlZmluZWQ7XG4gICAgICBcbiAgICAgIC8vIFx1NzJCNlx1NjE0Qlx1MzA5Mlx1NEZERFx1NUI1OFxuICAgICAgdGhpcy5zYXZlSW5zdGFuY2VTdGF0ZShpbnN0KTtcbiAgICAgIFxuICAgICAgLy8gVUlcdTMwOTJcdTY2RjRcdTY1QjBcbiAgICAgIHRoaXMucmVuZGVyVGFza0xpc3QoKTtcbiAgICAgIFxuICAgICAgbmV3IE5vdGljZShgXHUzMDBDJHtpbnN0LnRhc2sudGl0bGV9XHUzMDBEXHUzMDkyXHUzMEEyXHUzMEE0XHUzMEM5XHUzMEVCXHU3MkI2XHU2MTRCXHUzMDZCXHU2MjNCXHUzMDU3XHUzMDdFXHUzMDU3XHUzMDVGYCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gcmVzZXQgdGFzazpcIiwgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZShcIlx1MzBCRlx1MzBCOVx1MzBBRlx1MzA2RVx1MzBFQVx1MzBCQlx1MzBDM1x1MzBDOFx1MzA2Qlx1NTkzMVx1NjU1N1x1MzA1N1x1MzA3RVx1MzA1N1x1MzA1RlwiKTtcbiAgICB9XG4gIH1cbiAgXG4gIHByaXZhdGUgYXN5bmMgc2hvd1Byb2plY3RTZXR0aW5nc01vZGFsKGluc3Q6IFRhc2tJbnN0YW5jZSwgdG9vbHRpcDogSFRNTEVsZW1lbnQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBcdTMwQzRcdTMwRkNcdTMwRUJcdTMwQzFcdTMwQzNcdTMwRDdcdTMwOTJcdTk1ODlcdTMwNThcdTMwOEJcbiAgICBpZiAodG9vbHRpcCkge1xuICAgICAgdG9vbHRpcC5yZW1vdmUoKTtcbiAgICB9XG4gICAgXG4gICAgLy8gXHUzMEUyXHUzMEZDXHUzMEMwXHUzMEVCXHUzMEIzXHUzMEYzXHUzMEM2XHUzMENBXG4gICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIG1vZGFsLmNsYXNzTmFtZSA9IFwidGFzay1tb2RhbC1vdmVybGF5XCI7XG4gICAgY29uc3QgbW9kYWxDb250ZW50ID0gbW9kYWwuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwidGFzay1tb2RhbC1jb250ZW50XCIgfSk7XG4gICAgXG4gICAgLy8gXHUzMEUyXHUzMEZDXHUzMEMwXHUzMEVCXHUzMEQ4XHUzMEMzXHUzMEMwXHUzMEZDXG4gICAgY29uc3QgbW9kYWxIZWFkZXIgPSBtb2RhbENvbnRlbnQuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwibW9kYWwtaGVhZGVyXCIgfSk7XG4gICAgbW9kYWxIZWFkZXIuY3JlYXRlRWwoXCJoM1wiLCB7XG4gICAgICB0ZXh0OiBgXHUzMDBDJHtpbnN0LnRhc2sudGl0bGV9XHUzMDBEXHUzMDZFXHUzMEQ3XHUzMEVEXHUzMEI4XHUzMEE3XHUzMEFGXHUzMEM4XHU4QTJEXHU1QjlBYCxcbiAgICB9KTtcbiAgICBcbiAgICAvLyBcdTk1ODlcdTMwNThcdTMwOEJcdTMwRENcdTMwQkZcdTMwRjNcbiAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IG1vZGFsSGVhZGVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcbiAgICAgIGNsczogXCJtb2RhbC1jbG9zZS1idXR0b25cIixcbiAgICAgIHRleHQ6IFwiXHUwMEQ3XCIsXG4gICAgfSk7XG4gICAgXG4gICAgLy8gXHUzMEQ1XHUzMEE5XHUzMEZDXHUzMEUwXG4gICAgY29uc3QgZm9ybSA9IG1vZGFsQ29udGVudC5jcmVhdGVFbChcImZvcm1cIiwgeyBjbHM6IFwidGFzay1mb3JtXCIgfSk7XG4gICAgXG4gICAgLy8gXHUzMEQ3XHUzMEVEXHUzMEI4XHUzMEE3XHUzMEFGXHUzMEM4XHU5MDc4XHU2MjlFXG4gICAgY29uc3QgcHJvamVjdEdyb3VwID0gZm9ybS5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJmb3JtLWdyb3VwXCIgfSk7XG4gICAgcHJvamVjdEdyb3VwLmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIlx1MzBEN1x1MzBFRFx1MzBCOFx1MzBBN1x1MzBBRlx1MzBDODpcIiwgY2xzOiBcImZvcm0tbGFiZWxcIiB9KTtcbiAgICBjb25zdCBwcm9qZWN0U2VsZWN0ID0gcHJvamVjdEdyb3VwLmNyZWF0ZUVsKFwic2VsZWN0XCIsIHtcbiAgICAgIGNsczogXCJmb3JtLXNlbGVjdFwiLFxuICAgIH0pIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xuICAgIFxuICAgIC8vIFx1MzBEN1x1MzBFRFx1MzBCOFx1MzBBN1x1MzBBRlx1MzBDOFx1MzBFQVx1MzBCOVx1MzBDOFx1MzA5Mlx1NTNENlx1NUY5N1x1MzA1N1x1MzA2Nlx1MzBBQVx1MzBEN1x1MzBCN1x1MzBFN1x1MzBGM1x1MzA5Mlx1OEZGRFx1NTJBMFxuICAgIGNvbnN0IHByb2plY3RzID0gYXdhaXQgdGhpcy5nZXRBdmFpbGFibGVQcm9qZWN0cygpO1xuICAgIFxuICAgIC8vIFx1MzAwQ1x1MzBEN1x1MzBFRFx1MzBCOFx1MzBBN1x1MzBBRlx1MzBDOFx1MzA2QVx1MzA1N1x1MzAwRFx1MzBBQVx1MzBEN1x1MzBCN1x1MzBFN1x1MzBGM1xuICAgIGNvbnN0IG5vbmVPcHRpb24gPSBwcm9qZWN0U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHtcbiAgICAgIHZhbHVlOiBcIlwiLFxuICAgICAgdGV4dDogXCJcdTMwRDdcdTMwRURcdTMwQjhcdTMwQTdcdTMwQUZcdTMwQzhcdTMwNkFcdTMwNTdcIixcbiAgICB9KTtcbiAgICBcbiAgICBwcm9qZWN0cy5mb3JFYWNoKChwcm9qZWN0KSA9PiB7XG4gICAgICBwcm9qZWN0U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHtcbiAgICAgICAgdmFsdWU6IHByb2plY3QsXG4gICAgICAgIHRleHQ6IHByb2plY3QsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBcdTczRkVcdTU3MjhcdTMwNkVcdTMwRDdcdTMwRURcdTMwQjhcdTMwQTdcdTMwQUZcdTMwQzhcdTMwOTJcdTkwNzhcdTYyOUVcbiAgICBpZiAoaW5zdC50YXNrLnByb2plY3QpIHtcbiAgICAgIHByb2plY3RTZWxlY3QudmFsdWUgPSBpbnN0LnRhc2sucHJvamVjdDtcbiAgICB9XG4gICAgXG4gICAgLy8gXHUzMERDXHUzMEJGXHUzMEYzXHUzMEE4XHUzMEVBXHUzMEEyXG4gICAgY29uc3QgYnV0dG9uR3JvdXAgPSBmb3JtLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcImZvcm0tYnV0dG9uLWdyb3VwXCIgfSk7XG4gICAgY29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uR3JvdXAuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgIGNsczogXCJmb3JtLWJ1dHRvbiBjYW5jZWxcIixcbiAgICAgIHRleHQ6IFwiXHUzMEFEXHUzMEUzXHUzMEYzXHUzMEJCXHUzMEVCXCIsXG4gICAgfSk7XG4gICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IGJ1dHRvbkdyb3VwLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcbiAgICAgIHR5cGU6IFwic3VibWl0XCIsXG4gICAgICBjbHM6IFwiZm9ybS1idXR0b24gY3JlYXRlXCIsXG4gICAgICB0ZXh0OiBcIlx1NEZERFx1NUI1OFwiLFxuICAgIH0pO1xuICAgIFxuICAgIC8vIFx1MzBBNFx1MzBEOVx1MzBGM1x1MzBDOFx1MzBFQVx1MzBCOVx1MzBDQVx1MzBGQ1xuICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG1vZGFsKTtcbiAgICB9KTtcbiAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobW9kYWwpO1xuICAgIH0pO1xuICAgIFxuICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBhc3luYyAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc3Qgc2VsZWN0ZWRQcm9qZWN0ID0gcHJvamVjdFNlbGVjdC52YWx1ZTtcbiAgICAgIFxuICAgICAgLy8gXHUzMEQ3XHUzMEVEXHUzMEI4XHUzMEE3XHUzMEFGXHUzMEM4XHUzMDkyXHU2NkY0XHU2NUIwXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZVRhc2tQcm9qZWN0KGluc3QsIHNlbGVjdGVkUHJvamVjdCk7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG1vZGFsKTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBcdTMwRTJcdTMwRkNcdTMwQzBcdTMwRUJcdTMwOTJcdTg4NjhcdTc5M0FcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1vZGFsKTtcbiAgfVxuICBcbiAgcHJpdmF0ZSBhc3luYyBnZXRBdmFpbGFibGVQcm9qZWN0cygpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHByb2plY3RGb2xkZXJQYXRoID0gdGhpcy5wbHVnaW4ucGF0aE1hbmFnZXIuZ2V0UHJvamVjdEZvbGRlclBhdGgoKTtcbiAgICAgIGNvbnN0IHByb2plY3RGb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocHJvamVjdEZvbGRlclBhdGgpO1xuICAgICAgXG4gICAgICBpZiAoIXByb2plY3RGb2xkZXIgfHwgISgnY2hpbGRyZW4nIGluIHByb2plY3RGb2xkZXIpKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgcHJvamVjdHM6IHN0cmluZ1tdID0gW107XG4gICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgcHJvamVjdEZvbGRlci5jaGlsZHJlbikge1xuICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUuZXh0ZW5zaW9uID09PSBcIm1kXCIpIHtcbiAgICAgICAgICBwcm9qZWN0cy5wdXNoKGZpbGUuYmFzZW5hbWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBwcm9qZWN0cztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBnZXQgcHJvamVjdHM6XCIsIGVycm9yKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cbiAgXG4gIHByaXZhdGUgYXN5bmMgdXBkYXRlVGFza1Byb2plY3QoaW5zdDogVGFza0luc3RhbmNlLCBwcm9qZWN0TmFtZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRhc2tGb2xkZXJQYXRoID0gdGhpcy5wbHVnaW4ucGF0aE1hbmFnZXIuZ2V0VGFza0ZvbGRlclBhdGgoKTtcbiAgICAgIGNvbnN0IGZpbGVQYXRoID0gYCR7dGFza0ZvbGRlclBhdGh9LyR7aW5zdC50YXNrLnRpdGxlfS5tZGA7XG4gICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcbiAgICAgIFxuICAgICAgaWYgKCFmaWxlIHx8ICEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuICAgICAgICBuZXcgTm90aWNlKGBcdTMwQkZcdTMwQjlcdTMwQUZcdTMwRDVcdTMwQTFcdTMwQTRcdTMwRUJcdTMwMEMke2luc3QudGFzay50aXRsZX0ubWRcdTMwMERcdTMwNENcdTg5OEJcdTMwNjRcdTMwNEJcdTMwOEFcdTMwN0VcdTMwNUJcdTMwOTNgKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBcdTMwRDdcdTMwRURcdTMwQjhcdTMwQTdcdTMwQUZcdTMwQzhcdTMwOTJcdTY2RjRcdTY1QjBcbiAgICAgIGF3YWl0IHRoaXMuYXBwLmZpbGVNYW5hZ2VyLnByb2Nlc3NGcm9udE1hdHRlcihmaWxlLCAoZnJvbnRtYXR0ZXIpID0+IHtcbiAgICAgICAgaWYgKHByb2plY3ROYW1lKSB7XG4gICAgICAgICAgZnJvbnRtYXR0ZXIucHJvamVjdCA9IGBbWyR7cHJvamVjdE5hbWV9XV1gO1xuICAgICAgICAgIGZyb250bWF0dGVyLnByb2plY3RfcGF0aCA9IGBUYXNrQ2h1dGUvUHJvamVjdC8ke3Byb2plY3ROYW1lfS5tZGA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVsZXRlIGZyb250bWF0dGVyLnByb2plY3Q7XG4gICAgICAgICAgZGVsZXRlIGZyb250bWF0dGVyLnByb2plY3RfcGF0aDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnJvbnRtYXR0ZXI7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gXHUzMEJGXHUzMEI5XHUzMEFGXHUzMEFBXHUzMEQ2XHUzMEI4XHUzMEE3XHUzMEFGXHUzMEM4XHUzMDkyXHU2NkY0XHU2NUIwXG4gICAgICBpbnN0LnRhc2sucHJvamVjdCA9IHByb2plY3ROYW1lIHx8IHVuZGVmaW5lZDtcbiAgICAgIGluc3QudGFzay5wcm9qZWN0UGF0aCA9IHByb2plY3ROYW1lID8gYFRhc2tDaHV0ZS9Qcm9qZWN0LyR7cHJvamVjdE5hbWV9Lm1kYCA6IHVuZGVmaW5lZDtcbiAgICAgIGluc3QudGFzay5wcm9qZWN0VGl0bGUgPSBwcm9qZWN0TmFtZSB8fCB1bmRlZmluZWQ7XG4gICAgICBcbiAgICAgIC8vIFVJXHUzMDkyXHU2NkY0XHU2NUIwXG4gICAgICB0aGlzLnJlbmRlclRhc2tMaXN0KCk7XG4gICAgICBcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBwcm9qZWN0TmFtZVxuICAgICAgICA/IGBcdTMwMEMke2luc3QudGFzay50aXRsZX1cdTMwMERcdTMwOTIke3Byb2plY3ROYW1lfVx1MzA2Qlx1OTVBMlx1OTAyM1x1NEVEOFx1MzA1MVx1MzA3RVx1MzA1N1x1MzA1RmBcbiAgICAgICAgOiBgXHUzMDBDJHtpbnN0LnRhc2sudGl0bGV9XHUzMDBEXHUzMDZFXHUzMEQ3XHUzMEVEXHUzMEI4XHUzMEE3XHUzMEFGXHUzMEM4XHU5NUEyXHU5MDIzXHU0RUQ4XHUzMDUxXHUzMDkyXHU4OUUzXHU5NjY0XHUzMDU3XHUzMDdFXHUzMDU3XHUzMDVGYDtcbiAgICAgIG5ldyBOb3RpY2UobWVzc2FnZSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gdXBkYXRlIHByb2plY3Q6XCIsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoXCJcdTMwRDdcdTMwRURcdTMwQjhcdTMwQTdcdTMwQUZcdTMwQzhcdTMwNkVcdTY2RjRcdTY1QjBcdTMwNkJcdTU5MzFcdTY1NTdcdTMwNTdcdTMwN0VcdTMwNTdcdTMwNUZcIik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBtb3ZlSWRsZVRhc2tzVG9DdXJyZW50VGltZSgpOiB2b2lkIHtcbiAgICBuZXcgTm90aWNlKFwiXHUzMEEyXHUzMEE0XHUzMEM5XHUzMEVCXHUzMEJGXHUzMEI5XHUzMEFGXHU3OUZCXHU1MkQ1XHU2QTVGXHU4MEZEXHUzMDZGXHU1QjlGXHU4OEM1XHU0RTJEXHUzMDY3XHUzMDU5XCIpO1xuICB9XG4gIFxuICBwcml2YXRlIGFzeW5jIHNob3dBZGRUYXNrTW9kYWwoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gXHUzMEUyXHUzMEZDXHUzMEMwXHUzMEVCXHUzMEIzXHUzMEYzXHUzMEM2XHUzMENBXG4gICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIG1vZGFsLmNsYXNzTmFtZSA9IFwidGFzay1tb2RhbC1vdmVybGF5XCI7XG4gICAgY29uc3QgbW9kYWxDb250ZW50ID0gbW9kYWwuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwidGFzay1tb2RhbC1jb250ZW50XCIgfSk7XG4gICAgXG4gICAgLy8gXHUzMEUyXHUzMEZDXHUzMEMwXHUzMEVCXHUzMEQ4XHUzMEMzXHUzMEMwXHUzMEZDXG4gICAgY29uc3QgbW9kYWxIZWFkZXIgPSBtb2RhbENvbnRlbnQuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwibW9kYWwtaGVhZGVyXCIgfSk7XG4gICAgbW9kYWxIZWFkZXIuY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IFwiXHU2NUIwXHUzMDU3XHUzMDQ0XHUzMEJGXHUzMEI5XHUzMEFGXHUzMDkyXHU4RkZEXHU1MkEwXCIgfSk7XG4gICAgXG4gICAgLy8gXHU5NTg5XHUzMDU4XHUzMDhCXHUzMERDXHUzMEJGXHUzMEYzXG4gICAgY29uc3QgY2xvc2VCdXR0b24gPSBtb2RhbEhlYWRlci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG4gICAgICBjbHM6IFwibW9kYWwtY2xvc2UtYnV0dG9uXCIsXG4gICAgICB0ZXh0OiBcIlx1MDBEN1wiLFxuICAgIH0pO1xuICAgIFxuICAgIC8vIFx1MzBENVx1MzBBOVx1MzBGQ1x1MzBFMFxuICAgIGNvbnN0IGZvcm0gPSBtb2RhbENvbnRlbnQuY3JlYXRlRWwoXCJmb3JtXCIsIHsgY2xzOiBcInRhc2stZm9ybVwiIH0pO1xuICAgIFxuICAgIC8vIFx1MzBCRlx1MzBCOVx1MzBBRlx1NTQwRFx1NTE2NVx1NTI5QlxuICAgIGNvbnN0IG5hbWVHcm91cCA9IGZvcm0uY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwiZm9ybS1ncm91cFwiIH0pO1xuICAgIG5hbWVHcm91cC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJcdTMwQkZcdTMwQjlcdTMwQUZcdTU0MEQ6XCIsIGNsczogXCJmb3JtLWxhYmVsXCIgfSk7XG4gICAgY29uc3QgbmFtZUlucHV0ID0gbmFtZUdyb3VwLmNyZWF0ZUVsKFwiaW5wdXRcIiwge1xuICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICBjbHM6IFwiZm9ybS1pbnB1dFwiLFxuICAgICAgcGxhY2Vob2xkZXI6IFwiXHUzMEJGXHUzMEI5XHUzMEFGXHU1NDBEXHUzMDkyXHU1MTY1XHU1MjlCXCIsXG4gICAgfSkgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBcbiAgICAvLyBcdTg5OEJcdTdBNERcdTY2NDJcdTk1OTNcdTMwNkZcdTU2RkFcdTVCOUFcdTUwMjQzMFx1NTIwNlx1MzA5Mlx1NEY3Rlx1NzUyOFx1RkYwOFVJXHUzMDZCXHUzMDZGXHU4ODY4XHU3OTNBXHUzMDU3XHUzMDZBXHUzMDQ0XHVGRjA5XG4gICAgY29uc3QgZXN0aW1hdGVkTWludXRlcyA9IDMwO1xuICAgIFxuICAgIC8vIFx1MzBEQ1x1MzBCRlx1MzBGM1x1MzBBOFx1MzBFQVx1MzBBMlxuICAgIGNvbnN0IGJ1dHRvbkdyb3VwID0gZm9ybS5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJmb3JtLWJ1dHRvbi1ncm91cFwiIH0pO1xuICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkdyb3VwLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcbiAgICAgIHR5cGU6IFwiYnV0dG9uXCIsXG4gICAgICBjbHM6IFwiZm9ybS1idXR0b24gY2FuY2VsXCIsXG4gICAgICB0ZXh0OiBcIlx1MzBBRFx1MzBFM1x1MzBGM1x1MzBCQlx1MzBFQlwiLFxuICAgIH0pO1xuICAgIGNvbnN0IHNhdmVCdXR0b24gPSBidXR0b25Hcm91cC5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG4gICAgICB0eXBlOiBcInN1Ym1pdFwiLFxuICAgICAgY2xzOiBcImZvcm0tYnV0dG9uIGNyZWF0ZVwiLFxuICAgICAgdGV4dDogXCJcdTRGRERcdTVCNThcIixcbiAgICB9KTtcbiAgICBcbiAgICAvLyBcdTMwQTRcdTMwRDlcdTMwRjNcdTMwQzhcdTMwRUFcdTMwQjlcdTMwQ0FcdTMwRkNcbiAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChtb2RhbCk7XG4gICAgfSk7XG4gICAgY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG1vZGFsKTtcbiAgICB9KTtcbiAgICBcbiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgYXN5bmMgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0IHRhc2tOYW1lID0gbmFtZUlucHV0LnZhbHVlLnRyaW0oKTtcbiAgICAgIFxuICAgICAgaWYgKCF0YXNrTmFtZSkge1xuICAgICAgICBuZXcgTm90aWNlKFwiXHUzMEJGXHUzMEI5XHUzMEFGXHU1NDBEXHUzMDkyXHU1MTY1XHU1MjlCXHUzMDU3XHUzMDY2XHUzMDRGXHUzMDYwXHUzMDU1XHUzMDQ0XCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFx1MzBCRlx1MzBCOVx1MzBBRlx1MzA5Mlx1NEY1Q1x1NjIxMFx1RkYwOFx1ODk4Qlx1N0E0RFx1NjY0Mlx1OTU5M1x1MzA2RjMwXHU1MjA2XHU1NkZBXHU1QjlBXHVGRjA5XG4gICAgICBhd2FpdCB0aGlzLmNyZWF0ZU5ld1Rhc2sodGFza05hbWUsIGVzdGltYXRlZE1pbnV0ZXMpO1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChtb2RhbCk7XG4gICAgfSk7XG4gICAgXG4gICAgLy8gXHUzMEUyXHUzMEZDXHUzMEMwXHUzMEVCXHUzMDkyXHU4ODY4XHU3OTNBXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtb2RhbCk7XG4gICAgbmFtZUlucHV0LmZvY3VzKCk7XG4gIH1cbiAgXG4gIHByaXZhdGUgYXN5bmMgY3JlYXRlTmV3VGFzayh0YXNrTmFtZTogc3RyaW5nLCBlc3RpbWF0ZWRNaW51dGVzOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdGFza0ZvbGRlclBhdGggPSB0aGlzLnBsdWdpbi5wYXRoTWFuYWdlci5nZXRUYXNrRm9sZGVyUGF0aCgpO1xuICAgICAgY29uc3QgZmlsZVBhdGggPSBgJHt0YXNrRm9sZGVyUGF0aH0vJHt0YXNrTmFtZX0ubWRgO1xuICAgICAgXG4gICAgICAvLyBcdTRFQ0FcdTY1RTVcdTMwNkVcdTY1RTVcdTRFRDhcdTMwOTJcdTUzRDZcdTVGOTdcbiAgICAgIGNvbnN0IGRhdGVTdHIgPSB0aGlzLmdldEN1cnJlbnREYXRlU3RyaW5nKCk7XG4gICAgICBcbiAgICAgIC8vIFx1MzBENVx1MzBFRFx1MzBGM1x1MzBDOFx1MzBERVx1MzBCRlx1MzBGQ1x1MzA5Mlx1NEY1Q1x1NjIxMFx1RkYwOFx1MzBCRlx1MzBCOVx1MzBBRlx1MzBCRlx1MzBCMFx1MzA5Mlx1NTQyQlx1MzA4MVx1MzA4Qlx1RkYwOVxuICAgICAgY29uc3QgZnJvbnRtYXR0ZXIgPSBbXG4gICAgICAgIFwiLS0tXCIsXG4gICAgICAgIGBlc3RpbWF0ZWRNaW51dGVzOiAke2VzdGltYXRlZE1pbnV0ZXN9YCxcbiAgICAgICAgYGNyZWF0ZWRBdDogJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCl9YCxcbiAgICAgICAgXCItLS1cIixcbiAgICAgICAgXCJcIixcbiAgICAgICAgYCN0YXNrYCxcbiAgICAgICAgXCJcIixcbiAgICAgICAgYCMgJHt0YXNrTmFtZX1gLFxuICAgICAgICBcIlwiXG4gICAgICBdLmpvaW4oXCJcXG5cIik7XG4gICAgICBcbiAgICAgIC8vIFx1MzBENVx1MzBBMVx1MzBBNFx1MzBFQlx1MzA5Mlx1NEY1Q1x1NjIxMFxuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVQYXRoLCBmcm9udG1hdHRlcik7XG4gICAgICBcbiAgICAgIC8vIFx1NUMxMVx1MzA1N1x1NUY4NVx1MzA2M1x1MzA2Nlx1MzA0Qlx1MzA4OVx1MzBCRlx1MzBCOVx1MzBBRlx1MzBFQVx1MzBCOVx1MzBDOFx1MzA5Mlx1NjZGNFx1NjVCMFx1RkYwOFx1MzBENVx1MzBBMVx1MzBBNFx1MzBFQlx1MzBCN1x1MzBCOVx1MzBDNlx1MzBFMFx1MzA2RVx1NTQwQ1x1NjcxRlx1MzA5Mlx1NUY4NVx1MzA2NFx1RkYwOVxuICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFRhc2tzKCk7XG4gICAgICAgIHRoaXMucmVuZGVyVGFza0xpc3QoKTtcbiAgICAgIH0sIDEwMCk7XG4gICAgICBcbiAgICAgIG5ldyBOb3RpY2UoYFx1MzBCRlx1MzBCOVx1MzBBRlx1MzAwQyR7dGFza05hbWV9XHUzMDBEXHUzMDkyXHU0RjVDXHU2MjEwXHUzMDU3XHUzMDdFXHUzMDU3XHUzMDVGYCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gY3JlYXRlIHRhc2s6XCIsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoXCJcdTMwQkZcdTMwQjlcdTMwQUZcdTMwNkVcdTRGNUNcdTYyMTBcdTMwNkJcdTU5MzFcdTY1NTdcdTMwNTdcdTMwN0VcdTMwNTdcdTMwNUZcIik7XG4gICAgfVxuICB9XG4gIFxuICBwcml2YXRlIGFzeW5jIHNob3dUYXNrTW92ZURhdGVQaWNrZXIoaW5zdDogVGFza0luc3RhbmNlLCBidXR0b246IEhUTUxFbGVtZW50KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gXHU2NUU1XHU0RUQ4XHU5MDc4XHU2MjlFXHUzMEUyXHUzMEZDXHUzMEMwXHUzMEVCXHUzMDkyXHU4ODY4XHU3OTNBXG4gICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIG1vZGFsLmNsYXNzTmFtZSA9IFwidGFzay1tb2RhbC1vdmVybGF5XCI7XG4gICAgY29uc3QgbW9kYWxDb250ZW50ID0gbW9kYWwuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwidGFzay1tb2RhbC1jb250ZW50XCIgfSk7XG4gICAgXG4gICAgbW9kYWxDb250ZW50LmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBcIlx1MzBCRlx1MzBCOVx1MzBBRlx1MzA5Mlx1NzlGQlx1NTJENVwiIH0pO1xuICAgIFxuICAgIGNvbnN0IGRhdGVJbnB1dCA9IG1vZGFsQ29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHtcbiAgICAgIHR5cGU6IFwiZGF0ZVwiLFxuICAgICAgdmFsdWU6IHRoaXMuZ2V0Q3VycmVudERhdGVTdHJpbmcoKSxcbiAgICB9KSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIFxuICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IG1vZGFsQ29udGVudC5jcmVhdGVFbChcImRpdlwiLCB7XG4gICAgICBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiLFxuICAgIH0pO1xuICAgIFxuICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG4gICAgICB0ZXh0OiBcIlx1MzBBRFx1MzBFM1x1MzBGM1x1MzBCQlx1MzBFQlwiLFxuICAgIH0pO1xuICAgIFxuICAgIGNvbnN0IG1vdmVCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuICAgICAgdGV4dDogXCJcdTc5RkJcdTUyRDVcIixcbiAgICAgIGNsczogXCJtb2QtY3RhXCIsXG4gICAgfSk7XG4gICAgXG4gICAgY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBtb2RhbC5yZW1vdmUoKTtcbiAgICB9KTtcbiAgICBcbiAgICBtb3ZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBuZXdEYXRlID0gZGF0ZUlucHV0LnZhbHVlO1xuICAgICAgaWYgKG5ld0RhdGUpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5tb3ZlVGFza1RvRGF0ZShpbnN0LCBuZXdEYXRlKTtcbiAgICAgICAgbW9kYWwucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtb2RhbCk7XG4gIH1cbiAgXG4gIHByaXZhdGUgYXN5bmMgbW92ZVRhc2tUb0RhdGUoaW5zdDogVGFza0luc3RhbmNlLCBkYXRlU3RyOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gXHUzMEJGXHUzMEI5XHUzMEFGXHUzMDkyXHU2MzA3XHU1QjlBXHU2NUU1XHU0RUQ4XHUzMDZCXHU3OUZCXHU1MkQ1XG4gICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGluc3QudGFzay5wYXRoKTtcbiAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKGZpbGUsIChmcm9udG1hdHRlcikgPT4ge1xuICAgICAgICAgIGZyb250bWF0dGVyLnRhcmdldF9kYXRlID0gZGF0ZVN0cjtcbiAgICAgICAgICByZXR1cm4gZnJvbnRtYXR0ZXI7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICBuZXcgTm90aWNlKGBcdTMwQkZcdTMwQjlcdTMwQUZcdTMwMEMke2luc3QudGFzay50aXRsZX1cdTMwMERcdTMwOTIke2RhdGVTdHJ9XHUzMDZCXHU3OUZCXHU1MkQ1XHUzMDU3XHUzMDdFXHUzMDU3XHUzMDVGYCk7XG4gICAgICBhd2FpdCB0aGlzLmxvYWRUYXNrcygpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIG1vdmUgdGFzazpcIiwgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZShcIlx1MzBCRlx1MzBCOVx1MzBBRlx1MzA2RVx1NzlGQlx1NTJENVx1MzA2Qlx1NTkzMVx1NjU1N1x1MzA1N1x1MzA3RVx1MzA1N1x1MzA1RlwiKTtcbiAgICB9XG4gIH1cbiAgXG4gIHByaXZhdGUgYXN5bmMgc2hvd1Byb2plY3RNb2RhbChpbnN0OiBUYXNrSW5zdGFuY2UpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBzaG93UHJvamVjdE1vZGFsIGNhbGxzIHNob3dVbmlmaWVkUHJvamVjdE1vZGFsIGludGVybmFsbHlcbiAgICBhd2FpdCB0aGlzLnNob3dVbmlmaWVkUHJvamVjdE1vZGFsKGluc3QpO1xuICB9XG4gIFxuICBwcml2YXRlIGFzeW5jIHNob3dVbmlmaWVkUHJvamVjdE1vZGFsKGluc3Q6IFRhc2tJbnN0YW5jZSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBDcmVhdGUgbW9kYWwgb3ZlcmxheVxuICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgbW9kYWwuY2xhc3NOYW1lID0gXCJ0YXNrLW1vZGFsLW92ZXJsYXlcIjtcbiAgICAgIGNvbnN0IG1vZGFsQ29udGVudCA9IG1vZGFsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcInRhc2stbW9kYWwtY29udGVudFwiIH0pO1xuICAgICAgXG4gICAgICAvLyBNb2RhbCBoZWFkZXJcbiAgICAgIGNvbnN0IG1vZGFsSGVhZGVyID0gbW9kYWxDb250ZW50LmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcIm1vZGFsLWhlYWRlclwiIH0pO1xuICAgICAgbW9kYWxIZWFkZXIuY3JlYXRlRWwoXCJoM1wiLCB7XG4gICAgICAgIHRleHQ6IGBcdTMwMEMke2luc3QudGFzay50aXRsZX1cdTMwMERcdTMwNkVcdTMwRDdcdTMwRURcdTMwQjhcdTMwQTdcdTMwQUZcdTMwQzhcdThBMkRcdTVCOUFgLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIENsb3NlIGJ1dHRvblxuICAgICAgY29uc3QgY2xvc2VCdXR0b24gPSBtb2RhbEhlYWRlci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG4gICAgICAgIGNsczogXCJtb2RhbC1jbG9zZS1idXR0b25cIixcbiAgICAgICAgdGV4dDogXCJcdTAwRDdcIixcbiAgICAgICAgYXR0cjogeyB0aXRsZTogXCJcdTk1ODlcdTMwNThcdTMwOEJcIiB9LFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIEZvcm1cbiAgICAgIGNvbnN0IGZvcm0gPSBtb2RhbENvbnRlbnQuY3JlYXRlRWwoXCJmb3JtXCIsIHsgY2xzOiBcInRhc2stZm9ybVwiIH0pO1xuICAgICAgXG4gICAgICAvLyBHZXQgcHJvamVjdCBsaXN0XG4gICAgICBsZXQgcHJvamVjdEZpbGVzOiBURmlsZVtdID0gW107XG4gICAgICB0cnkge1xuICAgICAgICBwcm9qZWN0RmlsZXMgPSBhd2FpdCB0aGlzLmdldFByb2plY3RGaWxlcygpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIlx1MzBEN1x1MzBFRFx1MzBCOFx1MzBBN1x1MzBBRlx1MzBDOFx1MzBFQVx1MzBCOVx1MzBDOFx1MzA2RVx1OEFBRFx1MzA3Rlx1OEZCQ1x1MzA3Rlx1MzA2Qlx1NTkzMVx1NjU1N1x1MzA1N1x1MzA3RVx1MzA1N1x1MzA1RlwiKTtcbiAgICAgICAgbW9kYWwucmVtb3ZlKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHByb2plY3RGaWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gTm8gcHJvamVjdCBmaWxlcyBmb3VuZFxuICAgICAgICBjb25zdCBub1Byb2plY3RHcm91cCA9IGZvcm0uY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwiZm9ybS1ncm91cFwiIH0pO1xuICAgICAgICBub1Byb2plY3RHcm91cC5jcmVhdGVFbChcInBcIiwge1xuICAgICAgICAgIHRleHQ6IFwiXHUzMEQ3XHUzMEVEXHUzMEI4XHUzMEE3XHUzMEFGXHUzMEM4XHUzMEQ1XHUzMEExXHUzMEE0XHUzMEVCXHUzMDRDXHU4OThCXHUzMDY0XHUzMDRCXHUzMDhBXHUzMDdFXHUzMDVCXHUzMDkzXHUzMDAyXCIsXG4gICAgICAgICAgY2xzOiBcImZvcm0tZGVzY3JpcHRpb25cIixcbiAgICAgICAgfSk7XG4gICAgICAgIG5vUHJvamVjdEdyb3VwLmNyZWF0ZUVsKFwicFwiLCB7XG4gICAgICAgICAgdGV4dDogXCJcdTMwRDdcdTMwRURcdTMwQjhcdTMwQTdcdTMwQUZcdTMwQzhcdTMwRDVcdTMwQTFcdTMwQTRcdTMwRUJcdTMwNkIgI3Byb2plY3QgXHUzMEJGXHUzMEIwXHUzMDkyXHU4RkZEXHU1MkEwXHUzMDU3XHUzMDY2XHUzMDRGXHUzMDYwXHUzMDU1XHUzMDQ0XHUzMDAyXCIsXG4gICAgICAgICAgY2xzOiBcImZvcm0tZGVzY3JpcHRpb25cIixcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBQcm9qZWN0IHNlbGVjdGlvblxuICAgICAgICBjb25zdCBwcm9qZWN0R3JvdXAgPSBmb3JtLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcImZvcm0tZ3JvdXBcIiB9KTtcbiAgICAgICAgcHJvamVjdEdyb3VwLmNyZWF0ZUVsKFwibGFiZWxcIiwge1xuICAgICAgICAgIHRleHQ6IFwiXHUzMEQ3XHUzMEVEXHUzMEI4XHUzMEE3XHUzMEFGXHUzMEM4XHUzMDkyXHU5MDc4XHU2MjlFOlwiLFxuICAgICAgICAgIGNsczogXCJmb3JtLWxhYmVsXCIsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBwcm9qZWN0U2VsZWN0ID0gcHJvamVjdEdyb3VwLmNyZWF0ZUVsKFwic2VsZWN0XCIsIHtcbiAgICAgICAgICBjbHM6IFwiZm9ybS1pbnB1dFwiLFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCBcIlJlbW92ZSBwcm9qZWN0XCIgb3B0aW9uIGlmIHByb2plY3QgaXMgYWxyZWFkeSBzZXRcbiAgICAgICAgaWYgKGluc3QudGFzay5wcm9qZWN0UGF0aCkge1xuICAgICAgICAgIGNvbnN0IHJlbW92ZVByb2plY3RPcHRpb24gPSBwcm9qZWN0U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHtcbiAgICAgICAgICAgIHZhbHVlOiBcIlwiLFxuICAgICAgICAgICAgdGV4dDogXCJcdTI3OTYgXHUzMEQ3XHUzMEVEXHUzMEI4XHUzMEE3XHUzMEFGXHUzMEM4XHUzMDkyXHU1OTE2XHUzMDU5XCIsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gQWRkIGVtcHR5IG9wdGlvbiBpZiBubyBwcm9qZWN0IGlzIHNldFxuICAgICAgICAgIGNvbnN0IGVtcHR5T3B0aW9uID0gcHJvamVjdFNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7XG4gICAgICAgICAgICB2YWx1ZTogXCJcIixcbiAgICAgICAgICAgIHRleHQ6IFwiXCIsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZW1wdHlPcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgcHJvamVjdCBsaXN0XG4gICAgICAgIHByb2plY3RGaWxlcy5mb3JFYWNoKChwcm9qZWN0KSA9PiB7XG4gICAgICAgICAgY29uc3Qgb3B0aW9uID0gcHJvamVjdFNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7XG4gICAgICAgICAgICB2YWx1ZTogcHJvamVjdC5wYXRoLFxuICAgICAgICAgICAgdGV4dDogcHJvamVjdC5iYXNlbmFtZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvLyBTZWxlY3QgY3VycmVudCBwcm9qZWN0IGlmIHNldFxuICAgICAgICAgIGlmIChpbnN0LnRhc2sucHJvamVjdFBhdGggPT09IHByb2plY3QucGF0aCkge1xuICAgICAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gRGVzY3JpcHRpb25cbiAgICAgICAgY29uc3QgZGVzY0dyb3VwID0gZm9ybS5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJmb3JtLWdyb3VwXCIgfSk7XG4gICAgICAgIGlmIChpbnN0LnRhc2sucHJvamVjdFBhdGgpIHtcbiAgICAgICAgICBkZXNjR3JvdXAuY3JlYXRlRWwoXCJwXCIsIHtcbiAgICAgICAgICAgIHRleHQ6IFwiXHU1MjI1XHUzMDZFXHUzMEQ3XHUzMEVEXHUzMEI4XHUzMEE3XHUzMEFGXHUzMEM4XHUzMDkyXHU5MDc4XHU2MjlFXHUzMDU5XHUzMDhCXHUzMDRCXHUzMDAxXHUzMDBDXHUzMEQ3XHUzMEVEXHUzMEI4XHUzMEE3XHUzMEFGXHUzMEM4XHUzMDkyXHU1OTE2XHUzMDU5XHUzMDBEXHUzMDkyXHU5MDc4XHU2MjlFXHUzMDU3XHUzMDY2XHUzMEQ3XHUzMEVEXHUzMEI4XHUzMEE3XHUzMEFGXHUzMEM4XHUzMDkyXHU4OUUzXHU5NjY0XHUzMDY3XHUzMDREXHUzMDdFXHUzMDU5XHUzMDAyXCIsXG4gICAgICAgICAgICBjbHM6IFwiZm9ybS1kZXNjcmlwdGlvblwiLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlc2NHcm91cC5jcmVhdGVFbChcInBcIiwge1xuICAgICAgICAgICAgdGV4dDogXCJcdTMwQkZcdTMwQjlcdTMwQUZcdTMwNkJcdTMwRDdcdTMwRURcdTMwQjhcdTMwQTdcdTMwQUZcdTMwQzhcdTMwOTJcdThBMkRcdTVCOUFcdTMwNTlcdTMwOEJcdTMwNjhcdTMwMDFcdTMwRDdcdTMwRURcdTMwQjhcdTMwQTdcdTMwQUZcdTMwQzhcdTMwREFcdTMwRkNcdTMwQjhcdTMwNEJcdTMwODlcdTk1QTJcdTkwMjNcdTMwQkZcdTMwQjlcdTMwQUZcdTMwOTJcdTc4QkFcdThBOERcdTMwNjdcdTMwNERcdTMwN0VcdTMwNTlcdTMwMDJcIixcbiAgICAgICAgICAgIGNsczogXCJmb3JtLWRlc2NyaXB0aW9uXCIsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEJ1dHRvbnNcbiAgICAgICAgY29uc3QgYnV0dG9uR3JvdXAgPSBmb3JtLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcImZvcm0tYnV0dG9uLWdyb3VwXCIgfSk7XG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkdyb3VwLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcbiAgICAgICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgICAgIGNsczogXCJmb3JtLWJ1dHRvbiBjYW5jZWxcIixcbiAgICAgICAgICB0ZXh0OiBcIlx1MzBBRFx1MzBFM1x1MzBGM1x1MzBCQlx1MzBFQlwiLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IGJ1dHRvbkdyb3VwLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcbiAgICAgICAgICB0eXBlOiBcInN1Ym1pdFwiLFxuICAgICAgICAgIGNsczogXCJmb3JtLWJ1dHRvbiBjcmVhdGVcIixcbiAgICAgICAgICB0ZXh0OiBcIlx1NEZERFx1NUI1OFwiLFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEV2ZW50IGxpc3RlbmVyc1xuICAgICAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgYXN5bmMgKGUpID0+IHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgY29uc3Qgc2VsZWN0ZWRQcm9qZWN0ID0gcHJvamVjdFNlbGVjdC52YWx1ZTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnNldFByb2plY3RGb3JUYXNrKGluc3QudGFzaywgc2VsZWN0ZWRQcm9qZWN0KTtcbiAgICAgICAgICB0aGlzLnVwZGF0ZVByb2plY3REaXNwbGF5KGluc3QpO1xuICAgICAgICAgIG1vZGFsLnJlbW92ZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgIG1vZGFsLnJlbW92ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgbW9kYWwucmVtb3ZlKCk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gU2hvdyBtb2RhbFxuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtb2RhbCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gc2hvdyBwcm9qZWN0IG1vZGFsOlwiLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKFwiXHUzMEQ3XHUzMEVEXHUzMEI4XHUzMEE3XHUzMEFGXHUzMEM4XHU5MDc4XHU2MjlFXHU3NTNCXHU5NzYyXHUzMDZFXHU4ODY4XHU3OTNBXHUzMDZCXHU1OTMxXHU2NTU3XHUzMDU3XHUzMDdFXHUzMDU3XHUzMDVGXCIpO1xuICAgIH1cbiAgfVxuICBcbiAgcHJpdmF0ZSBhc3luYyBnZXRQcm9qZWN0RmlsZXMoKTogUHJvbWlzZTxURmlsZVtdPiB7XG4gICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgY29uc3QgcHJvamVjdEZpbGVzOiBURmlsZVtdID0gW107XG4gICAgY29uc3QgcHJvamVjdEZvbGRlclBhdGggPSB0aGlzLnBsdWdpbi5wYXRoTWFuYWdlci5nZXRQcm9qZWN0Rm9sZGVyUGF0aCgpO1xuICAgIFxuICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgLy8gR2V0IGZpbGVzIHRoYXQgc3RhcnQgd2l0aCBcIlByb2plY3QgLSBcIiBpbiB0aGUgcHJvamVjdCBmb2xkZXJcbiAgICAgIGlmIChcbiAgICAgICAgZmlsZS5wYXRoLnN0YXJ0c1dpdGgocHJvamVjdEZvbGRlclBhdGggKyBcIi9cIikgJiZcbiAgICAgICAgZmlsZS5iYXNlbmFtZS5zdGFydHNXaXRoKFwiUHJvamVjdCAtIFwiKVxuICAgICAgKSB7XG4gICAgICAgIHByb2plY3RGaWxlcy5wdXNoKGZpbGUpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gRm9yIGNvbXBhdGliaWxpdHksIGFsc28gc2VhcmNoIGZvciBmaWxlcyBzdGFydGluZyB3aXRoIFwiUHJvamVjdCAtIFwiIGluIG90aGVyIGZvbGRlcnNcbiAgICAgIGlmIChmaWxlLmJhc2VuYW1lLnN0YXJ0c1dpdGgoXCJQcm9qZWN0IC0gXCIpKSB7XG4gICAgICAgIHByb2plY3RGaWxlcy5wdXNoKGZpbGUpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQWxzbyBjaGVjayBmb3IgI3Byb2plY3QgdGFnXG4gICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgIGlmIChjb250ZW50LmluY2x1ZGVzKFwiI3Byb2plY3RcIikpIHtcbiAgICAgICAgcHJvamVjdEZpbGVzLnB1c2goZmlsZSk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBwcm9qZWN0RmlsZXM7XG4gIH1cbiAgXG4gIHByaXZhdGUgYXN5bmMgc2V0UHJvamVjdEZvclRhc2sodGFzazogYW55LCBwcm9qZWN0UGF0aDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghdGFzay5maWxlIHx8ICEodGFzay5maWxlIGluc3RhbmNlb2YgVEZpbGUpKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJcdTMwQkZcdTMwQjlcdTMwQUZcdTMwRDVcdTMwQTFcdTMwQTRcdTMwRUJcdTMwNENcdTg5OEJcdTMwNjRcdTMwNEJcdTMwOEFcdTMwN0VcdTMwNUJcdTMwOTNcIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIG1ldGFkYXRhXG4gICAgICBhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci5wcm9jZXNzRnJvbnRNYXR0ZXIoXG4gICAgICAgIHRhc2suZmlsZSxcbiAgICAgICAgKGZyb250bWF0dGVyKSA9PiB7XG4gICAgICAgICAgaWYgKHByb2plY3RQYXRoKSB7XG4gICAgICAgICAgICAvLyBJZiBwcm9qZWN0IGlzIHNlbGVjdGVkXG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0RmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwcm9qZWN0UGF0aCk7XG4gICAgICAgICAgICBpZiAocHJvamVjdEZpbGUpIHtcbiAgICAgICAgICAgICAgLy8gU2F2ZSBhcyBwbGFpbiB0ZXh0IGluc3RlYWQgb2YgbGluayBmb3JtYXQgdG8gbWF0Y2ggZXhpc3RpbmcgZm9ybWF0XG4gICAgICAgICAgICAgIGZyb250bWF0dGVyLnByb2plY3QgPSBwcm9qZWN0RmlsZS5iYXNlbmFtZTtcbiAgICAgICAgICAgICAgLy8gQWxzbyBzYXZlIHRoZSBwYXRoIGZvciBmYXN0ZXIgbG9va3VwXG4gICAgICAgICAgICAgIGZyb250bWF0dGVyLnByb2plY3RfcGF0aCA9IHByb2plY3RQYXRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBJZiBubyBwcm9qZWN0IGlzIHNlbGVjdGVkXG4gICAgICAgICAgICBkZWxldGUgZnJvbnRtYXR0ZXIucHJvamVjdDtcbiAgICAgICAgICAgIGRlbGV0ZSBmcm9udG1hdHRlci5wcm9qZWN0X3BhdGg7IC8vIEZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBmcm9udG1hdHRlcjtcbiAgICAgICAgfSxcbiAgICAgICk7XG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSB0YXNrIG9iamVjdFxuICAgICAgaWYgKHByb2plY3RQYXRoKSB7XG4gICAgICAgIGNvbnN0IHByb2plY3RGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHByb2plY3RQYXRoKTtcbiAgICAgICAgaWYgKHByb2plY3RGaWxlKSB7XG4gICAgICAgICAgdGFzay5wcm9qZWN0UGF0aCA9IHByb2plY3RQYXRoO1xuICAgICAgICAgIHRhc2sucHJvamVjdFRpdGxlID0gcHJvamVjdEZpbGUuYmFzZW5hbWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhc2sucHJvamVjdFBhdGggPSBudWxsO1xuICAgICAgICB0YXNrLnByb2plY3RUaXRsZSA9IG51bGw7XG4gICAgICB9XG4gICAgICBcbiAgICAgIG5ldyBOb3RpY2UoYFx1MzBEN1x1MzBFRFx1MzBCOFx1MzBBN1x1MzBBRlx1MzBDOFx1OEEyRFx1NUI5QVx1MzA5Mlx1NEZERFx1NUI1OFx1MzA1N1x1MzA3RVx1MzA1N1x1MzA1RmApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIHNldCBwcm9qZWN0OlwiLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKFwiXHUzMEQ3XHUzMEVEXHUzMEI4XHUzMEE3XHUzMEFGXHUzMEM4XHU4QTJEXHU1QjlBXHUzMDZCXHU1OTMxXHU2NTU3XHUzMDU3XHUzMDdFXHUzMDU3XHUzMDVGXCIpO1xuICAgIH1cbiAgfVxuICBcbiAgcHJpdmF0ZSB1cGRhdGVQcm9qZWN0RGlzcGxheShpbnN0OiBUYXNrSW5zdGFuY2UpOiB2b2lkIHtcbiAgICAvLyBGaW5kIHRoZSB0YXNrIGl0ZW1cbiAgICBjb25zdCB0YXNrSXRlbSA9IHRoaXMudGFza0xpc3Q/LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgW2RhdGEtdGFzay1wYXRoPVwiJHtpbnN0LnRhc2sucGF0aH1cIl1gLFxuICAgICkgYXMgSFRNTEVsZW1lbnQ7XG4gICAgXG4gICAgaWYgKHRhc2tJdGVtKSB7XG4gICAgICBjb25zdCBwcm9qZWN0RGlzcGxheSA9IHRhc2tJdGVtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgIFwiLnRhc2tjaHV0ZS1wcm9qZWN0LWRpc3BsYXlcIixcbiAgICAgICkgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBcbiAgICAgIGlmIChwcm9qZWN0RGlzcGxheSkge1xuICAgICAgICAvLyBDbGVhciBleGlzdGluZyBkaXNwbGF5XG4gICAgICAgIHByb2plY3REaXNwbGF5LmVtcHR5KCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoaW5zdC50YXNrLnByb2plY3RQYXRoICYmIGluc3QudGFzay5wcm9qZWN0VGl0bGUpIHtcbiAgICAgICAgICAvLyBJZiBwcm9qZWN0IGlzIHNldFxuICAgICAgICAgIGNvbnN0IHByb2plY3RCdXR0b24gPSBwcm9qZWN0RGlzcGxheS5jcmVhdGVFbChcInNwYW5cIiwge1xuICAgICAgICAgICAgY2xzOiBcInRhc2tjaHV0ZS1wcm9qZWN0LWJ1dHRvblwiLFxuICAgICAgICAgICAgYXR0cjoge1xuICAgICAgICAgICAgICB0aXRsZTogYFx1MzBEN1x1MzBFRFx1MzBCOFx1MzBBN1x1MzBBRlx1MzBDODogJHtpbnN0LnRhc2sucHJvamVjdFRpdGxlfWAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IGZvbGRlckljb24gPSBwcm9qZWN0QnV0dG9uLmNyZWF0ZUVsKFwic3BhblwiLCB7XG4gICAgICAgICAgICBjbHM6IFwidGFza2NodXRlLXByb2plY3QtaWNvblwiLFxuICAgICAgICAgICAgdGV4dDogXCJcdUQ4M0RcdURDQzFcIixcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBwcm9qZWN0TmFtZSA9IHByb2plY3RCdXR0b24uY3JlYXRlRWwoXCJzcGFuXCIsIHtcbiAgICAgICAgICAgIGNsczogXCJ0YXNrY2h1dGUtcHJvamVjdC1uYW1lXCIsXG4gICAgICAgICAgICB0ZXh0OiBpbnN0LnRhc2sucHJvamVjdFRpdGxlLnJlcGxhY2UoL15Qcm9qZWN0XFxzKi1cXHMqLywgXCJcIiksXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgcHJvamVjdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNob3dVbmlmaWVkUHJvamVjdE1vZGFsKGluc3QpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IGV4dGVybmFsTGlua0ljb24gPSBwcm9qZWN0RGlzcGxheS5jcmVhdGVFbChcInNwYW5cIiwge1xuICAgICAgICAgICAgY2xzOiBcInRhc2tjaHV0ZS1leHRlcm5hbC1saW5rXCIsXG4gICAgICAgICAgICB0ZXh0OiBcIlx1RDgzRFx1REQxN1wiLFxuICAgICAgICAgICAgYXR0cjogeyB0aXRsZTogXCJcdTMwRDdcdTMwRURcdTMwQjhcdTMwQTdcdTMwQUZcdTMwQzhcdTMwQ0VcdTMwRkNcdTMwQzhcdTMwOTJcdTk1OEJcdTMwNEZcIiB9LFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIGV4dGVybmFsTGlua0ljb24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5vcGVuUHJvamVjdEluU3BsaXQoaW5zdC50YXNrLnByb2plY3RQYXRoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBJZiBwcm9qZWN0IGlzIG5vdCBzZXRcbiAgICAgICAgICBjb25zdCBwcm9qZWN0UGxhY2Vob2xkZXIgPSBwcm9qZWN0RGlzcGxheS5jcmVhdGVFbChcInNwYW5cIiwge1xuICAgICAgICAgICAgY2xzOiBcInRhc2tjaHV0ZS1wcm9qZWN0LXBsYWNlaG9sZGVyXCIsXG4gICAgICAgICAgICBhdHRyOiB7IHRpdGxlOiBcIlx1MzBBRlx1MzBFQVx1MzBDM1x1MzBBRlx1MzA1N1x1MzA2Nlx1MzBEN1x1MzBFRFx1MzBCOFx1MzBBN1x1MzBBRlx1MzBDOFx1MzA5Mlx1OEEyRFx1NUI5QVwiIH0sXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgcHJvamVjdFBsYWNlaG9sZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoZSkgPT4ge1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2hvd1Byb2plY3RNb2RhbChpbnN0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBcbiAgcHJpdmF0ZSBhc3luYyBvcGVuUHJvamVjdEluU3BsaXQocHJvamVjdFBhdGg6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHByb2plY3RQYXRoKTtcbiAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgY29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCdzcGxpdCcpO1xuICAgICAgICBhd2FpdCBsZWFmLm9wZW5GaWxlKGZpbGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZShgXHUzMEQ3XHUzMEVEXHUzMEI4XHUzMEE3XHUzMEFGXHUzMEM4XHUzMEQ1XHUzMEExXHUzMEE0XHUzMEVCXHUzMDRDXHU4OThCXHUzMDY0XHUzMDRCXHUzMDhBXHUzMDdFXHUzMDVCXHUzMDkzOiAke3Byb2plY3RQYXRofWApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIG9wZW4gcHJvamVjdDpcIiwgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZShcIlx1MzBEN1x1MzBFRFx1MzBCOFx1MzBBN1x1MzBBRlx1MzBDOFx1MzBENVx1MzBBMVx1MzBBNFx1MzBFQlx1MzA5Mlx1OTU4Qlx1MzA1MVx1MzA3RVx1MzA1Qlx1MzA5M1x1MzA2N1x1MzA1N1x1MzA1RlwiKTtcbiAgICB9XG4gIH1cbiAgXG4gIHByaXZhdGUgYXN5bmMgaGFzRXhlY3V0aW9uSGlzdG9yeSh0YXNrUGF0aDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgLy8gXHU1QjlGXHU4ODRDXHU1QzY1XHU2Qjc0XHUzMDZFXHU3OEJBXHU4QThEXG4gICAgcmV0dXJuIGZhbHNlOyAvLyBcdTRFRUVcdTVCOUZcdTg4QzVcbiAgfVxuICBcblxuICBwcml2YXRlIGFzeW5jIGhhbmRsZUZpbGVSZW5hbWUoZmlsZTogVEZpbGUsIG9sZFBhdGg6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIEhhbmRsZSBmaWxlIHJlbmFtZSBsb2dpY1xuICAgIGNvbnNvbGUubG9nKFwiRmlsZSByZW5hbWVkOlwiLCBvbGRQYXRoLCBcIi0+XCIsIGZpbGUucGF0aCk7XG4gIH1cblxuICBwcml2YXRlIG1vdmVJbnN0YW5jZVRvU2xvdChmcm9tU2xvdDogc3RyaW5nLCBmcm9tSWR4OiBudW1iZXIsIHRvU2xvdDogc3RyaW5nLCB0b0lkeDogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gSGFuZGxlIG1vdmluZyB0YXNrIGluc3RhbmNlcyBiZXR3ZWVuIHNsb3RzXG4gICAgY29uc29sZS5sb2coYE1vdmluZyB0YXNrIGZyb20gJHtmcm9tU2xvdH06JHtmcm9tSWR4fSB0byAke3RvU2xvdH06JHt0b0lkeH1gKTtcbiAgfVxuXG4gIC8vIFN0YXRlIG1hbmFnZW1lbnQgbWV0aG9kcyBmb3IgZGVsZXRpb24vaGlkaW5nXG4gIHByaXZhdGUgZ2V0RGVsZXRlZEluc3RhbmNlcyhkYXRlU3RyOiBzdHJpbmcpOiBEZWxldGVkSW5zdGFuY2VbXSB7XG4gICAgY29uc3Qga2V5ID0gYHRhc2tjaHV0ZS1kZWxldGVkLWluc3RhbmNlcy0ke2RhdGVTdHJ9YDtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZGF0YSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG4gICAgICBpZiAoIWRhdGEpIHJldHVybiBbXTtcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKGRhdGEpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNhdmVEZWxldGVkSW5zdGFuY2VzKGRhdGVTdHI6IHN0cmluZywgaW5zdGFuY2VzOiBEZWxldGVkSW5zdGFuY2VbXSk6IHZvaWQge1xuICAgIGNvbnN0IGtleSA9IGB0YXNrY2h1dGUtZGVsZXRlZC1pbnN0YW5jZXMtJHtkYXRlU3RyfWA7XG4gICAgdHJ5IHtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkoaW5zdGFuY2VzKSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBzYXZlIGRlbGV0ZWQgaW5zdGFuY2VzOlwiLCBlKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldEhpZGRlblJvdXRpbmVzKGRhdGVTdHI6IHN0cmluZyk6IEhpZGRlblJvdXRpbmVbXSB7XG4gICAgY29uc3Qga2V5ID0gYHRhc2tjaHV0ZS1oaWRkZW4tcm91dGluZXMtJHtkYXRlU3RyfWA7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xuICAgICAgaWYgKCFkYXRhKSByZXR1cm4gW107XG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShkYXRhKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzYXZlSGlkZGVuUm91dGluZXMoZGF0ZVN0cjogc3RyaW5nLCByb3V0aW5lczogSGlkZGVuUm91dGluZVtdKTogdm9pZCB7XG4gICAgY29uc3Qga2V5ID0gYHRhc2tjaHV0ZS1oaWRkZW4tcm91dGluZXMtJHtkYXRlU3RyfWA7XG4gICAgdHJ5IHtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkocm91dGluZXMpKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIHNhdmUgaGlkZGVuIHJvdXRpbmVzOlwiLCBlKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGlzSW5zdGFuY2VEZWxldGVkKGluc3RhbmNlSWQ6IHN0cmluZywgdGFza1BhdGg6IHN0cmluZywgZGF0ZVN0cjogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgZGVsZXRlZEluc3RhbmNlcyA9IHRoaXMuZ2V0RGVsZXRlZEluc3RhbmNlcyhkYXRlU3RyKTtcbiAgICByZXR1cm4gZGVsZXRlZEluc3RhbmNlcy5zb21lKChkZWwpID0+IHtcbiAgICAgIGlmIChpbnN0YW5jZUlkICYmIGRlbC5pbnN0YW5jZUlkID09PSBpbnN0YW5jZUlkKSByZXR1cm4gdHJ1ZTtcbiAgICAgIGlmIChkZWwuZGVsZXRpb25UeXBlID09PSBcInBlcm1hbmVudFwiICYmIGRlbC5wYXRoID09PSB0YXNrUGF0aCkgcmV0dXJuIHRydWU7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGlzSW5zdGFuY2VIaWRkZW4oaW5zdGFuY2VJZDogc3RyaW5nLCB0YXNrUGF0aDogc3RyaW5nLCBkYXRlU3RyOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBoaWRkZW5Sb3V0aW5lcyA9IHRoaXMuZ2V0SGlkZGVuUm91dGluZXMoZGF0ZVN0cik7XG4gICAgcmV0dXJuIGhpZGRlblJvdXRpbmVzLnNvbWUoKGhpZGRlbikgPT4ge1xuICAgICAgaWYgKGhpZGRlbi5pbnN0YW5jZUlkICYmIGhpZGRlbi5pbnN0YW5jZUlkID09PSBpbnN0YW5jZUlkKSByZXR1cm4gdHJ1ZTtcbiAgICAgIGlmIChoaWRkZW4uaW5zdGFuY2VJZCA9PT0gbnVsbCAmJiBoaWRkZW4ucGF0aCAmJiBoaWRkZW4ucGF0aCA9PT0gdGFza1BhdGgpIHJldHVybiB0cnVlO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuICB9XG59IiwgIi8vIENvbXBsZXRlIENTUyBzdHlsZXMgZnJvbSBvcmlnaW5hbCBpbXBsZW1lbnRhdGlvblxuZXhwb3J0IGNvbnN0IFRBU0tDSFVURV9GVUxMX0NTUyA9IGBcbi50YXNrY2h1dGUtY29udGFpbmVyIHtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgbWluLWhlaWdodDogMDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG59XG5cbi8qIExvZyBNb2RhbCBTdHlsZXMgKi9cbi50YXNrY2h1dGUtbG9nLW1vZGFsLW92ZXJsYXkge1xuICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICB0b3A6IDA7XG4gICAgbGVmdDogMDtcbiAgICByaWdodDogMDtcbiAgICBib3R0b206IDA7XG4gICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjcpO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICB6LWluZGV4OiAxMDAwO1xufVxuXG4udGFza2NodXRlLWxvZy1tb2RhbC1jb250ZW50IHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICB3aWR0aDogOTAlO1xuICAgIG1heC13aWR0aDogMTIwMHB4O1xuICAgIGhlaWdodDogODAlO1xuICAgIG1heC1oZWlnaHQ6IDgwMHB4O1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbn1cblxuLmxvZy1tb2RhbC1jbG9zZSB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMTBweDtcbiAgICByaWdodDogMTBweDtcbiAgICBiYWNrZ3JvdW5kOiBub25lO1xuICAgIGJvcmRlcjogbm9uZTtcbiAgICBmb250LXNpemU6IDI0cHg7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICB3aWR0aDogMzBweDtcbiAgICBoZWlnaHQ6IDMwcHg7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbn1cblxuLmxvZy1tb2RhbC1jbG9zZTpob3ZlciB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbn1cblxuLnRhc2tjaHV0ZS1sb2ctaGVhZGVyIHtcbiAgICBwYWRkaW5nOiAyMHB4O1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbn1cblxuLmxvZy10aXRsZSB7XG4gICAgbWFyZ2luOiAwO1xuICAgIGZvbnQtc2l6ZTogMjRweDtcbn1cblxuLmxvZy1jb250cm9scyB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBnYXA6IDEwcHg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbn1cblxuLnllYXItc2VsZWN0b3Ige1xuICAgIHBhZGRpbmc6IDVweCAxMHB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgZm9udC1zaXplOiAxNHB4O1xufVxuXG4ucmVmcmVzaC1idXR0b24ge1xuICAgIHBhZGRpbmc6IDVweCAxMnB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgZm9udC1zaXplOiAxNHB4O1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlO1xufVxuXG4ucmVmcmVzaC1idXR0b246aG92ZXIge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tdGV4dC1hY2NlbnQpO1xufVxuXG4uaGVhdG1hcC1jb250YWluZXIge1xuICAgIGZsZXg6IDE7XG4gICAgcGFkZGluZzogMjBweDtcbiAgICBvdmVyZmxvdzogYXV0bztcbn1cblxuLmhlYXRtYXAtZ3JpZCB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIGhlaWdodDogMTAwJTtcbn1cblxuLmhlYXRtYXAtcGxhY2Vob2xkZXIge1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICBmb250LXNpemU6IDE2cHg7XG59XG5cbi8qIEhlYXRtYXAgR3JpZCBTdHlsZXMgKi9cbi5oZWF0bWFwLWdyaWQtY29udGFpbmVyIHtcbiAgICBwYWRkaW5nOiAyMHB4O1xufVxuXG4uaGVhdG1hcC1tb250aHMge1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICBoZWlnaHQ6IDIwcHg7XG4gICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgIG1hcmdpbi1sZWZ0OiA0M3B4O1xufVxuXG4ubW9udGgtbGFiZWwge1xuICAgIGZvbnQtc2l6ZTogMTBweDtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMDtcbiAgICB0ZXh0LWFsaWduOiBsZWZ0O1xufVxuXG4uaGVhdG1hcC13ZWVrZGF5cy1jb250YWluZXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZ2FwOiAxMHB4O1xufVxuXG4uaGVhdG1hcC13ZWVrZGF5cyB7XG4gICAgZGlzcGxheTogZ3JpZDtcbiAgICBncmlkLXRlbXBsYXRlLXJvd3M6IHJlcGVhdCg3LCAxZnIpO1xuICAgIGdhcDogMnB4O1xuICAgIHdpZHRoOiAyMHB4O1xufVxuXG4ud2Vla2RheS1sYWJlbCB7XG4gICAgZm9udC1zaXplOiAxMHB4O1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICBoZWlnaHQ6IDExcHg7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XG4gICAgcGFkZGluZy1yaWdodDogNHB4O1xufVxuXG4uaGVhdG1hcC1ncmlkIHtcbiAgICBkaXNwbGF5OiBncmlkO1xuICAgIGdyaWQtdGVtcGxhdGUtcm93czogcmVwZWF0KDcsIDExcHgpO1xuICAgIGdhcDogMnB4O1xuICAgIGdyaWQtYXV0by1mbG93OiBjb2x1bW47XG4gICAgd2lkdGg6IGZpdC1jb250ZW50O1xufVxuXG4uaGVhdG1hcC1jZWxsIHtcbiAgICB3aWR0aDogMTFweDtcbiAgICBoZWlnaHQ6IDExcHg7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgIGJvcmRlci1yYWRpdXM6IDJweDtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuXG4uaGVhdG1hcC1jZWxsLmVtcHR5IHtcbiAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICBjdXJzb3I6IGRlZmF1bHQ7XG59XG5cbi5oZWF0bWFwLWNlbGxbZGF0YS1sZXZlbD1cIjBcIl0ge1xuICAgIGJhY2tncm91bmQ6ICNlYmVkZjA7XG59XG5cbi5oZWF0bWFwLWNlbGxbZGF0YS1sZXZlbD1cIjFcIl0ge1xuICAgIGJhY2tncm91bmQ6ICNERUY5NUQ7XG59XG5cbi5oZWF0bWFwLWNlbGxbZGF0YS1sZXZlbD1cIjJcIl0ge1xuICAgIGJhY2tncm91bmQ6ICNCNUVFNEY7XG59XG5cbi5oZWF0bWFwLWNlbGxbZGF0YS1sZXZlbD1cIjNcIl0ge1xuICAgIGJhY2tncm91bmQ6ICM4MkQ1MjM7XG59XG5cbi5oZWF0bWFwLWNlbGxbZGF0YS1sZXZlbD1cIjRcIl0ge1xuICAgIGJhY2tncm91bmQ6ICM1NEE5MjM7XG59XG5cbkBrZXlmcmFtZXMgcHVsc2Uge1xuICAgIDAlIHtcbiAgICAgICAgYm94LXNoYWRvdzogMCAwIDAgMCByZ2JhKDExOCwgNzUsIDE2MiwgMC43KTtcbiAgICB9XG4gICAgNzAlIHtcbiAgICAgICAgYm94LXNoYWRvdzogMCAwIDAgMTBweCByZ2JhKDExOCwgNzUsIDE2MiwgMCk7XG4gICAgfVxuICAgIDEwMCUge1xuICAgICAgICBib3gtc2hhZG93OiAwIDAgMCAwIHJnYmEoMTE4LCA3NSwgMTYyLCAwKTtcbiAgICB9XG59XG5cbi5oZWF0bWFwLWNlbGw6aG92ZXIge1xuICAgIG91dGxpbmU6IDFweCBzb2xpZCB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgb3V0bGluZS1vZmZzZXQ6IC0xcHg7XG59XG5cbi5oZWF0bWFwLWNlbGwubW9udGgtc3RhcnQge1xuICAgIG1hcmdpbi1sZWZ0OiA0cHg7XG59XG5cbi5oZWF0bWFwLWxlZ2VuZCB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGdhcDogNXB4O1xuICAgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAgbWFyZ2luLWxlZnQ6IDMwcHg7XG4gICAgZm9udC1zaXplOiAxMnB4O1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbn1cblxuLmxlZ2VuZC1zY2FsZSB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBnYXA6IDJweDtcbn1cblxuLmxlZ2VuZC1jZWxsIHtcbiAgICB3aWR0aDogMTFweDtcbiAgICBoZWlnaHQ6IDExcHg7XG4gICAgYm9yZGVyLXJhZGl1czogMnB4O1xufVxuXG4vKiBMb2FkaW5nIHN0eWxlcyAqL1xuLmhlYXRtYXAtbG9hZGluZyB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIHBhZGRpbmc6IDYwcHggMjBweDtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgZm9udC1zaXplOiAxNHB4O1xufVxuXG4vKiBFcnJvciBzdHlsZXMgKi9cbi5oZWF0bWFwLWVycm9yIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgcGFkZGluZzogMjBweDtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1lcnJvcik7XG4gICAgZm9udC1zaXplOiAxNHB4O1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItZXJyb3IpO1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xufVxuXG4ubGVnZW5kLWNlbGxbZGF0YS1sZXZlbD1cIjBcIl0ge1xuICAgIGJhY2tncm91bmQ6ICNlYmVkZjA7XG59XG5cbi5sZWdlbmQtY2VsbFtkYXRhLWxldmVsPVwiMVwiXSB7XG4gICAgYmFja2dyb3VuZDogI0RFRjk1RDtcbn1cblxuLmxlZ2VuZC1jZWxsW2RhdGEtbGV2ZWw9XCIyXCJdIHtcbiAgICBiYWNrZ3JvdW5kOiAjQjVFRTRGO1xufVxuXG4ubGVnZW5kLWNlbGxbZGF0YS1sZXZlbD1cIjNcIl0ge1xuICAgIGJhY2tncm91bmQ6ICM4MkQ1MjM7XG59XG5cbi5sZWdlbmQtY2VsbFtkYXRhLWxldmVsPVwiNFwiXSB7XG4gICAgYmFja2dyb3VuZDogIzU0QTkyMztcbn1cblxuLyogSGVhdG1hcCBUb29sdGlwICovXG4uaGVhdG1hcC10b29sdGlwIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICBwYWRkaW5nOiA4cHg7XG4gICAgZm9udC1zaXplOiAxMnB4O1xuICAgIHdoaXRlLXNwYWNlOiBwcmUtbGluZTtcbiAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjE1KTtcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbn1cblxuLyogVEFTSy0wMTI6IFx1MzBCRlx1MzBCOVx1MzBBRlx1NTQwRFx1ODFFQVx1NTJENVx1ODhEQ1x1NUI4Q1x1MzA2RVx1MzBCOVx1MzBCRlx1MzBBNFx1MzBFQiAqL1xuLnRhc2stbmFtZS1zdWdnZXN0aW9ucyB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHotaW5kZXg6IDEwMDA7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIG1heC1oZWlnaHQ6IDIwMHB4O1xuICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgYm94LXNoYWRvdzogMCAycHggOHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgICBtYXJnaW4tdG9wOiAycHg7XG59XG5cbi5zdWdnZXN0aW9uLWl0ZW0ge1xuICAgIHBhZGRpbmc6IDhweCAxMnB4O1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMXM7XG4gICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xufVxuXG4uc3VnZ2VzdGlvbi1pdGVtOmhvdmVyLFxuLnN1Z2dlc3Rpb24taXRlbS1zZWxlY3RlZCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG59XG5cbi5zdWdnZXN0aW9uLWl0ZW0tc2VsZWN0ZWQge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG59XG5cbi8qIE1haW4gQ29udGFpbmVyIExheW91dCAqL1xuLm1haW4tY29udGFpbmVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICBmbGV4OiAxO1xuICAgIG1pbi1oZWlnaHQ6IDA7XG59XG5cbi8qIFRvcCBCYXIgQ29udGFpbmVyICovXG4udG9wLWJhci1jb250YWluZXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBnYXA6IDEwcHg7XG4gICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICBoZWlnaHQ6IDMwcHg7IC8qIEZpeGVkIGhlaWdodCBtYXRjaGluZyBkYXRlIG5hdmlnYXRpb24gKi9cbn1cblxuLyogSGVhZGVyIERpdmlkZXIgKi9cbi5oZWFkZXItZGl2aWRlciB7XG4gICAgd2lkdGg6IDFweDtcbiAgICBoZWlnaHQ6IDIwcHg7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgIG1hcmdpbjogNXB4IDA7XG59XG5cbi8qIEhlYWRlciBBY3Rpb24gU2VjdGlvbiAqL1xuLmhlYWRlci1hY3Rpb24tc2VjdGlvbiB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGdhcDogOHB4O1xufVxuXG4vKiBEcmF3ZXIgVG9nZ2xlIEJ1dHRvbiAqL1xuLmRyYXdlci10b2dnbGUge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICBwYWRkaW5nOiAwIDEwcHg7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMnMgZWFzZTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xufVxuXG4uZHJhd2VyLXRvZ2dsZTpob3ZlciB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG59XG5cbi8qIE5hdmlnYXRpb24gT3ZlcmxheSAqL1xuLm5hdmlnYXRpb24tb3ZlcmxheSB7XG4gICAgcG9zaXRpb246IGZpeGVkO1xuICAgIHRvcDogMDtcbiAgICBsZWZ0OiAwO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMyk7XG4gICAgei1pbmRleDogOTk5O1xuICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC4zcyBlYXNlO1xufVxuXG4ubmF2aWdhdGlvbi1vdmVybGF5LWhpZGRlbiB7XG4gICAgb3BhY2l0eTogMDtcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbn1cblxuLm5hdmlnYXRpb24tb3ZlcmxheS12aXNpYmxlIHtcbiAgICBvcGFjaXR5OiAxO1xuICAgIHBvaW50ZXItZXZlbnRzOiBhdXRvO1xufVxuXG4vKiBOYXZpZ2F0aW9uIFBhbmVsICovXG4ubmF2aWdhdGlvbi1wYW5lbCB7XG4gICAgcG9zaXRpb246IGZpeGVkO1xuICAgIGxlZnQ6IDA7XG4gICAgdG9wOiAwO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICB3aWR0aDogMjUwcHg7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgYm94LXNoYWRvdzogMnB4IDAgMTBweCByZ2JhKDAsIDAsIDAsIDAuMSk7XG4gICAgei1pbmRleDogMTAwMDtcbiAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4zcyBlYXNlO1xuICAgIG92ZXJmbG93LXk6IGF1dG87XG59XG5cbi5uYXZpZ2F0aW9uLXBhbmVsLWhpZGRlbiB7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC0xMDAlKTtcbn1cblxuLm5hdmlnYXRpb24tcGFuZWwtdmlzaWJsZSB7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDApO1xufVxuXG4vKiBOYXZpZ2F0aW9uIEhlYWRlciAtIHJlbW92ZWQgY2xvc2UgYnV0dG9uICovXG4ubmF2aWdhdGlvbi1oZWFkZXIge1xuICAgIGRpc3BsYXk6IG5vbmU7XG59XG5cbi8qIE5hdmlnYXRpb24gSXRlbXMgKi9cbi5uYXZpZ2F0aW9uLW5hdiB7XG4gICAgcGFkZGluZzogMjBweCAwO1xufVxuXG4ubmF2aWdhdGlvbi1uYXYtaXRlbSB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIHBhZGRpbmc6IDEwcHggMTVweDtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjJzIGVhc2U7XG59XG5cbi5uYXZpZ2F0aW9uLW5hdi1pdGVtOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbn1cblxuLm5hdmlnYXRpb24tbmF2LWl0ZW0uYWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWFjdGl2ZSk7XG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcbn1cblxuLm5hdmlnYXRpb24tbmF2LWljb24ge1xuICAgIG1hcmdpbi1yaWdodDogMTBweDtcbiAgICBmb250LXNpemU6IDE2cHg7XG59XG5cbi5uYXZpZ2F0aW9uLW5hdi1sYWJlbCB7XG4gICAgZm9udC1zaXplOiAxM3B4O1xufVxuLnRhc2stbGlzdC1jb250YWluZXIge1xuICAgIGZsZXg6IDEgMSBhdXRvO1xuICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgb3ZlcmZsb3cteTogYXV0bztcbn1cblxuLmJ1dHRvbi1jb250YWluZXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZ2FwOiAxMHB4O1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIG1hcmdpbjogMTVweCAwO1xufVxuXG4udGFzay1idXR0b24ge1xuICAgIHBhZGRpbmc6IDhweCAxNnB4O1xuICAgIGJvcmRlcjogbm9uZTtcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgZm9udC1zaXplOiAxM3B4O1xuICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7XG4gICAgbWluLXdpZHRoOiA3MHB4O1xufVxuXG4udGFzay1idXR0b246ZGlzYWJsZWQge1xuICAgIG9wYWNpdHk6IDAuNTtcbiAgICBjdXJzb3I6IG5vdC1hbGxvd2VkO1xufVxuXG4udGFzay1idXR0b24uc3RhcnQge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbn1cblxuLnRhc2stYnV0dG9uLnN0YXJ0OmhvdmVyOm5vdCg6ZGlzYWJsZWQpIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQtaG92ZXIpO1xufVxuXG4udGFzay1idXR0b24uc3RvcCB7XG4gICAgYmFja2dyb3VuZDogI2U3NGMzYztcbiAgICBjb2xvcjogd2hpdGU7XG59XG5cbi50YXNrLWJ1dHRvbi5zdG9wOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiAjYzAzOTJiO1xufVxuXG4udGFzay1idXR0b24ucmVzZXQge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xufVxuXG4udGFzay1idXR0b24ucmVzZXQ6aG92ZXIge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyLWhvdmVyKTtcbn1cblxuLmZ1dHVyZS10YXNrLWJ1dHRvbiB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpICFpbXBvcnRhbnQ7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpICFpbXBvcnRhbnQ7XG4gICAgY3Vyc29yOiBub3QtYWxsb3dlZCAhaW1wb3J0YW50O1xufVxuXG5cbi50YXNrLWxpc3QtY29udGFpbmVyIHtcbiAgICBtYXJnaW4tdG9wOiAxMHB4O1xuICAgIGZsZXg6IDE7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIG1pbi1oZWlnaHQ6IDA7XG59XG5cbi50YXNrLWxpc3QtY29udGFpbmVyIGg1IHtcbiAgICBtYXJnaW46IDAgMCAxMHB4IDA7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xufVxuXG4udGFzay1saXN0IHtcbiAgICBmbGV4OiAxIDEgYXV0bztcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgbWluLWhlaWdodDogMDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgcGFkZGluZy1ib3R0b206IDUwcHg7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIG92ZXJmbG93OiBhdXRvO1xufVxuXG4udGFzay1pdGVtIHtcbiAgICBwYWRkaW5nOiA4cHggMTJweDtcbiAgICBjdXJzb3I6IGRlZmF1bHQ7XG4gICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMnMgZWFzZTtcbn1cblxuLnRhc2staXRlbTpsYXN0LWNoaWxkIHtcbiAgICBib3JkZXItYm90dG9tOiBub25lO1xufVxuXG4udGFzay1pdGVtOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG59XG5cbi50YXNrLWl0ZW0uc2VsZWN0ZWQge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbn1cblxuLnRhc2staXRlbS5rZXlib2FyZC1zZWxlY3RlZCB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xuICAgIGJveC1zaGFkb3c6IDAgMCAwIDJweCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQtaG92ZXIpO1xufVxuXG4udGFzay1pdGVtLmNvbXBsZXRlZCB7XG4gICAgY3Vyc29yOiBkZWZhdWx0O1xufVxuXG4vKiBcdTVCOENcdTRFODZcdTZFMDhcdTMwN0ZcdTMwQkZcdTMwQjlcdTMwQUZcdTMwNkVcdTMwQzlcdTMwRTlcdTMwQzNcdTMwQjBcdTMwQ0ZcdTMwRjNcdTMwQzlcdTMwRUJcdTMwNkZcdTg4NjhcdTc5M0FcdTMwNTlcdTMwOEJcdTMwNENcdTcxMjFcdTUyQjlcdTUzMTYgKi9cbi5kcmFnLWhhbmRsZS5kaXNhYmxlZCB7XG4gICAgY3Vyc29yOiBkZWZhdWx0O1xuICAgIG9wYWNpdHk6IDA7XG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjJzIGVhc2U7XG59XG5cbi50YXNrLWl0ZW06aG92ZXIgLmRyYWctaGFuZGxlLmRpc2FibGVkIHtcbiAgICBvcGFjaXR5OiAwLjM7XG59XG5cbi50YXNrLWl0ZW0ge1xuICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAyMHB4IDQwcHggMWZyIDIyMHB4IDExMHB4IDUwcHggMzBweCAzMHB4IDMwcHg7XG4gICAgZ2FwOiA4cHg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBwYWRkaW5nOiAycHggMTBweCAycHggMTVweDtcbiAgICBtYXJnaW46IDJweCAwO1xufVxuXG4vKiBcdTMwQzlcdTMwRTlcdTMwQzNcdTMwQjBcdTMwQ0ZcdTMwRjNcdTMwQzlcdTMwRUJcdTMwNkVcdTMwQjlcdTMwQkZcdTMwQTRcdTMwRUIgKi9cbi5kcmFnLWhhbmRsZSB7XG4gICAgd2lkdGg6IDIwcHg7XG4gICAgaGVpZ2h0OiAyMHB4O1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgIG9wYWNpdHk6IDA7XG4gICAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjJzIGVhc2UsIGJhY2tncm91bmQtY29sb3IgMC4ycyBlYXNlO1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbn1cblxuLnRhc2staXRlbTpob3ZlciAuZHJhZy1oYW5kbGUge1xuICAgIG9wYWNpdHk6IDAuNjtcbn1cblxuLmRyYWctaGFuZGxlOmhvdmVyIHtcbiAgICBvcGFjaXR5OiAxICFpbXBvcnRhbnQ7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbn1cblxuLmRyYWctaGFuZGxlOmFjdGl2ZSB7XG4gICAgY3Vyc29yOiBncmFiYmluZztcbn1cblxuLmRyYWctaGFuZGxlIHN2ZyB7XG4gICAgd2lkdGg6IDEwcHg7XG4gICAgaGVpZ2h0OiAxNnB4O1xufVxuXG4udGFzay1pdGVtLmRyYWdnaW5nIHtcbiAgICBvcGFjaXR5OiAwLjU7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgdHJhbnNmb3JtOiBzY2FsZSgwLjk4KTtcbiAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlO1xufVxuXG4udGFzay1pdGVtLmRyYWdvdmVyIHtcbiAgICBib3JkZXItdG9wOiAycHggc29saWQgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICBtYXJnaW4tdG9wOiAtMnB4O1xufVxuXG4udGFzay1pdGVtLmRyYWdvdmVyLWludmFsaWQge1xuICAgIGJvcmRlci10b3A6IDJweCBzb2xpZCB2YXIoLS10ZXh0LWVycm9yKTtcbiAgICBtYXJnaW4tdG9wOiAtMnB4O1xuICAgIG9wYWNpdHk6IDAuNztcbiAgICBjdXJzb3I6IG5vdC1hbGxvd2VkO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAwLCAwLCAwLjA1KTtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG59XG5cbi50YXNrLWl0ZW0uZHJhZ292ZXItaW52YWxpZDo6YWZ0ZXIge1xuICAgIGNvbnRlbnQ6IFwiXHUyNzRDIFx1MzA1M1x1MzA1M1x1MzA2Qlx1MzA2Rlx1OTE0RFx1N0Y2RVx1MzA2N1x1MzA0RFx1MzA3RVx1MzA1Qlx1MzA5M1wiO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IC0yNXB4O1xuICAgIGxlZnQ6IDUwJTtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdGV4dC1lcnJvcik7XG4gICAgY29sb3I6IHdoaXRlO1xuICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgIHotaW5kZXg6IDEwMDA7XG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG59XG5cbi50YXNrLW5hbWUge1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBmb250LXdlaWdodDogNTAwO1xuICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgbWFyZ2luLXJpZ2h0OiAtNHB4OyAvKiBcdTMwRDdcdTMwRURcdTMwQjhcdTMwQTdcdTMwQUZcdTMwQzhcdTMwNjhcdTMwNkVcdTk1OTNcdTk2OTRcdTMwOTJcdTcyRURcdTMwODFcdTMwOEIgKi9cbn1cblxuLnRhc2stdGltZS1yYW5nZSB7XG4gICAgZm9udC1zaXplOiAxMnB4O1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICBmb250LWZhbWlseTogbW9ub3NwYWNlO1xuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbn1cbi50YXNrLWR1cmF0aW9uLFxuLnRhc2stdGltZXItZGlzcGxheSB7XG4gICAgZm9udC1zaXplOiAxMnB4O1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgZm9udC1mYW1pbHk6IG1vbm9zcGFjZTtcbn1cblxuLnRhc2stdGltZXItZGlzcGxheSB7XG4gICAgY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG59XG5cbi50aW1lLXNsb3QtaGVhZGVyIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICBmb250LXdlaWdodDogNjAwO1xuICAgIHBhZGRpbmc6IDZweCAxMnB4O1xuICAgIG1hcmdpbjogOHB4IDAgNHB4IDA7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIGJvcmRlci1sZWZ0OiAzcHggc29saWQgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbn1cblxuLnRpbWUtc2xvdC1oZWFkZXIub3RoZXIge1xuICAgIGJvcmRlci1sZWZ0LWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG59XG5cbi50aW1lLXNsb3QtaGVhZGVyLmRyYWdvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICBib3JkZXItbGVmdC13aWR0aDogNXB4O1xuICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7XG59XG5cbi5yb3V0aW5lLWJ1dHRvbiB7XG4gICAgYmFja2dyb3VuZDogbm9uZTtcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgZm9udC1zaXplOiAxNHB4O1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBwYWRkaW5nOiAycHg7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7XG4gICAgb3BhY2l0eTogMC40O1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxuLnJvdXRpbmUtYnV0dG9uOmhvdmVyIHtcbiAgICBvcGFjaXR5OiAxO1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbn1cblxuLnJvdXRpbmUtYnV0dG9uLmFjdGl2ZSB7XG4gICAgb3BhY2l0eTogMTtcbiAgICBjb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbn1cblxuLyogXHUzMEIzXHUzMEUxXHUzMEYzXHUzMEM4XHUzMERDXHUzMEJGXHUzMEYzXHUzMEI5XHUzMEJGXHUzMEE0XHUzMEVCICovXG4uY29tbWVudC1idXR0b24ge1xuICAgIGZvbnQtc2l6ZTogMTVweDtcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgYmFja2dyb3VuZDogbm9uZTtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgIHBhZGRpbmc6IDJweDtcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZTtcbiAgICBvcGFjaXR5OiAwO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICB2aXNpYmlsaXR5OiB2aXNpYmxlOyAvKiBcdTMwQzdcdTMwRDVcdTMwQTlcdTMwRUJcdTMwQzhcdTMwNkZcdTg4NjhcdTc5M0EgKi9cbn1cblxuLnRhc2staXRlbTpob3ZlciAuY29tbWVudC1idXR0b246bm90KC5kaXNhYmxlZCkge1xuICAgIG9wYWNpdHk6IDAuNjtcbn1cblxuLmNvbW1lbnQtYnV0dG9uOm5vdCguZGlzYWJsZWQpOmhvdmVyIHtcbiAgICBvcGFjaXR5OiAxICFpbXBvcnRhbnQ7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG59XG5cbi8qIFx1MzBCM1x1MzBFMVx1MzBGM1x1MzBDOFx1MzBEQ1x1MzBCRlx1MzBGM1x1MzA2RVx1NzEyMVx1NTJCOVx1NTMxNlx1MzBCOVx1MzBCRlx1MzBBNFx1MzBFQiAtIFx1MzBCOVx1MzBEQVx1MzBGQ1x1MzBCOVx1MzA2Rlx1N0RBRFx1NjMwMVx1MzA1N1x1MzA2Nlx1OTc1RVx1ODg2OFx1NzkzQSAqL1xuLmNvbW1lbnQtYnV0dG9uLmRpc2FibGVkIHtcbiAgICB2aXNpYmlsaXR5OiBoaWRkZW47XG59XG5cbi8qIFx1NjVFMlx1NUI1OFx1MzBCM1x1MzBFMVx1MzBGM1x1MzBDOFx1MzA0Q1x1MzA0Mlx1MzA4Qlx1NTgzNFx1NTQwOFx1MzA2Rlx1ODg2OFx1NzkzQVx1MzA1OVx1MzA4Qlx1MzA0Q1x1MzAwMVx1MzBBRlx1MzBFQVx1MzBDM1x1MzBBRlx1NEUwRFx1NTNFRiAqL1xuLmNvbW1lbnQtYnV0dG9uLmRpc2FibGVkLmFjdGl2ZSB7XG4gICAgdmlzaWJpbGl0eTogdmlzaWJsZTtcbiAgICBvcGFjaXR5OiAwLjY7XG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgY3Vyc29yOiBub3QtYWxsb3dlZDtcbn1cblxuLmNvbW1lbnQtYnV0dG9uLmFjdGl2ZSB7XG4gICAgb3BhY2l0eTogMC42O1xuICAgIGNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xufVxuXG4udGFzay1pdGVtOmhvdmVyIC5jb21tZW50LWJ1dHRvbi5hY3RpdmUge1xuICAgIG9wYWNpdHk6IDE7XG59XG5cbi8qIFx1NUI4Q1x1NEU4Nlx1NkUwOFx1MzA3Rlx1MzA2N1x1MzBCM1x1MzBFMVx1MzBGM1x1MzBDOFx1NjcyQVx1OEExOFx1NTE2NVx1MzA2RVx1MzBCRlx1MzBCOVx1MzBBRiAtIFx1OTAxQVx1NUUzOFx1NjY0Mlx1OTc1RVx1ODg2OFx1NzkzQVx1MzAwMVx1MzBEQlx1MzBEMFx1MzBGQ1x1NjY0Mlx1ODg2OFx1NzkzQVx1RkYwOFx1N0E3QVx1OTU5M1x1MzA2Rlx1NEZERFx1NjMwMVx1RkYwOSAqL1xuLmNvbW1lbnQtYnV0dG9uLm5vLWNvbW1lbnQge1xuICAgIG9wYWNpdHk6IDA7XG4gICAgdmlzaWJpbGl0eTogaGlkZGVuO1xufVxuXG4udGFzay1pdGVtOmhvdmVyIC5jb21tZW50LWJ1dHRvbi5uby1jb21tZW50IHtcbiAgICBvcGFjaXR5OiAwLjY7XG4gICAgdmlzaWJpbGl0eTogdmlzaWJsZTtcbn1cblxuLyogXHUzMEQ3XHUzMEVEXHUzMEI4XHUzMEE3XHUzMEFGXHUzMEM4XHU4ODY4XHU3OTNBXHUzMEIzXHUzMEYzXHUzMEREXHUzMEZDXHUzMENEXHUzMEYzXHUzMEM4XHU1MTY4XHU0RjUzICovXG4udGFza2NodXRlLXByb2plY3QtZGlzcGxheSB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGdhcDogNHB4O1xuICAgIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDtcbiAgICBtYXJnaW4tcmlnaHQ6IDMycHg7IC8qIFx1NjY0Mlx1OTU5M1x1MzA2OFx1MzA2RVx1OTU5M1x1OTY5NFx1MzA5Mlx1NUU4M1x1MzA1Mlx1MzA4QiAqL1xufVxuXG4vKiBcdTMwRDdcdTMwRURcdTMwQjhcdTMwQTdcdTMwQUZcdTMwQzhcdTMwRENcdTMwQkZcdTMwRjNcdUZGMDhcdTMwRDVcdTMwQTlcdTMwRUJcdTMwQzBcdTMwQTJcdTMwQTRcdTMwQjNcdTMwRjMgKyBcdTMwRDdcdTMwRURcdTMwQjhcdTMwQTdcdTMwQUZcdTMwQzhcdTU0MERcdUZGMDkgKi9cbi50YXNrY2h1dGUtcHJvamVjdC1idXR0b24ge1xuICAgIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgZ2FwOiA0cHg7XG4gICAgcGFkZGluZzogMnB4IDhweDtcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICBtYXgtd2lkdGg6IDEwMCU7XG59XG5cbi50YXNrY2h1dGUtcHJvamVjdC1idXR0b246aG92ZXIge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbn1cblxuLyogXHUzMEQ3XHUzMEVEXHUzMEI4XHUzMEE3XHUzMEFGXHUzMEM4XHU2NzJBXHU4QTJEXHU1QjlBXHUzMDZFXHU1ODM0XHU1NDA4ICovXG4udGFza2NodXRlLXByb2plY3QtYnV0dG9uLmVtcHR5IHtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgYm9yZGVyLXN0eWxlOiBkYXNoZWQ7XG59XG5cbi8qIFx1MzBENVx1MzBBOVx1MzBFQlx1MzBDMFx1MzBBMlx1MzBBNFx1MzBCM1x1MzBGMyAqL1xuLnRhc2tjaHV0ZS1wcm9qZWN0LWljb24ge1xuICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICBmbGV4LXNocmluazogMDtcbn1cblxuLyogXHUzMEQ3XHUzMEVEXHUzMEI4XHUzMEE3XHUzMEFGXHUzMEM4XHU1NDBEICovXG4udGFza2NodXRlLXByb2plY3QtbmFtZSB7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xufVxuXG4vKiBFeHRlcm5hbCBMaW5rXHUzMEEyXHUzMEE0XHUzMEIzXHUzMEYzICovXG4udGFza2NodXRlLWV4dGVybmFsLWxpbmsge1xuICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgcGFkZGluZzogMnB4IDRweDtcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZTtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG59XG5cbi50YXNrY2h1dGUtZXh0ZXJuYWwtbGluazpob3ZlciB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG59XG5cbi8qIFx1MzBEN1x1MzBFRFx1MzBCOFx1MzBBN1x1MzBBRlx1MzBDOFx1NjcyQVx1OEEyRFx1NUI5QVx1NjY0Mlx1MzA2RVx1MzBEN1x1MzBFQ1x1MzBGQ1x1MzBCOVx1MzBEQlx1MzBFQlx1MzBDMFx1MzBGQyAqL1xuLnRhc2tjaHV0ZS1wcm9qZWN0LXBsYWNlaG9sZGVyIHtcbiAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIHBhZGRpbmc6IDJweCA4cHg7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlO1xuICAgIG9wYWNpdHk6IDA7XG4gICAgYm9yZGVyOiAxcHggZGFzaGVkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgZm9udC1zaXplOiAxM3B4O1xuICAgIG1pbi13aWR0aDogMTAwcHg7XG59XG5cbi50YXNrY2h1dGUtcHJvamVjdC1wbGFjZWhvbGRlcjo6YmVmb3JlIHtcbiAgICBjb250ZW50OiBcIlx1RDgzRFx1RENDMSBcdTMwRDdcdTMwRURcdTMwQjhcdTMwQTdcdTMwQUZcdTMwQzhcdTMwOTJcdThBMkRcdTVCOUFcIjtcbiAgICBmb250LXNpemU6IDEzcHg7XG59XG5cbi50YXNrLWl0ZW06aG92ZXIgLnRhc2tjaHV0ZS1wcm9qZWN0LXBsYWNlaG9sZGVyIHtcbiAgICBvcGFjaXR5OiAwLjY7XG59XG5cbi8qIFx1MzBEQlx1MzBEMFx1MzBGQ1x1NjY0Mlx1MzA2RVx1NjYwRVx1MzA4Qlx1MzA0Rlx1MzA2QVx1MzA4Qlx1NTJCOVx1Njc5Q1x1MzA5Mlx1NTI0QVx1OTY2NCAqL1xuLnRhc2tjaHV0ZS1wcm9qZWN0LXBsYWNlaG9sZGVyOmhvdmVyIHtcbiAgICAvKiBvcGFjaXR5OiAxICFpbXBvcnRhbnQ7IFx1NTI0QVx1OTY2NCAqL1xuICAgIC8qIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpOyBcdTUyNEFcdTk2NjQgKi9cbiAgICAvKiBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7IFx1NTI0QVx1OTY2NCAqL1xuICAgIC8qIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7IFx1NTI0QVx1OTY2NCAqL1xufVxuXG4vKiBcdTMwRDdcdTMwRURcdTMwQjhcdTMwQTdcdTMwQUZcdTMwQzhcdTMwRENcdTMwQkZcdTMwRjNcdTMwQjlcdTMwQkZcdTMwQTRcdTMwRUIgKi9cbi5wcm9qZWN0LWJ1dHRvbixcbi5wcm9qZWN0LXBsYWNlaG9sZGVyIHtcbiAgICBtYXJnaW4tbGVmdDogMTVweDtcbiAgICBtYXJnaW4tcmlnaHQ6IDRweDtcbiAgICBmb250LXNpemU6IDE0cHg7XG4gICAgYm9yZGVyOiBub25lO1xuICAgIGJhY2tncm91bmQ6IG5vbmU7XG4gICAgcGFkZGluZzogMnB4IDZweDtcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZTtcbiAgICBtaW4td2lkdGg6IDI2cHg7IC8qIFx1NEUwMFx1NUI5QVx1MzA2RVx1NUU0NVx1MzA5Mlx1NzhCQVx1NEZERCAqL1xuICAgIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbi5wcm9qZWN0LWJ1dHRvbiB7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICBvcGFjaXR5OiAwLjc7XG59XG5cbi5wcm9qZWN0LWJ1dHRvbjpob3ZlciB7XG4gICAgb3BhY2l0eTogMTtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbn1cblxuLnByb2plY3QtcGxhY2Vob2xkZXIge1xuICAgIC8qIFx1OTAwRlx1NjYwRVx1MzA2N1x1MzBCOVx1MzBEQVx1MzBGQ1x1MzBCOVx1MzA2RVx1MzA3Rlx1NzhCQVx1NEZERCAqL1xuICAgIG9wYWNpdHk6IDA7XG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG59XG5cbi50YXNrLWxpc3QtaGVhZGVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgZ2FwOiA4cHg7XG59XG5cbi5oZWFkZXItbGVmdC1zZWN0aW9uIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgZ2FwOiA4cHg7XG59XG5cbi5oZWFkZXItbGVmdC1zZWN0aW9uIGg1IHtcbiAgICBtYXJnaW46IDA7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xufVxuXG4uaGVhZGVyLXJpZ2h0LXNlY3Rpb24ge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbn1cblxuLyogR3JheWVkIG91dCBlZmZlY3QgZm9yIHRhc2sgbGlzdCAqL1xuLnRhc2stbGlzdC1jb250YWluZXIuZ3JheWVkLW91dCB7XG4gICAgb3BhY2l0eTogMC42O1xuICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xufVxuXG4uYWRkLXRhc2stYnV0dG9uIHtcbiAgICBtYXJnaW4tbGVmdDogMDtcbiAgICBtYXJnaW4tcmlnaHQ6IDE1cHg7XG59XG5cbi5hZGQtdGFzay1idXR0b24ucmVwb3NpdGlvbmVkIHtcbiAgICBtYXJnaW4tbGVmdDogMDtcbiAgICBtYXJnaW4tcmlnaHQ6IDA7XG59XG5cbi5yb2JvdC10ZXJtaW5hbC1idXR0b24ge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICBwYWRkaW5nOiA0cHggOHB4O1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBmb250LXNpemU6IDE2cHg7XG4gICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjJzIGVhc2U7XG4gICAgbWFyZ2luLXJpZ2h0OiAxNXB4O1xufVxuXG4ucm9ib3QtdGVybWluYWwtYnV0dG9uOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbn1cblxuLyogXHUzMEUyXHUzMEZDXHUzMEMwXHUzMEVCXHUzMEI5XHUzMEJGXHUzMEE0XHUzMEVCICovXG4udGFzay1tb2RhbC1vdmVybGF5IHtcbiAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgdG9wOiAwO1xuICAgIGxlZnQ6IDA7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC41KTtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgei1pbmRleDogMTAwMDtcbn1cblxuLnRhc2stbW9kYWwtY29udGVudCB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgYm94LXNoYWRvdzogMCA0cHggMjBweCByZ2JhKDAsIDAsIDAsIDAuMyk7XG4gICAgd2lkdGg6IDkwJTtcbiAgICBtYXgtd2lkdGg6IDUwMHB4O1xuICAgIG1heC1oZWlnaHQ6IDgwdmg7XG4gICAgb3ZlcmZsb3cteTogYXV0bztcbn1cblxuLm1vZGFsLWhlYWRlciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBwYWRkaW5nOiAyMHB4IDIwcHggMCAyMHB4O1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG59XG5cbi5tb2RhbC1oZWFkZXIgaDMge1xuICAgIG1hcmdpbjogMDtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xufVxuXG4ubW9kYWwtY2xvc2UtYnV0dG9uIHtcbiAgICBiYWNrZ3JvdW5kOiBub25lO1xuICAgIGJvcmRlcjogbm9uZTtcbiAgICBmb250LXNpemU6IDI0cHg7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBwYWRkaW5nOiAwO1xuICAgIHdpZHRoOiAzMHB4O1xuICAgIGhlaWdodDogMzBweDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7XG59XG5cbi5tb2RhbC1jbG9zZS1idXR0b246aG92ZXIge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xufVxuXG4udGFzay1mb3JtIHtcbiAgICBwYWRkaW5nOiAyMHB4O1xufVxuXG4uZm9ybS1ncm91cCB7XG4gICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbn1cblxuLmZvcm0tbGFiZWwge1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgIG1hcmdpbi1ib3R0b206IDVweDtcbiAgICBmb250LXdlaWdodDogNTAwO1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG59XG5cbi5mb3JtLWlucHV0LFxuLmZvcm0tdGV4dGFyZWEge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIHBhZGRpbmc6IDhweCAxMnB4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgIGZvbnQtZmFtaWx5OiBpbmhlcml0O1xuICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xufVxuXG4vKiBcdTMwQkJcdTMwRUNcdTMwQUZcdTMwQzhcdTMwRENcdTMwQzNcdTMwQUZcdTMwQjlcdTMwNkVcdTlBRDhcdTMwNTVcdThBQkZcdTY1NzQgKi9cbnNlbGVjdC5mb3JtLWlucHV0IHtcbiAgICBtaW4taGVpZ2h0OiAzNnB4O1xuICAgIGxpbmUtaGVpZ2h0OiAxLjU7XG4gICAgcGFkZGluZzogOHB4IDEycHg7XG59XG5cbi5mb3JtLWlucHV0OmZvY3VzLFxuLmZvcm0tdGV4dGFyZWE6Zm9jdXMge1xuICAgIG91dGxpbmU6IG5vbmU7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgIGJveC1zaGFkb3c6IDAgMCAwIDJweCByZ2JhKHZhcigtLWludGVyYWN0aXZlLWFjY2VudC1yZ2IpLCAwLjIpO1xufVxuXG4uZm9ybS10ZXh0YXJlYSB7XG4gICAgbWluLWhlaWdodDogODBweDtcbiAgICByZXNpemU6IHZlcnRpY2FsO1xufVxuXG4uZm9ybS1idXR0b24tZ3JvdXAge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZ2FwOiAxMHB4O1xuICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XG4gICAgbWFyZ2luLXRvcDogMjBweDtcbn1cblxuLmZvcm0tYnV0dG9uIHtcbiAgICBwYWRkaW5nOiA4cHggMTZweDtcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICBmb250LXdlaWdodDogNTAwO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlO1xuICAgIG1pbi13aWR0aDogODBweDtcbn1cblxuLmZvcm0tYnV0dG9uLmNhbmNlbCB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG59XG5cbi5mb3JtLWJ1dHRvbi5jYW5jZWw6aG92ZXIge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyLWhvdmVyKTtcbn1cblxuLmZvcm0tYnV0dG9uLmNyZWF0ZSB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xufVxuXG4uZm9ybS1idXR0b24uY3JlYXRlOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQtaG92ZXIpO1xufVxuXG4uZm9ybS1kZXNjcmlwdGlvbiB7XG4gICAgbWFyZ2luOiAwO1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICBmb250LXNpemU6IDEzcHg7XG4gICAgbGluZS1oZWlnaHQ6IDEuNDtcbn1cblxuLnRhc2stbmFtZS53aWtpbGluayB7XG4gICAgY29sb3I6IHZhcigtLWxpbmstY29sb3IpO1xuICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICBib3JkZXItcmFkaXVzOiAzcHg7XG4gICAgcGFkZGluZzogMnB4IDRweDtcbiAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDAuMTVzO1xufVxuLnRhc2stbmFtZS53aWtpbGluazpob3ZlciB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgY29sb3I6IHZhcigtLWxpbmstY29sb3ItaG92ZXIpO1xufVxuLnBsYXktc3RvcC1idXR0b24ge1xuICAgIGZvbnQtc2l6ZTogMThweDtcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgYmFja2dyb3VuZDogbm9uZTtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgdHJhbnNpdGlvbjogY29sb3IgMC4ycztcbiAgICBjb2xvcjogIzM0OThkYjtcbiAgICBwYWRkaW5nOiAycHg7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cbi5wbGF5LXN0b3AtYnV0dG9uLnN0b3Age1xuICAgIGNvbG9yOiAjZTc0YzNjO1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbn1cbi50YXNrLWl0ZW0uc2VsZWN0ZWQge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbn1cbi5kZWxldGUtdGFzay1idXR0b24ge1xuICAgIG1hcmdpbi1sZWZ0OiA4cHg7XG4gICAgZm9udC1zaXplOiAxNXB4O1xuICAgIGJvcmRlcjogbm9uZTtcbiAgICBiYWNrZ3JvdW5kOiBub25lO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBjb2xvcjogI2U3NGMzYztcbiAgICBwYWRkaW5nOiAycHggNnB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDAuMnM7XG59XG4uZGVsZXRlLXRhc2stYnV0dG9uOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG59XG5cbi8qIFx1OEEyRFx1NUI5QVx1MzBEQ1x1MzBCRlx1MzBGM1x1MzBCOVx1MzBCRlx1MzBBNFx1MzBFQiAqL1xuLnNldHRpbmdzLXRhc2stYnV0dG9uIHtcbiAgICBmb250LXNpemU6IDE1cHg7XG4gICAgYm9yZGVyOiBub25lO1xuICAgIGJhY2tncm91bmQ6IG5vbmU7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICBwYWRkaW5nOiAycHg7XG4gICAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlO1xuICAgIG9wYWNpdHk6IDAuNjtcbiAgICB3aWR0aDogMTAwJTtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG5cbi5zZXR0aW5ncy10YXNrLWJ1dHRvbjpob3ZlciB7XG4gICAgb3BhY2l0eTogMTtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbn1cblxuLyogXHUzMEM0XHUzMEZDXHUzMEVCXHUzMEMxXHUzMEMzXHUzMEQ3XHUzMEI5XHUzMEJGXHUzMEE0XHUzMEVCICovXG4udGFzay1zZXR0aW5ncy10b29sdGlwIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgYm94LXNoYWRvdzogMCA0cHggMTJweCByZ2JhKDAsIDAsIDAsIDAuMTUpO1xuICAgIHBhZGRpbmc6IDRweCAwO1xuICAgIG1pbi13aWR0aDogMTQwcHg7XG4gICAgZm9udC1zaXplOiAxM3B4O1xuICAgIHotaW5kZXg6IDEwMDA7XG59XG5cbi50b29sdGlwLWhlYWRlciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xuICAgIHBhZGRpbmc6IDRweCA4cHggMCA4cHg7XG4gICAgbWFyZ2luLWJvdHRvbTogNHB4O1xufVxuXG4udG9vbHRpcC1jbG9zZS1idXR0b24ge1xuICAgIGJhY2tncm91bmQ6IG5vbmU7XG4gICAgYm9yZGVyOiBub25lO1xuICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIHBhZGRpbmc6IDA7XG4gICAgd2lkdGg6IDIwcHg7XG4gICAgaGVpZ2h0OiAyMHB4O1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBib3JkZXItcmFkaXVzOiAzcHg7XG4gICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZTtcbn1cblxuLnRvb2x0aXAtY2xvc2UtYnV0dG9uOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbn1cblxuLnRvb2x0aXAtaXRlbSB7XG4gICAgcGFkZGluZzogOHB4IDEycHg7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4ycyBlYXNlO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBnYXA6IDhweDtcbn1cblxuLnRvb2x0aXAtaXRlbTpob3ZlciB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xufVxuXG4udG9vbHRpcC1pdGVtLmRlbGV0ZS1pdGVtOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiByZ2JhKDIzMSwgNzYsIDYwLCAwLjEpO1xufVxuXG4udG9vbHRpcC1pdGVtLnByb2plY3QtaXRlbSB7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbn1cblxuLnRvb2x0aXAtaXRlbS5wcm9qZWN0LWl0ZW06aG92ZXIge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbn1cblxuLnRvb2x0aXAtaXRlbS5kaXNhYmxlZCB7XG4gICAgb3BhY2l0eTogMC41O1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICBjdXJzb3I6IG5vdC1hbGxvd2VkO1xufVxuXG4udG9vbHRpcC1pdGVtLmRpc2FibGVkOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiBub25lO1xufVxuXG4uZGF0ZS1uYXYtY29udGFpbmVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgIGdhcDogMnB4O1xuICAgIGhlaWdodDogMzZweDtcbn1cblxuLmRhdGUtbmF2LWNvbnRhaW5lci5jb21wYWN0IHtcbiAgICBmbGV4OiAxOyAvKiBUYWtlIHJlbWFpbmluZyBzcGFjZSBpbiB0b3AtYmFyLWNvbnRhaW5lciAqL1xuICAgIG1hcmdpbi1ib3R0b206IDA7IC8qIFJlbW92ZSBib3R0b20gbWFyZ2luICovXG4gICAgZ2FwOiAxcHg7XG4gICAgaGVpZ2h0OiAxMDAlOyAvKiBNYXRjaCBwYXJlbnQgaGVpZ2h0ICovXG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xufVxuXG4uZGF0ZS1uYXYtYXJyb3cge1xuICAgIGJhY2tncm91bmQ6IG5vbmU7XG4gICAgYm9yZGVyOiBub25lO1xuICAgIGZvbnQtc2l6ZTogMjhweDtcbiAgICBjb2xvcjogIzg4ODtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgcGFkZGluZzogMCA4cHg7XG4gICAgdHJhbnNpdGlvbjogY29sb3IgMC4ycztcbn1cblxuLmRhdGUtbmF2LWNvbnRhaW5lci5jb21wYWN0IC5kYXRlLW5hdi1hcnJvdyB7XG4gICAgZm9udC1zaXplOiAyMHB4O1xuICAgIHBhZGRpbmc6IDAgNHB4O1xufVxuXG4uZGF0ZS1uYXYtYXJyb3c6aG92ZXIge1xuICAgIGNvbG9yOiAjMTk3NmQyO1xufVxuXG4uZGF0ZS1uYXYtbGFiZWwge1xuICAgIGZvbnQtc2l6ZTogMTVweDtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICBjb2xvcjogIzE5NzZkMjtcbiAgICBtaW4td2lkdGg6IDkwcHg7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGxldHRlci1zcGFjaW5nOiAwLjVweDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgaGVpZ2h0OiAyOHB4O1xuICAgIG1hcmdpbi1yaWdodDogM3B4O1xufVxuXG4uZGF0ZS1uYXYtY29udGFpbmVyLmNvbXBhY3QgLmRhdGUtbmF2LWxhYmVsIHtcbiAgICBmb250LXNpemU6IDE1cHg7XG4gICAgbWluLXdpZHRoOiA5MHB4O1xuICAgIGxldHRlci1zcGFjaW5nOiAwLjVweDtcbiAgICBoZWlnaHQ6IDI0cHg7XG59XG4uY2FsZW5kYXItYnRuIHtcbiAgICBiYWNrZ3JvdW5kOiBub25lO1xuICAgIGJvcmRlcjogbm9uZTtcbiAgICBmb250LXNpemU6IDE2cHg7XG4gICAgcGFkZGluZzogMnB4IDJweDtcbiAgICBtYXJnaW46IDAgMXB4O1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgaGVpZ2h0OiAyNHB4O1xuICAgIHdpZHRoOiAyNHB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDAuMnM7XG59XG4uY2FsZW5kYXItYnRuOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG59XG4uZGF0ZS13aWtpbGluayB7XG4gICAgY29sb3I6ICMxOTc2ZDIgIWltcG9ydGFudDtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBtaW4td2lkdGg6IDYwcHg7XG4gICAgcGFkZGluZzogMCAxcHg7XG59XG5cbi8qIFx1NUI4Q1x1NEU4Nlx1NkYxNFx1NTFGQVx1MzBCOVx1MzBCRlx1MzBBNFx1MzBFQiAqL1xuXG5cbkBrZXlmcmFtZXMgZmFkZUluIHtcbiAgICBmcm9tIHsgb3BhY2l0eTogMDsgfVxuICAgIHRvIHsgb3BhY2l0eTogMTsgfVxufVxuXG5cblxuQGtleWZyYW1lcyBib3VuY2VJbiB7XG4gICAgMCUge1xuICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDAuMyk7XG4gICAgICAgIG9wYWNpdHk6IDA7XG4gICAgfVxuICAgIDUwJSB7XG4gICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4wNSk7XG4gICAgfVxuICAgIDcwJSB7XG4gICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMC45KTtcbiAgICB9XG4gICAgMTAwJSB7XG4gICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMSk7XG4gICAgICAgIG9wYWNpdHk6IDE7XG4gICAgfVxufVxuXG5cblxuQGtleWZyYW1lcyBwdWxzZSB7XG4gICAgMCUsIDEwMCUgeyB0cmFuc2Zvcm06IHNjYWxlKDEpOyB9XG4gICAgNTAlIHsgdHJhbnNmb3JtOiBzY2FsZSgxLjA1KTsgfVxufVxuXG5cblxuLmZpcmV3b3Jrcy1jb250YWluZXIge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDA7XG4gICAgbGVmdDogMDtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG59XG5cbi5maXJld29yayB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHdpZHRoOiA4cHg7XG4gICAgaGVpZ2h0OiA4cHg7XG4gICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgIGFuaW1hdGlvbjogZmlyZXdvcmtFeHBsb3Npb24gMnMgZWFzZS1vdXQgZm9yd2FyZHM7XG59XG5cbkBrZXlmcmFtZXMgZmlyZXdvcmtFeHBsb3Npb24ge1xuICAgIDAlIHtcbiAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgwKTtcbiAgICAgICAgb3BhY2l0eTogMTtcbiAgICB9XG4gICAgNTAlIHtcbiAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxKTtcbiAgICAgICAgb3BhY2l0eTogMTtcbiAgICB9XG4gICAgMTAwJSB7XG4gICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMCk7XG4gICAgICAgIG9wYWNpdHk6IDA7XG4gICAgfVxufVxuXG5cblxuXG4vKiBcdTgyQjFcdTcwNkJcdTMwNkVcdThGRkRcdTUyQTBcdTMwQThcdTMwRDVcdTMwQTdcdTMwQUZcdTMwQzggKi9cbi5maXJld29yazo6YmVmb3JlLFxuLmZpcmV3b3JrOjphZnRlciB7XG4gICAgY29udGVudDogJyc7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgYmFja2dyb3VuZDogaW5oZXJpdDtcbiAgICBhbmltYXRpb246IGZpcmV3b3JrU3BhcmtsZSAycyBlYXNlLW91dCBmb3J3YXJkcztcbn1cblxuLmZpcmV3b3JrOjpiZWZvcmUge1xuICAgIGFuaW1hdGlvbi1kZWxheTogMC4xcztcbn1cblxuLmZpcmV3b3JrOjphZnRlciB7XG4gICAgYW5pbWF0aW9uLWRlbGF5OiAwLjJzO1xufVxuXG5Aa2V5ZnJhbWVzIGZpcmV3b3JrU3BhcmtsZSB7XG4gICAgMCUge1xuICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDApIHJvdGF0ZSgwZGVnKTtcbiAgICAgICAgb3BhY2l0eTogMTtcbiAgICB9XG4gICAgMTAwJSB7XG4gICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMikgcm90YXRlKDM2MGRlZyk7XG4gICAgICAgIG9wYWNpdHk6IDA7XG4gICAgfVxufVxuXG4vKiBcdTMwRDFcdTMwRkNcdTMwQzZcdTMwQTNcdTMwQUZcdTMwRUJcdTUyQjlcdTY3OUMgKi9cbi5wYXJ0aWNsZSB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHdpZHRoOiA0cHg7XG4gICAgaGVpZ2h0OiA0cHg7XG4gICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgIGFuaW1hdGlvbjogcGFydGljbGVFeHBsb3Npb24gMS41cyBlYXNlLW91dCBmb3J3YXJkcztcbn1cblxuQGtleWZyYW1lcyBwYXJ0aWNsZUV4cGxvc2lvbiB7XG4gICAgMCUge1xuICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDApIHRyYW5zbGF0ZVgoMCk7XG4gICAgICAgIG9wYWNpdHk6IDE7XG4gICAgfVxuICAgIDUwJSB7XG4gICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMSkgdHJhbnNsYXRlWCg1MHB4KTtcbiAgICAgICAgb3BhY2l0eTogMTtcbiAgICB9XG4gICAgMTAwJSB7XG4gICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMCkgdHJhbnNsYXRlWCgxMDBweCk7XG4gICAgICAgIG9wYWNpdHk6IDA7XG4gICAgfVxufVxuXG4vKiBcdThGRkRcdTUyQTBcdTMwNkVcdTZGMTRcdTUxRkFcdTUyQjlcdTY3OUMgKi9cblxuXG5Aa2V5ZnJhbWVzIGdsb3dQdWxzZSB7XG4gICAgMCUsIDEwMCUgeyBvcGFjaXR5OiAwLjM7IH1cbiAgICA1MCUgeyBvcGFjaXR5OiAwLjg7IH1cbn1cblxuLyogXHU3RDcxXHU4QTA4XHU4ODY4XHU3OTNBXHUzMEI5XHUzMEJGXHUzMEE0XHUzMEVCICovXG5cblxuLnN0YXQtaXRlbSB7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTtcbiAgICBwYWRkaW5nOiAxNXB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDEwcHgpO1xufVxuXG4uc3RhdC1udW1iZXIge1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgIGZvbnQtc2l6ZTogMjRweDtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICBjb2xvcjogd2hpdGU7XG4gICAgbWFyZ2luLWJvdHRvbTogNXB4O1xufVxuXG4uc3RhdC1sYWJlbCB7XG4gICAgZGlzcGxheTogYmxvY2s7XG4gICAgZm9udC1zaXplOiAxNHB4O1xuICAgIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOCk7XG59XG5cbi8qIFx1N0QxOVx1NTQzOVx1OTZFQVx1MzBBOFx1MzBENVx1MzBBN1x1MzBBRlx1MzBDOCAqL1xuLmNvbmZldHRpLWNvbnRhaW5lciB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMDtcbiAgICBsZWZ0OiAwO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xufVxuXG4uY29uZmV0dGkge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IC0xMHB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDJweDtcbiAgICBhbmltYXRpb246IGNvbmZldHRpRmFsbCAzcyBsaW5lYXIgZm9yd2FyZHM7XG59XG5cbkBrZXlmcmFtZXMgY29uZmV0dGlGYWxsIHtcbiAgICAwJSB7XG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMTBweCkgcm90YXRlKDBkZWcpO1xuICAgICAgICBvcGFjaXR5OiAxO1xuICAgIH1cbiAgICAxMDAlIHtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDEwMHZoKSByb3RhdGUoNzIwZGVnKTtcbiAgICAgICAgb3BhY2l0eTogMDtcbiAgICB9XG59XG5cbi8qIFx1OEZGRFx1NTJBMFx1MzA2RVx1NkYxNFx1NTFGQVx1NTJCOVx1Njc5QyAqL1xuXG5cbkBrZXlmcmFtZXMgc2hpbW1lciB7XG4gICAgMCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTEwMCUpOyB9XG4gICAgMTAwJSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWCgxMDAlKTsgfVxufVxuXG4vKiBcdTMwQzFcdTMwQTdcdTMwQzNcdTMwQUZcdTMwRENcdTMwQzNcdTMwQUZcdTMwQjlcdTMwQjlcdTMwQkZcdTMwQTRcdTMwRUIgKi9cbi5mb3JtLWNoZWNrYm94IHtcbiAgICBtYXJnaW4tbGVmdDogMTBweDtcbiAgICB3aWR0aDogMTZweDtcbiAgICBoZWlnaHQ6IDE2cHg7XG4gICAgYWNjZW50LWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xufVxuXG4uZm9ybS1jaGVja2JveDpjaGVja2VkIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbn1cblxuLyogXHUzMEU5XHUzMEI4XHUzMEFBXHUzMERDXHUzMEJGXHUzMEYzXHUzMEIwXHUzMEVCXHUzMEZDXHUzMEQ3XHUzMEI5XHUzMEJGXHUzMEE0XHUzMEVCICovXG4ucmFkaW8tZ3JvdXAge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZ2FwOiAyMHB4O1xuICAgIG1hcmdpbi10b3A6IDhweDtcbn1cblxuLnJhZGlvLWdyb3VwIGlucHV0W3R5cGU9XCJyYWRpb1wiXSB7XG4gICAgbWFyZ2luLXJpZ2h0OiA4cHg7XG4gICAgYWNjZW50LWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xufVxuXG4ucmFkaW8tZ3JvdXAgbGFiZWwge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgZm9udC1zaXplOiAxNHB4O1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG59XG5cbi8qIFx1MzBCQlx1MzBFQ1x1MzBBRlx1MzBDOFx1MzBEQ1x1MzBDM1x1MzBBRlx1MzBCOVx1MzBCOVx1MzBCRlx1MzBBNFx1MzBFQiAqL1xuLmZvcm0taW5wdXRbdHlwZT1cInRpbWVcIl0sXG4uZm9ybS1pbnB1dFt0eXBlPVwic2VsZWN0XCJdIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBwYWRkaW5nOiA4cHggMTJweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICBmb250LWZhbWlseTogaW5oZXJpdDtcbiAgICBmb250LXNpemU6IDE0cHg7XG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbn1cblxuLmZvcm0taW5wdXRbdHlwZT1cInRpbWVcIl06Zm9jdXMsXG4uZm9ybS1pbnB1dFt0eXBlPVwic2VsZWN0XCJdOmZvY3VzIHtcbiAgICBvdXRsaW5lOiBub25lO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICBib3gtc2hhZG93OiAwIDAgMCAycHggcmdiYSh2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQtcmdiKSwgMC4yKTtcbn1cblxuLyogXHUzMEJGXHUzMEI5XHUzMEFGXHU1QjhDXHU0RTg2XHUzMEIzXHUzMEUxXHUzMEYzXHUzMEM4XHUzMEUyXHUzMEZDXHUzMEMwXHUzMEVCXHUzMDZFXHUzMEI5XHUzMEJGXHUzMEE0XHUzMEVCICovXG4uY29tcGxldGlvbi1tb2RhbCB7XG4gICAgbWF4LXdpZHRoOiA1MDBweDtcbiAgICBtYXgtaGVpZ2h0OiA4MHZoO1xuICAgIG92ZXJmbG93LXk6IGF1dG87XG59XG5cbi5jb21wbGV0aW9uLWZvcm0ge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBnYXA6IDE2cHg7XG59XG5cbi5jb21wbGV0aW9uLXRpbWUtaW5mbyB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgIHBhZGRpbmc6IDEycHg7XG4gICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbn1cblxuLmNvbXBsZXRpb24tdGltZS1pbmZvIHAge1xuICAgIG1hcmdpbjogNHB4IDA7XG4gICAgZm9udC1zaXplOiAxNHB4O1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG59XG5cbi5jb21wbGV0aW9uLXJhdGluZy1zZWN0aW9uIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgcGFkZGluZzogMTZweDtcbiAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xufVxuXG4uY29tcGxldGlvbi1yYXRpbmctc2VjdGlvbiBoNCB7XG4gICAgbWFyZ2luOiAwIDAgMTZweCAwO1xuICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xufVxuXG4ucmF0aW5nLWdyb3VwIHtcbiAgICBtYXJnaW4tYm90dG9tOiAxNnB4O1xufVxuXG4ucmF0aW5nLWxhYmVsIHtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gICAgZm9udC1zaXplOiAxNHB4O1xuICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbn1cblxuLnN0YXItcmF0aW5nIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGdhcDogNHB4O1xuICAgIG1hcmdpbi1ib3R0b206IDhweDtcbn1cblxuLnN0YXItcmF0aW5nIC5zdGFyIHtcbiAgICBmb250LXNpemU6IDIwcHg7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7XG4gICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgb3BhY2l0eTogMC4zO1xufVxuXG4uc3Rhci1yYXRpbmcgLnN0YXI6aG92ZXIge1xuICAgIHRyYW5zZm9ybTogc2NhbGUoMS4yKTtcbn1cblxuLmVuZXJneS1zZWxlY3Qge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIHBhZGRpbmc6IDhweCAxMnB4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgIGZvbnQtZmFtaWx5OiBpbmhlcml0O1xuICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xufVxuXG4uZW5lcmd5LXNlbGVjdDpmb2N1cyB7XG4gICAgb3V0bGluZTogbm9uZTtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgYm94LXNoYWRvdzogMCAwIDAgMnB4IHJnYmEodmFyKC0taW50ZXJhY3RpdmUtYWNjZW50LXJnYiksIDAuMik7XG59XG5cbi5jb21wbGV0aW9uLWNvbW1lbnQge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIG1pbi1oZWlnaHQ6IDEwMHB4O1xuICAgIHBhZGRpbmc6IDEycHg7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgZm9udC1mYW1pbHk6IGluaGVyaXQ7XG4gICAgZm9udC1zaXplOiAxNHB4O1xuICAgIHJlc2l6ZTogdmVydGljYWw7XG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbn1cblxuLyogXHU1MTY1XHU1MjlCXHU2NjQyXHUzMDZFXHUzMEM2XHUzMEFEXHUzMEI5XHUzMEM4XHU4MjcyXHUzMDkyXHU2NjBFXHUzMDhCXHUzMDRGXHUzMDU5XHUzMDhCICovXG4uY29tcGxldGlvbi1jb21tZW50Om5vdCg6cGxhY2Vob2xkZXItc2hvd24pIHtcbiAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjkpO1xufVxuXG4uY29tcGxldGlvbi1jb21tZW50OmZvY3VzIHtcbiAgICBvdXRsaW5lOiBub25lO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICBib3gtc2hhZG93OiAwIDAgMCAycHggcmdiYSh2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQtcmdiKSwgMC4yKTtcbn1cblxuLmNvbXBsZXRpb24tY29tbWVudDo6cGxhY2Vob2xkZXIge1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LWZhaW50KTtcbiAgICBvcGFjaXR5OiAwLjY7XG4gICAgZm9udC1zdHlsZTogaXRhbGljO1xufVxuXG4udGFnLXNlbGVjdGlvbiB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgZ2FwOiA4cHg7XG4gICAgbWFyZ2luLXRvcDogOHB4O1xufVxuXG4udGFnLW9wdGlvbiB7XG4gICAgcGFkZGluZzogNnB4IDEycHg7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICBib3JkZXItcmFkaXVzOiAxNnB4O1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBmb250LXNpemU6IDEycHg7XG4gICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZTtcbiAgICB1c2VyLXNlbGVjdDogbm9uZTtcbn1cblxuLnRhZy1vcHRpb246aG92ZXIge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyLWhvdmVyKTtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xufVxuXG4udGFnLW9wdGlvbi5zZWxlY3RlZCB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xufVxuXG4uZm9ybS1idXR0b24tZ3JvdXAge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZ2FwOiAxMnB4O1xuICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XG4gICAgbWFyZ2luLXRvcDogOHB4O1xufVxuXG4uZm9ybS1idXR0b24ge1xuICAgIHBhZGRpbmc6IDEwcHggMjBweDtcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICBmb250LXdlaWdodDogNTAwO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlO1xuICAgIG1pbi13aWR0aDogODBweDtcbn1cblxuLmZvcm0tYnV0dG9uLnByaW1hcnkge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbn1cblxuLmZvcm0tYnV0dG9uLnByaW1hcnk6aG92ZXIge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudC1ob3Zlcik7XG59XG5cbi5mb3JtLWJ1dHRvbi5zZWNvbmRhcnkge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xufVxuXG4uZm9ybS1idXR0b24uc2Vjb25kYXJ5OmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlci1ob3Zlcik7XG59XG5cbi8qIFx1MzBFQ1x1MzBCOVx1MzBERFx1MzBGM1x1MzBCN1x1MzBENlx1NUJGRVx1NUZEQyAtIFx1MzBCM1x1MzBGM1x1MzBDNlx1MzBDQVx1MzBEOVx1MzBGQ1x1MzBCOVx1MzA2RVx1OEFCRlx1NjU3NCAqL1xuLyogXHU0RTJEXHU5NTkzXHUzMDZFXHU1RTQ1XHVGRjA4ODAwcHhcdTRFRTVcdTRFMEJcdTc2RjhcdTVGNTNcdUZGMDkgKi9cbi50YXNrY2h1dGUtbmFycm93IC50YXNrLWl0ZW0ge1xuICAgIC8qIFx1MzBCMFx1MzBFQVx1MzBDM1x1MzBDOVx1MzBFQ1x1MzBBNFx1MzBBMlx1MzBBNlx1MzBDOFx1MzA5Mlx1OEFCRlx1NjU3NCAtIFx1MzBEN1x1MzBFRFx1MzBCOFx1MzBBN1x1MzBBRlx1MzBDOFx1MzA2OFx1NjY0Mlx1OTU5M1x1MzA5Mlx1N0UyRVx1NUMwRiAqL1xuICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMjBweCA0MHB4IG1pbm1heCgxNTBweCwgMWZyKSAxMjBweCA4MHB4IDQwcHggMzBweCAzMHB4IDMwcHg7XG4gICAgZ2FwOiA0cHg7XG59XG5cbi50YXNrY2h1dGUtbmFycm93IC50YXNrLW5hbWUge1xuICAgIG1pbi13aWR0aDogMTUwcHg7XG59XG5cbi50YXNrY2h1dGUtbmFycm93IC50YXNrY2h1dGUtcHJvamVjdC1kaXNwbGF5IHtcbiAgICBtYXgtd2lkdGg6IDEyMHB4O1xuICAgIG1hcmdpbi1yaWdodDogNHB4O1xufVxuXG4udGFza2NodXRlLW5hcnJvdyAudGFza2NodXRlLXByb2plY3QtbmFtZSB7XG4gICAgbWF4LXdpZHRoOiAxMDBweDtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG59XG5cbi50YXNrY2h1dGUtbmFycm93IC50YXNrLXRpbWUtcmFuZ2Uge1xuICAgIGZvbnQtc2l6ZTogMTFweDtcbn1cblxuLnRhc2tjaHV0ZS1uYXJyb3cgLnJvdXRpbmUtYnV0dG9uLFxuLnRhc2tjaHV0ZS1uYXJyb3cgLmNvbW1lbnQtYnV0dG9uIHtcbiAgICBmb250LXNpemU6IDEzcHg7XG59XG5cbi8qIFx1MzA1NVx1MzA4OVx1MzA2Qlx1NzJFRFx1MzA0NFx1NUU0NVx1RkYwODYwMHB4XHU0RUU1XHU0RTBCXHU3NkY4XHU1RjUzXHVGRjA5ICovXG4udGFza2NodXRlLXZlcnktbmFycm93IC50YXNrLWl0ZW0ge1xuICAgIC8qIFx1MzBCRlx1MzBCOVx1MzBBRlx1NTQwRFx1MzA5Mlx1NjcwMFx1NTEyQVx1NTE0OFx1MzA2Qlx1MzA1N1x1MzAwMVx1NUZDNVx1ODk4MVx1MzA2QVx1MzBEQ1x1MzBCRlx1MzBGM1x1MzA2RVx1MzA3Rlx1ODg2OFx1NzkzQSAqL1xuICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMjBweCA0MHB4IDFmciAzMHB4IDMwcHg7XG4gICAgZ2FwOiAycHg7XG59XG5cbi8qIFx1ODg2OFx1NzkzQVx1MzA1OVx1MzA4Qlx1ODk4MVx1N0QyMFx1MzA5Mlx1OTY1MFx1NUI5QSAqL1xuLnRhc2tjaHV0ZS12ZXJ5LW5hcnJvdyAudGFzay1pdGVtID4gKjpudGgtY2hpbGQobis2KSB7XG4gICAgZGlzcGxheTogbm9uZTtcbn1cblxuLyogXHUzMEQ3XHUzMEVEXHUzMEI4XHUzMEE3XHUzMEFGXHUzMEM4XHUzMDAxXHU2NjQyXHU5NTkzXHU4ODY4XHU3OTNBXHUzMDAxXHU1QjlGXHU4ODRDXHU2NjQyXHU5NTkzXHUzMDkyXHU5NzVFXHU4ODY4XHU3OTNBICovXG4udGFza2NodXRlLXZlcnktbmFycm93IC50YXNrY2h1dGUtcHJvamVjdC1kaXNwbGF5LFxuLnRhc2tjaHV0ZS12ZXJ5LW5hcnJvdyAudGFzay10aW1lLXJhbmdlLFxuLnRhc2tjaHV0ZS12ZXJ5LW5hcnJvdyAudGFzay1kdXJhdGlvbiB7XG4gICAgZGlzcGxheTogbm9uZTtcbn1cblxuLyogXHU2NUU1XHU4REU4XHUzMDRFXHUzMEJGXHUzMEI5XHUzMEFGXHUzMDZFXHUzMEI5XHUzMEJGXHUzMEE0XHUzMEVCICovXG4udGFzay1kdXJhdGlvbi5jcm9zcy1kYXkge1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LWFjY2VudCk7XG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG59XG5cbi50YXNrLWR1cmF0aW9uLmNyb3NzLWRheTo6YWZ0ZXIge1xuICAgIGNvbnRlbnQ6IFwiXHVEODNDXHVERjE5XCI7XG4gICAgZm9udC1zaXplOiAwLjhlbTtcbiAgICBtYXJnaW4tbGVmdDogNHB4O1xuICAgIG9wYWNpdHk6IDAuNztcbn1cblxuLyogXHUzMEJGXHUzMEI5XHUzMEFGXHU1NDBEXHUzMDkyXHU2NzAwXHU1OTI3XHU5NjUwXHU4ODY4XHU3OTNBICovXG4udGFza2NodXRlLXZlcnktbmFycm93IC50YXNrLW5hbWUge1xuICAgIG1pbi13aWR0aDogODBweDtcbn1cblxuLyogXHUzMEVCXHUzMEZDXHUzMEMxXHUzMEYzXHUzMERDXHUzMEJGXHUzMEYzXHUzMDY4XHU4QTJEXHU1QjlBXHUzMERDXHUzMEJGXHUzMEYzXHUzMDZFXHUzMDdGXHU4ODY4XHU3OTNBICovXG4udGFza2NodXRlLXZlcnktbmFycm93IC50YXNrLWl0ZW0gPiAqOm50aC1jaGlsZCg3KSwgIC8qIFx1MzBFQlx1MzBGQ1x1MzBDMVx1MzBGM1x1MzBEQ1x1MzBCRlx1MzBGMyAqL1xuLnRhc2tjaHV0ZS12ZXJ5LW5hcnJvdyAudGFzay1pdGVtID4gKjpudGgtY2hpbGQoOSkgeyAgLyogXHU4QTJEXHU1QjlBXHUzMERDXHUzMEJGXHUzMEYzICovXG4gICAgZGlzcGxheTogZmxleDtcbn1cblxuLyogXHUzMEVCXHUzMEZDXHUzMEMxXHUzMEYzXHU4QTJEXHU1QjlBXHUzMEUyXHUzMEZDXHUzMEMwXHUzMEVCXHUzMDZFXHU2NUIwXHUzMDU3XHUzMDQ0XHUzMEI5XHUzMEJGXHUzMEE0XHUzMEVCICovXG4uY2hlY2tib3gtZ3JvdXAge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZ2FwOiAyMHB4O1xuICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG59XG5cbi5jaGVja2JveC1sYWJlbCB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGdhcDogOHB4O1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICB1c2VyLXNlbGVjdDogbm9uZTtcbn1cblxuLmNoZWNrYm94LWxhYmVsIGlucHV0W3R5cGU9XCJjaGVja2JveFwiXSB7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIG1hcmdpbjogMDtcbn1cblxuLndlZWtkYXktY2hlY2tib3hlcyB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBnYXA6IDE1cHg7XG4gICAgZmxleC13cmFwOiB3cmFwO1xuICAgIHBhZGRpbmc6IDEwcHggMDtcbn1cblxuLndlZWtkYXktY2hlY2tib3gtbGFiZWwge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBnYXA6IDVweDtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgcGFkZGluZzogNXB4IDEwcHg7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlO1xufVxuXG4ud2Vla2RheS1jaGVja2JveC1sYWJlbDpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG59XG5cbi53ZWVrZGF5LWNoZWNrYm94LWxhYmVsIGlucHV0W3R5cGU9XCJjaGVja2JveFwiXSB7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIG1hcmdpbjogMDtcbn1cblxuLndlZWtkYXktY2hlY2tib3gtbGFiZWwgaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdOmNoZWNrZWQgKyBzcGFuIHtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1hY2NlbnQpO1xufVxuXG4vKiBcdTY2RENcdTY1RTVcdTkwNzhcdTYyOUVcdTMwQjBcdTMwRUJcdTMwRkNcdTMwRDdcdTUxNjhcdTRGNTNcdTMwNkVcdTMwQjlcdTMwQkZcdTMwQTRcdTMwRUIgKi9cbiNlZGl0LXdlZWtkYXktZ3JvdXAge1xuICAgIHRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2U7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbn1cblxuI2VkaXQtd2Vla2RheS1ncm91cFtzdHlsZSo9XCJkaXNwbGF5OiBub25lXCJdIHtcbiAgICBtYXgtaGVpZ2h0OiAwO1xuICAgIG9wYWNpdHk6IDA7XG59XG5cbiNlZGl0LXdlZWtkYXktZ3JvdXBbc3R5bGUqPVwiZGlzcGxheTogYmxvY2tcIl0ge1xuICAgIG1heC1oZWlnaHQ6IDIwMHB4O1xuICAgIG9wYWNpdHk6IDE7XG59XG5cbi8qIFx1MzBCRlx1MzBCOVx1MzBBRlx1NTQwRFx1NjkxQ1x1OEEzQ1x1MzBCOVx1MzBCRlx1MzBBNFx1MzBFQiAqL1xuLmZvcm0taW5wdXQuZXJyb3Ige1xuICAgIGJvcmRlci1jb2xvcjogI2U3NGMzYztcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmVlO1xufVxuXG4udGFzay1uYW1lLXdhcm5pbmcge1xuICAgIGNvbG9yOiAjZTc0YzNjO1xuICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICBtYXJnaW4tdG9wOiA0cHg7XG4gICAgcGFkZGluZzogNHB4IDhweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmVlO1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbn1cblxuLnRhc2stbmFtZS13YXJuaW5nLmhpZGRlbiB7XG4gICAgZGlzcGxheTogbm9uZTtcbn1cblxuLnRhc2stbmFtZS13YXJuaW5nLmhpZ2hsaWdodCB7XG4gICAgYW5pbWF0aW9uOiBmbGFzaCAwLjNzIGVhc2UtaW4tb3V0O1xufVxuXG5Aa2V5ZnJhbWVzIGZsYXNoIHtcbiAgICAwJSwgMTAwJSB7IG9wYWNpdHk6IDE7IH1cbiAgICA1MCUgeyBvcGFjaXR5OiAwLjU7IH1cbn1cblxuLmZvcm0tYnV0dG9uLmRpc2FibGVkIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjY2NjO1xuICAgIGN1cnNvcjogbm90LWFsbG93ZWQ7XG4gICAgb3BhY2l0eTogMC42O1xufVxuXG4vKiBQaGFzZSAxOiBcdTY3MDBcdTRFMEJcdTkwRThcdTMwNzhcdTMwNkVcdTMwQzlcdTMwRURcdTMwQzNcdTMwRDdcdTMwQTRcdTMwRjNcdTMwQjhcdTMwQjFcdTMwRkNcdTMwQkZcdTMwRkMgKi9cbi50YXNrLWl0ZW0uZHJhZ292ZXItYm90dG9tIHtcbiAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICBtYXJnaW4tYm90dG9tOiAtMnB4O1xufVxuXG4udGFzay1saXN0LmRyYWdvdmVyLWJvdHRvbTo6YWZ0ZXIge1xuICAgIGNvbnRlbnQ6ICcnO1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgIGhlaWdodDogMnB4O1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgbWFyZ2luLXRvcDogNHB4O1xufVxuYDsiLCAiLy8gUmVmYWN0b3JlZCBsb2FkVGFza3MgaW1wbGVtZW50YXRpb24gd2l0aCBwcm9wZXIgZmlsdGVyaW5nXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkVGFza3NSZWZhY3RvcmVkKHRoaXM6IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICB0aGlzLnRhc2tzID0gW107XG4gIHRoaXMudGFza0luc3RhbmNlcyA9IFtdO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgZGF0ZVN0cmluZyA9IHRoaXMuZ2V0Q3VycmVudERhdGVTdHJpbmcoKTtcbiAgICBcbiAgICAvLyBMb2FkIHRvZGF5J3MgZXhlY3V0aW9ucyBmcm9tIGxvZ1xuICAgIGNvbnN0IHRvZGF5RXhlY3V0aW9ucyA9IGF3YWl0IGxvYWRUb2RheUV4ZWN1dGlvbnMuY2FsbCh0aGlzLCBkYXRlU3RyaW5nKTtcbiAgICBcbiAgICAvLyBHZXQgdGFzayBmb2xkZXJcbiAgICBjb25zdCB0YXNrRm9sZGVyUGF0aCA9IHRoaXMucGx1Z2luLnBhdGhNYW5hZ2VyLmdldFRhc2tGb2xkZXJQYXRoKCk7XG4gICAgY29uc3QgdGFza0ZvbGRlciA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0YXNrRm9sZGVyUGF0aCk7XG4gICAgXG4gICAgaWYgKCF0YXNrRm9sZGVyKSB7XG4gICAgICB0aGlzLnJlbmRlclRhc2tMaXN0KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gR2V0IGFsbCB0YXNrIGZpbGVzXG4gICAgY29uc3QgdGFza0ZpbGVzID0gdGFza0ZvbGRlci5jaGlsZHJlbi5maWx0ZXIoXG4gICAgICAoZmlsZTogYW55KSA9PiBmaWxlLmV4dGVuc2lvbiA9PT0gXCJtZFwiXG4gICAgKTtcblxuICAgIC8vIFRyYWNrIHByb2Nlc3NlZCB0YXNrIG5hbWVzIHRvIGF2b2lkIGR1cGxpY2F0ZXNcbiAgICBjb25zdCBwcm9jZXNzZWRUYXNrTmFtZXMgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBjb25zdCBwcm9jZXNzZWRGaWxlUGF0aHMgPSBuZXcgU2V0PHN0cmluZz4oKTtcblxuICAgIC8vIEZpcnN0LCBwcm9jZXNzIHRhc2tzIGZyb20gZXhlY3V0aW9uIGhpc3RvcnlcbiAgICBmb3IgKGNvbnN0IGV4ZWMgb2YgdG9kYXlFeGVjdXRpb25zKSB7XG4gICAgICBpZiAoIXByb2Nlc3NlZFRhc2tOYW1lcy5oYXMoZXhlYy50YXNrVGl0bGUpKSB7XG4gICAgICAgIHByb2Nlc3NlZFRhc2tOYW1lcy5hZGQoZXhlYy50YXNrVGl0bGUpO1xuICAgICAgICBcbiAgICAgICAgLy8gRmluZCB0aGUgdGFzayBmaWxlXG4gICAgICAgIGNvbnN0IHRhc2tGaWxlID0gdGFza0ZpbGVzLmZpbmQoKGY6IGFueSkgPT4gZi5iYXNlbmFtZSA9PT0gZXhlYy50YXNrVGl0bGUpO1xuICAgICAgICBpZiAodGFza0ZpbGUpIHtcbiAgICAgICAgICBwcm9jZXNzZWRGaWxlUGF0aHMuYWRkKHRhc2tGaWxlLnBhdGgpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBHZXQgYWxsIGV4ZWN1dGlvbnMgZm9yIHRoaXMgdGFza1xuICAgICAgICBjb25zdCB0YXNrRXhlY3V0aW9ucyA9IHRvZGF5RXhlY3V0aW9ucy5maWx0ZXIoXG4gICAgICAgICAgKGU6IGFueSkgPT4gZS50YXNrVGl0bGUgPT09IGV4ZWMudGFza1RpdGxlXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgdGFzayBmcm9tIGV4ZWN1dGlvblxuICAgICAgICBhd2FpdCBjcmVhdGVUYXNrRnJvbUV4ZWN1dGlvbnMuY2FsbCh0aGlzLCB0YXNrRXhlY3V0aW9ucywgdGFza0ZpbGUsIGRhdGVTdHJpbmcpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRoZW4sIHByb2Nlc3MgdGFza3MgdGhhdCBoYXZlbid0IGJlZW4gZXhlY3V0ZWQgdG9kYXkgKHJvdXRpbmUgYW5kIG5vbi1yb3V0aW5lKVxuICAgIGZvciAoY29uc3QgZmlsZSBvZiB0YXNrRmlsZXMpIHtcbiAgICAgIGlmIChwcm9jZXNzZWRGaWxlUGF0aHMuaGFzKGZpbGUucGF0aCkpIGNvbnRpbnVlO1xuICAgICAgXG4gICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgIGNvbnN0IG1ldGFkYXRhID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiBpdCdzIGEgdGFzayBmaWxlXG4gICAgICBpZiAoIWNvbnRlbnQuaW5jbHVkZXMoXCIjdGFza1wiKSAmJiAhbWV0YWRhdGE/LmVzdGltYXRlZE1pbnV0ZXMpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIGl0J3MgYSByb3V0aW5lIHRhc2tcbiAgICAgIGNvbnN0IGlzUm91dGluZSA9IG1ldGFkYXRhPy5pc1JvdXRpbmUgPT09IHRydWUgfHwgY29udGVudC5pbmNsdWRlcyhcIiNyb3V0aW5lXCIpO1xuICAgICAgXG4gICAgICBpZiAoaXNSb3V0aW5lKSB7XG4gICAgICAgIC8vIFByb2Nlc3Mgcm91dGluZSB0YXNrXG4gICAgICAgIGlmIChzaG91bGRTaG93Um91dGluZVRhc2suY2FsbCh0aGlzLCBtZXRhZGF0YSwgdGhpcy5jdXJyZW50RGF0ZSkpIHtcbiAgICAgICAgICBhd2FpdCBjcmVhdGVSb3V0aW5lVGFzay5jYWxsKHRoaXMsIGZpbGUsIGNvbnRlbnQsIG1ldGFkYXRhLCBkYXRlU3RyaW5nKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gUHJvY2VzcyBub24tcm91dGluZSB0YXNrIC0gb25seSBzaG93IGlmIGNvbmRpdGlvbnMgYXJlIG1ldFxuICAgICAgICBjb25zdCBzaG91bGRTaG93ID0gYXdhaXQgc2hvdWxkU2hvd05vblJvdXRpbmVUYXNrLmNhbGwodGhpcywgZmlsZSwgbWV0YWRhdGEsIGRhdGVTdHJpbmcpO1xuICAgICAgICBpZiAoc2hvdWxkU2hvdykge1xuICAgICAgICAgIGF3YWl0IGNyZWF0ZU5vblJvdXRpbmVUYXNrLmNhbGwodGhpcywgZmlsZSwgY29udGVudCwgbWV0YWRhdGEsIGRhdGVTdHJpbmcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHRoaXMucmVuZGVyVGFza0xpc3QoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGxvYWQgdGFza3M6XCIsIGVycm9yKTtcbiAgICBuZXcgKHRoaXMuYXBwLmNvbnN0cnVjdG9yIGFzIGFueSkuTm90aWNlKFwiXHUzMEJGXHUzMEI5XHUzMEFGXHUzMDZFXHU4QUFEXHUzMDdGXHU4RkJDXHUzMDdGXHUzMDZCXHU1OTMxXHU2NTU3XHUzMDU3XHUzMDdFXHUzMDU3XHUzMDVGXCIpO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGxvYWRUb2RheUV4ZWN1dGlvbnModGhpczogYW55LCBkYXRlU3RyaW5nOiBzdHJpbmcpOiBQcm9taXNlPGFueVtdPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgbG9nRGF0YVBhdGggPSB0aGlzLnBsdWdpbi5wYXRoTWFuYWdlci5nZXRMb2dEYXRhUGF0aCgpO1xuICAgIGNvbnN0IFt5ZWFyLCBtb250aF0gPSBkYXRlU3RyaW5nLnNwbGl0KCctJyk7XG4gICAgY29uc3QgbW9udGhTdHJpbmcgPSBgJHt5ZWFyfS0ke21vbnRofWA7XG4gICAgY29uc3QgbG9nUGF0aCA9IGAke2xvZ0RhdGFQYXRofS8ke21vbnRoU3RyaW5nfS10YXNrcy5qc29uYDtcbiAgICBcbiAgICBjb25zdCBsb2dGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGxvZ1BhdGgpO1xuICAgIGlmICghbG9nRmlsZSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGxvZ0ZpbGUpO1xuICAgIGNvbnN0IG1vbnRobHlMb2cgPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xuICAgIFxuICAgIC8vIEdldCBleGVjdXRpb25zIGZvciB0aGUgc3BlY2lmaWMgZGF0ZVxuICAgIGNvbnN0IGRheUV4ZWN1dGlvbnMgPSBtb250aGx5TG9nLnRhc2tFeGVjdXRpb25zPy5bZGF0ZVN0cmluZ10gfHwgW107XG4gICAgXG4gICAgcmV0dXJuIGRheUV4ZWN1dGlvbnMubWFwKChleGVjOiBhbnkpID0+ICh7XG4gICAgICB0YXNrVGl0bGU6IGV4ZWMudGFza1RpdGxlIHx8IGV4ZWMudGFza05hbWUsXG4gICAgICB0YXNrUGF0aDogZXhlYy50YXNrUGF0aCB8fCAnJyxcbiAgICAgIHN0YXJ0VGltZTogZXhlYy5zdGFydFRpbWUsXG4gICAgICBzdG9wVGltZTogZXhlYy5zdG9wVGltZSxcbiAgICAgIHNsb3RLZXk6IGV4ZWMuc2xvdEtleSB8fCBjYWxjdWxhdGVTbG90S2V5RnJvbVRpbWUoZXhlYy5zdGFydFRpbWUpLFxuICAgICAgaW5zdGFuY2VJZDogZXhlYy5pbnN0YW5jZUlkLFxuICAgIH0pKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCB0b2RheSBleGVjdXRpb25zOicsIGVycm9yKTtcbiAgICByZXR1cm4gW107XG4gIH1cbn1cblxuZnVuY3Rpb24gY2FsY3VsYXRlU2xvdEtleUZyb21UaW1lKHRpbWVTdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gIGlmICghdGltZVN0cikgcmV0dXJuIFwibm9uZVwiO1xuICBcbiAgY29uc3QgW2hvdXJTdHJdID0gdGltZVN0ci5zcGxpdCgnOicpO1xuICBjb25zdCBob3VyID0gcGFyc2VJbnQoaG91clN0ciwgMTApO1xuICBcbiAgaWYgKGhvdXIgPj0gMCAmJiBob3VyIDwgOCkgcmV0dXJuIFwiMDowMC04OjAwXCI7XG4gIGlmIChob3VyID49IDggJiYgaG91ciA8IDEyKSByZXR1cm4gXCI4OjAwLTEyOjAwXCI7XG4gIGlmIChob3VyID49IDEyICYmIGhvdXIgPCAxNikgcmV0dXJuIFwiMTI6MDAtMTY6MDBcIjtcbiAgaWYgKGhvdXIgPj0gMTYgJiYgaG91ciA8IDI0KSByZXR1cm4gXCIxNjowMC0wOjAwXCI7XG4gIFxuICByZXR1cm4gXCJub25lXCI7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVRhc2tGcm9tRXhlY3V0aW9ucyh0aGlzOiBhbnksIGV4ZWN1dGlvbnM6IGFueVtdLCBmaWxlOiBhbnksIGRhdGVTdHJpbmc6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBtZXRhZGF0YSA9IGZpbGUgPyB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXIgOiBudWxsO1xuICBcbiAgLy8gRXh0cmFjdCBwcm9qZWN0IGluZm9cbiAgbGV0IHByb2plY3RQYXRoID0gbnVsbDtcbiAgbGV0IHByb2plY3RUaXRsZSA9IG51bGw7XG4gIFxuICAvLyBGaXJzdCBjaGVjayBpZiBwcm9qZWN0X3BhdGggaXMgYWxyZWFkeSBzZXRcbiAgaWYgKG1ldGFkYXRhPy5wcm9qZWN0X3BhdGgpIHtcbiAgICBwcm9qZWN0UGF0aCA9IG1ldGFkYXRhLnByb2plY3RfcGF0aDtcbiAgICBwcm9qZWN0VGl0bGUgPSBleHRyYWN0UHJvamVjdFRpdGxlKG1ldGFkYXRhLnByb2plY3QpO1xuICB9IGVsc2UgaWYgKG1ldGFkYXRhPy5wcm9qZWN0KSB7XG4gICAgcHJvamVjdFRpdGxlID0gZXh0cmFjdFByb2plY3RUaXRsZShtZXRhZGF0YS5wcm9qZWN0KTtcbiAgICBjb25zb2xlLmxvZyhgW1Rhc2tDaHV0ZSBEZWJ1Z10gRXh0cmFjdGVkIHByb2plY3QgdGl0bGU6IFwiJHtwcm9qZWN0VGl0bGV9XCIgZnJvbSBcIiR7bWV0YWRhdGEucHJvamVjdH1cImApO1xuICAgIGlmIChwcm9qZWN0VGl0bGUpIHtcbiAgICAgIC8vIFRyeSB0byBmaW5kIHRoZSBwcm9qZWN0IGZpbGUgaW4gdGhlIHZhdWx0XG4gICAgICBjb25zdCBhbGxGaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgIGNvbnN0IHByb2plY3RGaWxlID0gYWxsRmlsZXMuZmluZChmID0+IGYuYmFzZW5hbWUgPT09IHByb2plY3RUaXRsZSk7XG4gICAgICBpZiAocHJvamVjdEZpbGUpIHtcbiAgICAgICAgcHJvamVjdFBhdGggPSBwcm9qZWN0RmlsZS5wYXRoO1xuICAgICAgICBjb25zb2xlLmxvZyhgW1Rhc2tDaHV0ZSBEZWJ1Z10gRm91bmQgcHJvamVjdCBmaWxlIGF0OiAke3Byb2plY3RQYXRofWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coYFtUYXNrQ2h1dGUgRGVidWddIFByb2plY3QgZmlsZSBub3QgZm91bmQgZm9yOiAke3Byb2plY3RUaXRsZX1gKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG4gIGNvbnN0IHRhc2tEYXRhID0ge1xuICAgIGZpbGU6IGZpbGUgfHwgbnVsbCxcbiAgICBmcm9udG1hdHRlcjogbWV0YWRhdGEgfHwge30sXG4gICAgcGF0aDogZmlsZT8ucGF0aCB8fCBgVGFza0NodXRlL1Rhc2svJHtleGVjdXRpb25zWzBdLnRhc2tUaXRsZX0ubWRgLFxuICAgIG5hbWU6IGV4ZWN1dGlvbnNbMF0udGFza1RpdGxlLFxuICAgIHRpdGxlOiBleGVjdXRpb25zWzBdLnRhc2tUaXRsZSxcbiAgICBwcm9qZWN0OiBtZXRhZGF0YT8ucHJvamVjdCxcbiAgICBwcm9qZWN0UGF0aDogcHJvamVjdFBhdGgsXG4gICAgcHJvamVjdFRpdGxlOiBwcm9qZWN0VGl0bGUsXG4gICAgaXNSb3V0aW5lOiBtZXRhZGF0YT8uaXNSb3V0aW5lID09PSB0cnVlIHx8IGZhbHNlLFxuICAgIHJvdXRpbmVUeXBlOiBtZXRhZGF0YT8ucm91dGluZV90eXBlLFxuICAgIHNjaGVkdWxlZFRpbWU6IG1ldGFkYXRhPy5cdTk1OEJcdTU5Q0JcdTY2NDJcdTUyM0IsXG4gICAgaXNWaXJ0dWFsOiAhZmlsZSxcbiAgfTtcblxuICB0aGlzLnRhc2tzLnB1c2godGFza0RhdGEpO1xuXG4gIC8vIENyZWF0ZSBpbnN0YW5jZXMgZm9yIGVhY2ggZXhlY3V0aW9uXG4gIGZvciAoY29uc3QgZXhlYyBvZiBleGVjdXRpb25zKSB7XG4gICAgY29uc3QgaW5zdGFuY2UgPSB7XG4gICAgICB0YXNrOiB0YXNrRGF0YSxcbiAgICAgIGluc3RhbmNlSWQ6IGV4ZWMuaW5zdGFuY2VJZCB8fCB0aGlzLmdlbmVyYXRlSW5zdGFuY2VJZCh0YXNrRGF0YS5wYXRoKSxcbiAgICAgIHN0YXRlOiAnZG9uZScsXG4gICAgICBzbG90S2V5OiBleGVjLnNsb3RLZXksXG4gICAgICBkYXRlOiBkYXRlU3RyaW5nLFxuICAgICAgc3RhcnRUaW1lOiBwYXJzZVRpbWVTdHJpbmcoZXhlYy5zdGFydFRpbWUsIGRhdGVTdHJpbmcpLFxuICAgICAgc3RvcFRpbWU6IHBhcnNlVGltZVN0cmluZyhleGVjLnN0b3BUaW1lLCBkYXRlU3RyaW5nKSxcbiAgICAgIGV4ZWN1dGVkVGl0bGU6IGV4ZWMudGFza1RpdGxlLFxuICAgIH07XG5cbiAgICAvLyBDaGVjayBpZiBkZWxldGVkIG9yIGhpZGRlblxuICAgIGNvbnN0IGlzRGVsZXRlZCA9IGlzSW5zdGFuY2VEZWxldGVkLmNhbGwodGhpcywgaW5zdGFuY2UuaW5zdGFuY2VJZCwgdGFza0RhdGEucGF0aCwgZGF0ZVN0cmluZyk7XG4gICAgY29uc3QgaXNIaWRkZW4gPSBpc0luc3RhbmNlSGlkZGVuLmNhbGwodGhpcywgaW5zdGFuY2UuaW5zdGFuY2VJZCwgdGFza0RhdGEucGF0aCwgZGF0ZVN0cmluZyk7XG4gICAgXG4gICAgaWYgKCFpc0RlbGV0ZWQgJiYgIWlzSGlkZGVuKSB7XG4gICAgICB0aGlzLnRhc2tJbnN0YW5jZXMucHVzaChpbnN0YW5jZSk7XG4gICAgfVxuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU5vblJvdXRpbmVUYXNrKHRoaXM6IGFueSwgZmlsZTogYW55LCBjb250ZW50OiBzdHJpbmcsIG1ldGFkYXRhOiBhbnksIGRhdGVTdHJpbmc6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAvLyBFeHRyYWN0IHByb2plY3QgaW5mb1xuICBsZXQgcHJvamVjdFBhdGggPSBudWxsO1xuICBsZXQgcHJvamVjdFRpdGxlID0gbnVsbDtcbiAgXG4gIC8vIEZpcnN0IGNoZWNrIGlmIHByb2plY3RfcGF0aCBpcyBhbHJlYWR5IHNldFxuICBpZiAobWV0YWRhdGE/LnByb2plY3RfcGF0aCkge1xuICAgIHByb2plY3RQYXRoID0gbWV0YWRhdGEucHJvamVjdF9wYXRoO1xuICAgIHByb2plY3RUaXRsZSA9IGV4dHJhY3RQcm9qZWN0VGl0bGUobWV0YWRhdGEucHJvamVjdCk7XG4gIH0gZWxzZSBpZiAobWV0YWRhdGE/LnByb2plY3QpIHtcbiAgICBwcm9qZWN0VGl0bGUgPSBleHRyYWN0UHJvamVjdFRpdGxlKG1ldGFkYXRhLnByb2plY3QpO1xuICAgIGNvbnNvbGUubG9nKGBbVGFza0NodXRlIERlYnVnXSBFeHRyYWN0ZWQgcHJvamVjdCB0aXRsZTogXCIke3Byb2plY3RUaXRsZX1cIiBmcm9tIFwiJHttZXRhZGF0YS5wcm9qZWN0fVwiYCk7XG4gICAgaWYgKHByb2plY3RUaXRsZSkge1xuICAgICAgLy8gVHJ5IHRvIGZpbmQgdGhlIHByb2plY3QgZmlsZSBpbiB0aGUgdmF1bHRcbiAgICAgIGNvbnN0IGFsbEZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgY29uc3QgcHJvamVjdEZpbGUgPSBhbGxGaWxlcy5maW5kKGYgPT4gZi5iYXNlbmFtZSA9PT0gcHJvamVjdFRpdGxlKTtcbiAgICAgIGlmIChwcm9qZWN0RmlsZSkge1xuICAgICAgICBwcm9qZWN0UGF0aCA9IHByb2plY3RGaWxlLnBhdGg7XG4gICAgICAgIGNvbnNvbGUubG9nKGBbVGFza0NodXRlIERlYnVnXSBGb3VuZCBwcm9qZWN0IGZpbGUgYXQ6ICR7cHJvamVjdFBhdGh9YCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhgW1Rhc2tDaHV0ZSBEZWJ1Z10gUHJvamVjdCBmaWxlIG5vdCBmb3VuZCBmb3I6ICR7cHJvamVjdFRpdGxlfWApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBcbiAgY29uc3QgdGFza0RhdGEgPSB7XG4gICAgZmlsZSxcbiAgICBmcm9udG1hdHRlcjogbWV0YWRhdGEgfHwge30sXG4gICAgcGF0aDogZmlsZS5wYXRoLFxuICAgIG5hbWU6IGZpbGUuYmFzZW5hbWUsXG4gICAgdGl0bGU6IGZpbGUuYmFzZW5hbWUsXG4gICAgcHJvamVjdDogbWV0YWRhdGE/LnByb2plY3QsXG4gICAgcHJvamVjdFBhdGg6IHByb2plY3RQYXRoLFxuICAgIHByb2plY3RUaXRsZTogcHJvamVjdFRpdGxlLFxuICAgIGlzUm91dGluZTogZmFsc2UsXG4gICAgc2NoZWR1bGVkVGltZTogbWV0YWRhdGE/Llx1OTU4Qlx1NTlDQlx1NjY0Mlx1NTIzQixcbiAgfTtcblxuICB0aGlzLnRhc2tzLnB1c2godGFza0RhdGEpO1xuXG4gIC8vIENyZWF0ZSBpZGxlIGluc3RhbmNlIGZvciBub24tcm91dGluZSB0YXNrXG4gIGNvbnN0IGluc3RhbmNlID0ge1xuICAgIHRhc2s6IHRhc2tEYXRhLFxuICAgIGluc3RhbmNlSWQ6IHRoaXMuZ2VuZXJhdGVJbnN0YW5jZUlkKHRhc2tEYXRhLnBhdGgpLFxuICAgIHN0YXRlOiAnaWRsZScsXG4gICAgc2xvdEtleTogZ2V0U2NoZWR1bGVkU2xvdEtleShtZXRhZGF0YT8uXHU5NThCXHU1OUNCXHU2NjQyXHU1MjNCKSB8fCAnbm9uZScsXG4gICAgZGF0ZTogZGF0ZVN0cmluZyxcbiAgfTtcblxuICAvLyBDaGVjayBpZiBkZWxldGVkIC0gY2hlY2sgYnkgcGF0aCBvbmx5IGZvciBub24tcm91dGluZSB0YXNrc1xuICBjb25zdCBkZWxldGVkS2V5ID0gYHRhc2tjaHV0ZS1kZWxldGVkLWluc3RhbmNlcy0ke2RhdGVTdHJpbmd9YDtcbiAgY29uc3QgZGVsZXRlZEluc3RhbmNlcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oZGVsZXRlZEtleSkgfHwgJ1tdJyk7XG4gIGNvbnN0IGlzRGVsZXRlZCA9IGRlbGV0ZWRJbnN0YW5jZXMuc29tZSgoZDogYW55KSA9PiBcbiAgICBkLnBhdGggPT09IGZpbGUucGF0aFxuICApO1xuXG4gIGlmICghaXNEZWxldGVkKSB7XG4gICAgdGhpcy50YXNrSW5zdGFuY2VzLnB1c2goaW5zdGFuY2UpO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVJvdXRpbmVUYXNrKHRoaXM6IGFueSwgZmlsZTogYW55LCBjb250ZW50OiBzdHJpbmcsIG1ldGFkYXRhOiBhbnksIGRhdGVTdHJpbmc6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAvLyBFeHRyYWN0IHByb2plY3QgaW5mb1xuICBsZXQgcHJvamVjdFBhdGggPSBudWxsO1xuICBsZXQgcHJvamVjdFRpdGxlID0gbnVsbDtcbiAgXG4gIC8vIEZpcnN0IGNoZWNrIGlmIHByb2plY3RfcGF0aCBpcyBhbHJlYWR5IHNldFxuICBpZiAobWV0YWRhdGE/LnByb2plY3RfcGF0aCkge1xuICAgIHByb2plY3RQYXRoID0gbWV0YWRhdGEucHJvamVjdF9wYXRoO1xuICAgIHByb2plY3RUaXRsZSA9IGV4dHJhY3RQcm9qZWN0VGl0bGUobWV0YWRhdGEucHJvamVjdCk7XG4gIH0gZWxzZSBpZiAobWV0YWRhdGE/LnByb2plY3QpIHtcbiAgICBwcm9qZWN0VGl0bGUgPSBleHRyYWN0UHJvamVjdFRpdGxlKG1ldGFkYXRhLnByb2plY3QpO1xuICAgIGNvbnNvbGUubG9nKGBbVGFza0NodXRlIERlYnVnXSBFeHRyYWN0ZWQgcHJvamVjdCB0aXRsZTogXCIke3Byb2plY3RUaXRsZX1cIiBmcm9tIFwiJHttZXRhZGF0YS5wcm9qZWN0fVwiYCk7XG4gICAgaWYgKHByb2plY3RUaXRsZSkge1xuICAgICAgLy8gVHJ5IHRvIGZpbmQgdGhlIHByb2plY3QgZmlsZSBpbiB0aGUgdmF1bHRcbiAgICAgIGNvbnN0IGFsbEZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgY29uc3QgcHJvamVjdEZpbGUgPSBhbGxGaWxlcy5maW5kKGYgPT4gZi5iYXNlbmFtZSA9PT0gcHJvamVjdFRpdGxlKTtcbiAgICAgIGlmIChwcm9qZWN0RmlsZSkge1xuICAgICAgICBwcm9qZWN0UGF0aCA9IHByb2plY3RGaWxlLnBhdGg7XG4gICAgICAgIGNvbnNvbGUubG9nKGBbVGFza0NodXRlIERlYnVnXSBGb3VuZCBwcm9qZWN0IGZpbGUgYXQ6ICR7cHJvamVjdFBhdGh9YCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhgW1Rhc2tDaHV0ZSBEZWJ1Z10gUHJvamVjdCBmaWxlIG5vdCBmb3VuZCBmb3I6ICR7cHJvamVjdFRpdGxlfWApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBcbiAgY29uc3QgdGFza0RhdGEgPSB7XG4gICAgZmlsZSxcbiAgICBmcm9udG1hdHRlcjogbWV0YWRhdGEgfHwge30sXG4gICAgcGF0aDogZmlsZS5wYXRoLFxuICAgIG5hbWU6IGZpbGUuYmFzZW5hbWUsXG4gICAgdGl0bGU6IGZpbGUuYmFzZW5hbWUsXG4gICAgcHJvamVjdDogbWV0YWRhdGE/LnByb2plY3QsXG4gICAgcHJvamVjdFBhdGg6IHByb2plY3RQYXRoLFxuICAgIHByb2plY3RUaXRsZTogcHJvamVjdFRpdGxlLFxuICAgIGlzUm91dGluZTogdHJ1ZSxcbiAgICByb3V0aW5lVHlwZTogbWV0YWRhdGE/LnJvdXRpbmVfdHlwZSB8fCAnZGFpbHknLFxuICAgIHNjaGVkdWxlZFRpbWU6IG1ldGFkYXRhPy5cdTk1OEJcdTU5Q0JcdTY2NDJcdTUyM0IsXG4gICAgd2Vla2RheTogbWV0YWRhdGE/LndlZWtkYXksXG4gICAgd2Vla2RheXM6IG1ldGFkYXRhPy53ZWVrZGF5cyxcbiAgICBtb250aGx5V2VlazogbWV0YWRhdGE/Lm1vbnRobHlfd2VlayxcbiAgICBtb250aGx5V2Vla2RheTogbWV0YWRhdGE/Lm1vbnRobHlfd2Vla2RheSxcbiAgfTtcblxuICB0aGlzLnRhc2tzLnB1c2godGFza0RhdGEpO1xuXG4gIC8vIENyZWF0ZSBpZGxlIGluc3RhbmNlIGZvciByb3V0aW5lIHRhc2tcbiAgY29uc3QgaW5zdGFuY2UgPSB7XG4gICAgdGFzazogdGFza0RhdGEsXG4gICAgaW5zdGFuY2VJZDogdGhpcy5nZW5lcmF0ZUluc3RhbmNlSWQodGFza0RhdGEucGF0aCksXG4gICAgc3RhdGU6ICdpZGxlJyxcbiAgICBzbG90S2V5OiBnZXRTY2hlZHVsZWRTbG90S2V5KG1ldGFkYXRhPy5cdTk1OEJcdTU5Q0JcdTY2NDJcdTUyM0IpIHx8ICdub25lJyxcbiAgICBkYXRlOiBkYXRlU3RyaW5nLFxuICB9O1xuXG4gIC8vIENoZWNrIGlmIGhpZGRlbiBmb3IgdG9kYXlcbiAgY29uc3QgaGlkZGVuS2V5ID0gYHRhc2tjaHV0ZS1oaWRkZW4tcm91dGluZXMtJHtkYXRlU3RyaW5nfWA7XG4gIGNvbnN0IGhpZGRlblJvdXRpbmVzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShoaWRkZW5LZXkpIHx8ICdbXScpO1xuICBjb25zdCBpc0hpZGRlbiA9IGhpZGRlblJvdXRpbmVzLnNvbWUoKGg6IGFueSkgPT4gXG4gICAgKHR5cGVvZiBoID09PSAnc3RyaW5nJyA/IGggPT09IGZpbGUucGF0aCA6IGgucGF0aCA9PT0gZmlsZS5wYXRoKVxuICApO1xuXG4gIC8vIENoZWNrIGlmIGRlbGV0ZWRcbiAgY29uc3QgZGVsZXRlZEtleSA9IGB0YXNrY2h1dGUtZGVsZXRlZC1pbnN0YW5jZXMtJHtkYXRlU3RyaW5nfWA7XG4gIGNvbnN0IGRlbGV0ZWRJbnN0YW5jZXMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGRlbGV0ZWRLZXkpIHx8ICdbXScpO1xuICBjb25zdCBpc0RlbGV0ZWQgPSBkZWxldGVkSW5zdGFuY2VzLnNvbWUoKGQ6IGFueSkgPT4gXG4gICAgZC5wYXRoID09PSBmaWxlLnBhdGggJiYgKCFkLmluc3RhbmNlSWQgfHwgZC5pbnN0YW5jZUlkID09PSBpbnN0YW5jZS5pbnN0YW5jZUlkKVxuICApO1xuXG4gIGlmICghaXNIaWRkZW4gJiYgIWlzRGVsZXRlZCkge1xuICAgIHRoaXMudGFza0luc3RhbmNlcy5wdXNoKGluc3RhbmNlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzaG91bGRTaG93Um91dGluZVRhc2sodGhpczogYW55LCBtZXRhZGF0YTogYW55LCBkYXRlOiBEYXRlKTogYm9vbGVhbiB7XG4gIGlmICghbWV0YWRhdGEpIHJldHVybiBmYWxzZTtcbiAgXG4gIGNvbnN0IHJvdXRpbmVUeXBlID0gbWV0YWRhdGEucm91dGluZV90eXBlIHx8ICdkYWlseSc7XG4gIGNvbnN0IGRheU9mV2VlayA9IGRhdGUuZ2V0RGF5KCk7IC8vIDAgPSBTdW5kYXlcbiAgXG4gIHN3aXRjaCAocm91dGluZVR5cGUpIHtcbiAgICBjYXNlICdkYWlseSc6XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIFxuICAgIGNhc2UgJ3dlZWtkYXlzJzpcbiAgICAgIHJldHVybiBkYXlPZldlZWsgPj0gMSAmJiBkYXlPZldlZWsgPD0gNTsgLy8gTW9uZGF5IHRvIEZyaWRheVxuICAgICAgXG4gICAgY2FzZSAnd2Vla2VuZHMnOlxuICAgICAgcmV0dXJuIGRheU9mV2VlayA9PT0gMCB8fCBkYXlPZldlZWsgPT09IDY7IC8vIFNhdHVyZGF5IGFuZCBTdW5kYXlcbiAgICAgIFxuICAgIGNhc2UgJ3dlZWtseSc6XG4gICAgY2FzZSAnY3VzdG9tJzogIC8vIGN1c3RvbSBpcyB0cmVhdGVkIHNhbWUgYXMgd2Vla2x5XG4gICAgICBpZiAobWV0YWRhdGEud2Vla2RheSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBkYXlPZldlZWsgPT09IG1ldGFkYXRhLndlZWtkYXk7XG4gICAgICB9XG4gICAgICBpZiAobWV0YWRhdGEud2Vla2RheXMgJiYgQXJyYXkuaXNBcnJheShtZXRhZGF0YS53ZWVrZGF5cykpIHtcbiAgICAgICAgcmV0dXJuIG1ldGFkYXRhLndlZWtkYXlzLmluY2x1ZGVzKGRheU9mV2Vlayk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgICBcbiAgICBjYXNlICdtb250aGx5JzpcbiAgICAgIGlmIChtZXRhZGF0YS5tb250aGx5X3dlZWsgIT09IHVuZGVmaW5lZCAmJiBtZXRhZGF0YS5tb250aGx5X3dlZWtkYXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCB3ZWVrT2ZNb250aCA9IE1hdGguZmxvb3IoKGRhdGUuZ2V0RGF0ZSgpIC0gMSkgLyA3KTtcbiAgICAgICAgcmV0dXJuIHdlZWtPZk1vbnRoID09PSBtZXRhZGF0YS5tb250aGx5X3dlZWsgJiYgZGF5T2ZXZWVrID09PSBtZXRhZGF0YS5tb250aGx5X3dlZWtkYXk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgICBcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gZXh0cmFjdFByb2plY3RUaXRsZShwcm9qZWN0RmllbGQ6IHN0cmluZyB8IHVuZGVmaW5lZCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gIGlmICghcHJvamVjdEZpZWxkKSByZXR1cm4gdW5kZWZpbmVkO1xuICBcbiAgLy8gQ2hlY2sgZm9yIFtbLi4uXV0gZm9ybWF0IGZpcnN0XG4gIGNvbnN0IG1hdGNoID0gcHJvamVjdEZpZWxkLm1hdGNoKC9cXFtcXFsoW15cXF1dKylcXF1cXF0vKTtcbiAgaWYgKG1hdGNoKSB7XG4gICAgcmV0dXJuIG1hdGNoWzFdO1xuICB9XG4gIFxuICAvLyBJZiBub3QgaW4gW1suLi5dXSBmb3JtYXQsIHJldHVybiBhcy1pcyAoZm9yIHBsYWluIHRleHQgcHJvamVjdCBuYW1lcylcbiAgLy8gVGhpcyBoYW5kbGVzIGNhc2VzIGxpa2UgXCJQcm9qZWN0IC0gVGFza2NodXRlIGZvciBMb2NhbFwiXG4gIHJldHVybiBwcm9qZWN0RmllbGQ7XG59XG5cbmZ1bmN0aW9uIHBhcnNlVGltZVN0cmluZyh0aW1lU3RyOiBzdHJpbmcsIGRhdGVTdHI6IHN0cmluZyk6IERhdGUgfCB1bmRlZmluZWQge1xuICBpZiAoIXRpbWVTdHIpIHJldHVybiB1bmRlZmluZWQ7XG4gIGNvbnN0IFtob3VycywgbWludXRlcywgc2Vjb25kc10gPSB0aW1lU3RyLnNwbGl0KCc6JykubWFwKE51bWJlcik7XG4gIGNvbnN0IFt5ZWFyLCBtb250aCwgZGF5XSA9IGRhdGVTdHIuc3BsaXQoJy0nKS5tYXAoTnVtYmVyKTtcbiAgcmV0dXJuIG5ldyBEYXRlKHllYXIsIG1vbnRoIC0gMSwgZGF5LCBob3VycywgbWludXRlcywgc2Vjb25kcyB8fCAwKTtcbn1cblxuZnVuY3Rpb24gZ2V0U2NoZWR1bGVkU2xvdEtleShzY2hlZHVsZWRUaW1lOiBzdHJpbmcgfCB1bmRlZmluZWQpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICBpZiAoIXNjaGVkdWxlZFRpbWUpIHJldHVybiB1bmRlZmluZWQ7XG4gIGNvbnN0IFtob3VyU3RyXSA9IHNjaGVkdWxlZFRpbWUuc3BsaXQoJzonKTtcbiAgY29uc3QgaG91ciA9IHBhcnNlSW50KGhvdXJTdHIsIDEwKTtcbiAgXG4gIGlmIChob3VyID49IDAgJiYgaG91ciA8IDgpIHJldHVybiBcIjA6MDAtODowMFwiO1xuICBpZiAoaG91ciA+PSA4ICYmIGhvdXIgPCAxMikgcmV0dXJuIFwiODowMC0xMjowMFwiO1xuICBpZiAoaG91ciA+PSAxMiAmJiBob3VyIDwgMTYpIHJldHVybiBcIjEyOjAwLTE2OjAwXCI7XG4gIGlmIChob3VyID49IDE2ICYmIGhvdXIgPCAyNCkgcmV0dXJuIFwiMTY6MDAtMDowMFwiO1xuICBcbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gaXNJbnN0YW5jZURlbGV0ZWQodGhpczogYW55LCBpbnN0YW5jZUlkOiBzdHJpbmcsIHBhdGg6IHN0cmluZywgZGF0ZVN0cmluZzogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IGRlbGV0ZWRLZXkgPSBgdGFza2NodXRlLWRlbGV0ZWQtaW5zdGFuY2VzLSR7ZGF0ZVN0cmluZ31gO1xuICBjb25zdCBkZWxldGVkSW5zdGFuY2VzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShkZWxldGVkS2V5KSB8fCAnW10nKTtcbiAgcmV0dXJuIGRlbGV0ZWRJbnN0YW5jZXMuc29tZSgoZDogYW55KSA9PiBcbiAgICAoZC5pbnN0YW5jZUlkID09PSBpbnN0YW5jZUlkKSB8fCAoZC5wYXRoID09PSBwYXRoICYmICFkLmluc3RhbmNlSWQpXG4gICk7XG59XG5cbmZ1bmN0aW9uIGlzSW5zdGFuY2VIaWRkZW4odGhpczogYW55LCBpbnN0YW5jZUlkOiBzdHJpbmcsIHBhdGg6IHN0cmluZywgZGF0ZVN0cmluZzogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IGhpZGRlbktleSA9IGB0YXNrY2h1dGUtaGlkZGVuLXJvdXRpbmVzLSR7ZGF0ZVN0cmluZ31gO1xuICBjb25zdCBoaWRkZW5Sb3V0aW5lcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oaGlkZGVuS2V5KSB8fCAnW10nKTtcbiAgcmV0dXJuIGhpZGRlblJvdXRpbmVzLnNvbWUoKGg6IGFueSkgPT4gXG4gICAgKHR5cGVvZiBoID09PSAnc3RyaW5nJyA/IGggPT09IHBhdGggOiAoaC5pbnN0YW5jZUlkID09PSBpbnN0YW5jZUlkIHx8IGgucGF0aCA9PT0gcGF0aCkpXG4gICk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNob3VsZFNob3dOb25Sb3V0aW5lVGFzayh0aGlzOiBhbnksIGZpbGU6IGFueSwgbWV0YWRhdGE6IGFueSwgZGF0ZVN0cmluZzogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIC8vIEZpcnN0IGNoZWNrIGlmIHRhc2sgaXMgZGVsZXRlZFxuICBjb25zdCBkZWxldGVkS2V5ID0gYHRhc2tjaHV0ZS1kZWxldGVkLWluc3RhbmNlcy0ke2RhdGVTdHJpbmd9YDtcbiAgY29uc3QgZGVsZXRlZEluc3RhbmNlcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oZGVsZXRlZEtleSkgfHwgJ1tdJyk7XG4gIGNvbnN0IGlzRGVsZXRlZCA9IGRlbGV0ZWRJbnN0YW5jZXMuc29tZSgoZDogYW55KSA9PiBcbiAgICBkLnBhdGggPT09IGZpbGUucGF0aFxuICApO1xuICBcbiAgY29uc29sZS5sb2coYFtUYXNrQ2h1dGUgRGVidWddIHNob3VsZFNob3dOb25Sb3V0aW5lVGFzazogZmlsZT0ke2ZpbGUucGF0aH0sIGRhdGVTdHJpbmc9JHtkYXRlU3RyaW5nfSwgaXNEZWxldGVkPSR7aXNEZWxldGVkfSwgZGVsZXRlZEluc3RhbmNlcz1gLCBkZWxldGVkSW5zdGFuY2VzKTtcbiAgXG4gIGlmIChpc0RlbGV0ZWQpIHtcbiAgICByZXR1cm4gZmFsc2U7ICAvLyBEb24ndCBzaG93IGRlbGV0ZWQgdGFza3NcbiAgfVxuXG4gIC8vIENoZWNrIGlmIHRhc2sgaGFzIGEgdGFyZ2V0X2RhdGUgdGhhdCBtYXRjaGVzIHRvZGF5XG4gIGlmIChtZXRhZGF0YT8udGFyZ2V0X2RhdGUgJiYgbWV0YWRhdGEudGFyZ2V0X2RhdGUgPT09IGRhdGVTdHJpbmcpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8vIENoZWNrIGZpbGUgY3JlYXRpb24gZGF0ZSAtIG5vbi1yb3V0aW5lIHRhc2tzIGFyZSBzaG93biBvbmx5IG9uIGNyZWF0aW9uIGRhdGVcbiAgdHJ5IHtcbiAgICBjb25zdCBzdGF0cyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuc3RhdChmaWxlLnBhdGgpO1xuICAgIGlmICghc3RhdHMpIHtcbiAgICAgIC8vIEZpbGUgZG9lc24ndCBleGlzdFxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBmaWxlQ3JlYXRpb25EYXRlID0gbmV3IERhdGUoc3RhdHMuY3RpbWUgfHwgc3RhdHMubXRpbWUpO1xuICAgIFxuICAgIC8vIEdlbmVyYXRlIGRhdGUgc3RyaW5nIGluIGxvY2FsIHRpbWV6b25lXG4gICAgY29uc3QgeWVhciA9IGZpbGVDcmVhdGlvbkRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICBjb25zdCBtb250aCA9IChmaWxlQ3JlYXRpb25EYXRlLmdldE1vbnRoKCkgKyAxKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcbiAgICBjb25zdCBkYXkgPSBmaWxlQ3JlYXRpb25EYXRlLmdldERhdGUoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcbiAgICBjb25zdCBmaWxlQ3JlYXRpb25EYXRlU3RyaW5nID0gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9YDtcbiAgICBcbiAgICBjb25zb2xlLmxvZyhgW1Rhc2tDaHV0ZSBEZWJ1Z10gRmlsZSBjcmVhdGlvbiBkYXRlOiAke2ZpbGVDcmVhdGlvbkRhdGVTdHJpbmd9LCB0b2RheTogJHtkYXRlU3RyaW5nfWApO1xuICAgIFxuICAgIC8vIFNob3cgb25seSBvbiBjcmVhdGlvbiBkYXRlXG4gICAgaWYgKGRhdGVTdHJpbmcgPT09IGZpbGVDcmVhdGlvbkRhdGVTdHJpbmcpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZyhgW1Rhc2tDaHV0ZSBEZWJ1Z10gRXJyb3IgY2hlY2tpbmcgZmlsZSBzdGF0czpgLCBlcnJvcik7XG4gICAgLy8gRG9uJ3Qgc2hvdyBvbiBlcnJvciAoZmlsZSBtaWdodCBiZSBkZWxldGVkKVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBcbiAgcmV0dXJuIGZhbHNlO1xufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBQUFBLG1CQU9POzs7QUNQUCxzQkFBc0M7QUFHL0IsSUFBTSxlQUFOLE1BQU0sYUFBWTtBQUFBLEVBR3ZCLFlBQVksUUFBa0Q7QUFDNUQsU0FBSyxTQUFTO0FBQUEsRUFDaEI7QUFBQSxFQVNBLG9CQUE0QjtBQUMxQixVQUFNLE9BQ0osS0FBSyxPQUFPLFNBQVMsa0JBQ3JCLGFBQVksY0FBYztBQUM1QixlQUFPLCtCQUFjLElBQUk7QUFBQSxFQUMzQjtBQUFBLEVBRUEsdUJBQStCO0FBQzdCLFVBQU0sT0FDSixLQUFLLE9BQU8sU0FBUyxxQkFDckIsYUFBWSxjQUFjO0FBQzVCLGVBQU8sK0JBQWMsSUFBSTtBQUFBLEVBQzNCO0FBQUEsRUFFQSxpQkFBeUI7QUFDdkIsVUFBTSxPQUNKLEtBQUssT0FBTyxTQUFTLGVBQWUsYUFBWSxjQUFjO0FBQ2hFLGVBQU8sK0JBQWMsSUFBSTtBQUFBLEVBQzNCO0FBQUEsRUFFQSxvQkFBNEI7QUFDMUIsVUFBTSxPQUNKLEtBQUssT0FBTyxTQUFTLGtCQUNyQixhQUFZLGNBQWM7QUFDNUIsZUFBTywrQkFBYyxJQUFJO0FBQUEsRUFDM0I7QUFBQSxFQUVBLGVBQWUsTUFBK0I7QUFDNUMsVUFBTSxVQUFVLEtBQUssZUFBZTtBQUNwQyxlQUFPLCtCQUFjLEdBQUcsT0FBTyxJQUFJ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QUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtB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QVMsT0FBTyxFQUFFLEtBQUssYUFBYSxDQUFDO0FBQzdELFVBQU0sU0FBUyxTQUFTLEVBQUUsTUFBTSxRQUFRLEtBQUssS0FBSyxhQUFhLENBQUM7QUFDaEUsVUFBTSxRQUFRLE1BQU0sU0FBUyxTQUFTO0FBQUEsTUFDcEMsTUFBTTtBQUFBLE1BQ04sS0FBSztBQUFBLE1BQ0wsTUFBTSxFQUFFLFlBQVk7QUFBQSxJQUN0QixDQUFDO0FBRUQsVUFBTSxRQUFTLEtBQUssU0FBUyxVQUFVLEtBQWdCO0FBRXZELFVBQU0saUJBQWlCLFVBQVUsWUFBWTtBQUMzQyxZQUFNLFFBQVEsTUFBTSxNQUFNLEtBQUs7QUFDL0IsWUFBTSxhQUFhLEtBQUssWUFBWSxhQUFhLEtBQUs7QUFFdEQsVUFBSSxXQUFXLFNBQVMsVUFBVSxJQUFJO0FBQ3BDLFFBQUMsS0FBSyxTQUFTLFVBQVUsSUFBZTtBQUN4QyxjQUFNLEtBQUssYUFBYTtBQUd4QixZQUFJO0FBQ0YsY0FBSSxlQUFlLGtCQUFrQjtBQUNuQyxrQkFBTSxLQUFLLFlBQVksbUJBQW1CLEtBQUssWUFBWSxrQkFBa0IsQ0FBQztBQUFBLFVBQ2hGLFdBQVcsZUFBZSxxQkFBcUI7QUFDN0Msa0JBQU0sS0FBSyxZQUFZLG1CQUFtQixLQUFLLFlBQVkscUJBQXFCLENBQUM7QUFBQSxVQUNuRixXQUFXLGVBQWUsZUFBZTtBQUN2QyxrQkFBTSxLQUFLLFlBQVksbUJBQW1CLEtBQUssWUFBWSxlQUFlLENBQUM7QUFBQSxVQUM3RSxXQUFXLGVBQWUsa0JBQWtCO0FBQzFDLGtCQUFNLEtBQUssWUFBWSxtQkFBbUIsS0FBSyxZQUFZLGtCQUFrQixDQUFDO0FBQUEsVUFDaEY7QUFBQSxRQUNGLFNBQVMsT0FBTztBQUFBLFFBRWhCO0FBQUEsTUFDRixPQUFPO0FBQ0wsWUFBSSx3QkFBTyxXQUFXLEtBQU07QUFDNUIsY0FBTSxRQUFTLEtBQUssU0FBUyxVQUFVLEtBQWdCO0FBQUEsTUFDekQ7QUFBQSxJQUNGLENBQUM7QUFBQSxFQUNIO0FBQUEsRUFFUSxvQkFBb0IsV0FBd0IsT0FBZSxZQUEyQztBQUM1RyxVQUFNLFFBQVEsVUFBVSxTQUFTLE9BQU8sRUFBRSxLQUFLLDRCQUE0QixDQUFDO0FBQzVFLFVBQU0sV0FBVyxNQUFNLFNBQVMsU0FBUztBQUFBLE1BQ3ZDLE1BQU07QUFBQSxNQUNOLEtBQUs7QUFBQSxJQUNQLENBQUM7QUFFRCxVQUFNLFNBQVMsU0FBUyxFQUFFLE1BQU0sT0FBTyxLQUFLLGFBQWEsQ0FBQztBQUUxRCxhQUFTLFVBQVUsS0FBSyxTQUFTLFVBQVU7QUFFM0MsYUFBUyxpQkFBaUIsVUFBVSxZQUFZO0FBQzlDLE1BQUMsS0FBSyxTQUFTLFVBQVUsSUFBZ0IsU0FBUztBQUNsRCxZQUFNLEtBQUssYUFBYTtBQUFBLElBQzFCLENBQUM7QUFBQSxFQUNIO0FBQ0Y7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImUiXQp9Cg==
